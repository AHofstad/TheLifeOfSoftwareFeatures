commit 8d9021e8069c0550e9a31107adf44b9112b87471
Author: Scott Lahteine <thinkyhead@users.noreply.github.com>
Date:   Thu May 6 04:17:59 2021 -0500

    Move ExtUI subfolders up a level (#21820)

diff --git a/Marlin/src/lcd/extui/lib/mks_ui/pic_manager.h b/Marlin/src/lcd/extui/lib/mks_ui/pic_manager.h
deleted file mode 100644
index e9960fc73a..0000000000
--- a/Marlin/src/lcd/extui/lib/mks_ui/pic_manager.h
+++ /dev/null
@@ -1,168 +0,0 @@
-/**
- * Marlin 3D Printer Firmware
- * Copyright (c) 2020 MarlinFirmware [https://github.com/MarlinFirmware/Marlin]
- *
- * Based on Sprinter and grbl.
- * Copyright (c) 2011 Camiel Gubbels / Erik van der Zalm
- *
- * This program is free software: you can redistribute it and/or modify
- * it under the terms of the GNU General Public License as published by
- * the Free Software Foundation, either version 3 of the License, or
- * (at your option) any later version.
- *
- * This program is distributed in the hope that it will be useful,
- * but WITHOUT ANY WARRANTY; without even the implied warranty of
- * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
- * GNU General Public License for more details.
- *
- * You should have received a copy of the GNU General Public License
- * along with this program.  If not, see <https://www.gnu.org/licenses/>.
- *
- */
-#pragma once
-
-#include "../../../../inc/MarlinConfig.h"
-
-#include "../../../../libs/W25Qxx.h"
-
-#include <lvgl.h>
-
-#include <stdint.h>
-#include <string.h>
-
-#ifndef HAS_SPI_FLASH_FONT
-  #define HAS_SPI_FLASH_FONT              1 // Disabled until fix the font load code
-#endif
-#ifndef HAS_GCODE_PREVIEW
-  #define HAS_GCODE_PREVIEW               1
-#endif
-#ifndef HAS_LANG_SELECT_SCREEN
-  #define HAS_LANG_SELECT_SCREEN          1
-#endif
-#ifndef HAS_BAK_VIEW_IN_FLASH
-  #define HAS_BAK_VIEW_IN_FLASH           1
-#endif
-#ifndef HAS_GCODE_DEFAULT_VIEW_IN_FLASH
-  #define HAS_GCODE_DEFAULT_VIEW_IN_FLASH 1
-#endif
-#ifndef HAS_LOGO_IN_FLASH
-  #define HAS_LOGO_IN_FLASH 1
-#endif
-#ifndef SPI_FLASH_SIZE
-  #define SPI_FLASH_SIZE                0x1000000 // 16MB
-#endif
-
-#define PIC_MAX_CN           100    // Maximum number of pictures
-#define PIC_NAME_MAX_LEN      50    // Picture name maximum length
-
-#define LOGO_MAX_SIZE_TFT35             (300*1024)
-#define LOGO_MAX_SIZE_TFT32             (150*1024)
-#define TITLELOGO_MAX_SIZE              (150*1024) // Little logo maximum
-#define DEFAULT_VIEW_MAX_SIZE           (200*200*2)
-#define FLASH_VIEW_MAX_SIZE             (200*200*2)
-
-#define PER_PIC_MAX_SPACE_TFT35         (9*1024)
-#define PER_PIC_MAX_SPACE_TFT32         (16*1024)
-#define PER_FONT_MAX_SPACE              (16*1024)
-
-#if SPI_FLASH_SIZE == 0x200000
-  //pic
-  //Robin_pro pic addr
-  #define PIC_NAME_ADDR                 0x001000      // Pic information addr
-  #define PIC_SIZE_ADDR                 0x001800      // Pic size information addr
-  #define PIC_COUNTER_ADDR              0x002000      // Pic total number
-  #define PER_PIC_SAVE_ADDR             0x000000      // Storage address of each picture
-  #define PIC_LOGO_ADDR                 0x000000      // Logo addr
-  #define PIC_DATA_ADDR                 0x003000      //
-
-  // TFT35
-  #define DEFAULT_VIEW_ADDR_TFT35       0x1EA070
-  #define BAK_VIEW_ADDR_TFT35           (DEFAULT_VIEW_ADDR_TFT35+90*1024)
-  #define PIC_ICON_LOGO_ADDR_TFT35      (BAK_VIEW_ADDR_TFT35+80*1024)
-  #define PIC_DATA_ADDR_TFT35           0x003000 // (PIC_ICON_LOGO_ADDR_TFT35+350*1024) //0xC5800
-
-  #define PIC_DATA_ADDR_TFT32           0x00F000
-  #define PIC_ICON_LOGO_ADDR_TFT32      0x5D8000
-  #define PIC_OTHER_SIZE_ADDR_TFT32     0x5EE000
-
-  // font
-  #define FONTINFOADDR                  0x150000 // 6M -- font addr
-  #define UNIGBK_FLASH_ADDR            (FONTINFOADDR+4096) // 4*1024
-
-#else
-  //pic
-  //Robin_pro pic addr
-  #define PIC_NAME_ADDR                 0x003000      // Pic information addr
-  #define PIC_SIZE_ADDR                 0x007000      // Pic size information addr
-  #define PIC_COUNTER_ADDR              0x008000      // Pic total number
-  #define PIC_LOGO_ADDR                 0x009000      // Logo addr
-
-  // TFT35
-  #define DEFAULT_VIEW_ADDR_TFT35       0xC5800
-  #define BAK_VIEW_ADDR_TFT35           (DEFAULT_VIEW_ADDR_TFT35+90*1024)
-  #define PIC_ICON_LOGO_ADDR_TFT35      (BAK_VIEW_ADDR_TFT35+80*1024)
-  #define PIC_DATA_ADDR_TFT35           (PIC_ICON_LOGO_ADDR_TFT35+350*1024) //0xC5800
-
-  // TFT32
-  #define PIC_DATA_ADDR_TFT32           0x02F000
-  #define PIC_ICON_LOGO_ADDR_TFT32      0x5D8000
-  #define PIC_OTHER_SIZE_ADDR_TFT32     0x5EE000
-
-  // font
-  #define FONTINFOADDR                  0x600000 // 6M -- font addr
-  #define UNIGBK_FLASH_ADDR            (FONTINFOADDR+4096) // 4*1024
-  #define GBK_FLASH_ADDR               (UNIGBK_FLASH_ADDR+180224) // 176*1024
-
-#endif
-
-// Flash flag
-#define REFLSHE_FLGA_ADD                (0x800000-32)
-
-// SD card information first addr
-#define VAR_INF_ADDR                    0x000000
-#define FLASH_INF_VALID_FLAG            0x20201118
-
-//Store some gcode commands, such as auto leveling commands
-#define GCODE_COMMAND_ADDR              VAR_INF_ADDR + 3*1024
-#define AUTO_LEVELING_COMMAND_ADDR      GCODE_COMMAND_ADDR
-#define OTHERS_COMMAND_ADDR_1           AUTO_LEVELING_COMMAND_ADDR + 100
-#define OTHERS_COMMAND_ADDR_2           OTHERS_COMMAND_ADDR_1 + 100
-#define OTHERS_COMMAND_ADDR_3           OTHERS_COMMAND_ADDR_2 + 100
-#define OTHERS_COMMAND_ADDR_4           OTHERS_COMMAND_ADDR_3 + 100
-
-#ifdef __cplusplus
-  extern "C" { /* C-declarations for C++ */
-#endif
-
-union union32 {
-  uint8_t bytes[4];
-  uint32_t dwords;
-};
-
-// pic information
-struct pic_msg {
-  uint8_t name[PIC_NAME_MAX_LEN];
-  union union32 size;
-};
-
-typedef struct pic_msg PIC_MSG;
-
-#define BMP_WRITE_BUF_LEN 512
-
-#define PICINFOADDR   0x1000
-
-#define PIC_SIZE_xM   6
-#define FONT_SIZE_xM  2
-
-void Pic_Read(uint8_t *Pname, uint8_t *P_Rbuff);
-void Pic_Logo_Read(uint8_t *LogoName,uint8_t *Logo_Rbuff,uint32_t LogoReadsize);
-void lv_pic_test(uint8_t *P_Rbuff, uint32_t addr, uint32_t size);
-uint32_t lv_get_pic_addr(uint8_t *Pname);
-void get_spi_flash_data(const char *rec_buf, int offset, int size);
-void spi_flash_read_test();
-void default_view_Read(uint8_t *default_view_Rbuff, uint32_t default_view_Readsize);
-void flash_view_Read(uint8_t *flash_view_Rbuff, uint32_t flash_view_Readsize);
-
-#ifdef __cplusplus
-  } /* C-declarations for C++ */
-#endif

commit c2b72c0e73a59c7b0915253c775eb6253032f0b0
Author: Scott Lahteine <thinkyhead@users.noreply.github.com>
Date:   Fri Apr 2 14:22:43 2021 -0500

    Remove extraneous 'extern' hints (#21516)

diff --git a/Marlin/src/lcd/extui/lib/mks_ui/pic_manager.h b/Marlin/src/lcd/extui/lib/mks_ui/pic_manager.h
index 19c93468e4..e9960fc73a 100644
--- a/Marlin/src/lcd/extui/lib/mks_ui/pic_manager.h
+++ b/Marlin/src/lcd/extui/lib/mks_ui/pic_manager.h
@@ -147,22 +147,22 @@ struct pic_msg {
 
 typedef struct pic_msg PIC_MSG;
 
 #define BMP_WRITE_BUF_LEN 512
 
 #define PICINFOADDR   0x1000
 
 #define PIC_SIZE_xM   6
 #define FONT_SIZE_xM  2
 
-extern void Pic_Read(uint8_t *Pname, uint8_t *P_Rbuff);
-extern void Pic_Logo_Read(uint8_t *LogoName,uint8_t *Logo_Rbuff,uint32_t LogoReadsize);
-extern void lv_pic_test(uint8_t *P_Rbuff, uint32_t addr, uint32_t size);
-extern uint32_t lv_get_pic_addr(uint8_t *Pname);
-extern void get_spi_flash_data(const char *rec_buf, int offset, int size);
-extern void spi_flash_read_test();
-extern void default_view_Read(uint8_t *default_view_Rbuff, uint32_t default_view_Readsize);
-extern void flash_view_Read(uint8_t *flash_view_Rbuff, uint32_t flash_view_Readsize);
+void Pic_Read(uint8_t *Pname, uint8_t *P_Rbuff);
+void Pic_Logo_Read(uint8_t *LogoName,uint8_t *Logo_Rbuff,uint32_t LogoReadsize);
+void lv_pic_test(uint8_t *P_Rbuff, uint32_t addr, uint32_t size);
+uint32_t lv_get_pic_addr(uint8_t *Pname);
+void get_spi_flash_data(const char *rec_buf, int offset, int size);
+void spi_flash_read_test();
+void default_view_Read(uint8_t *default_view_Rbuff, uint32_t default_view_Readsize);
+void flash_view_Read(uint8_t *flash_view_Rbuff, uint32_t flash_view_Readsize);
 
 #ifdef __cplusplus
   } /* C-declarations for C++ */
 #endif

commit c76008bd6a7bc0f88fec7fa58f11cfec88ab366f
Author: Sola <42537573+solawc@users.noreply.github.com>
Date:   Sun Feb 28 07:35:32 2021 +0800

    MKS H43 controller (#20609)

diff --git a/Marlin/src/lcd/extui/lib/mks_ui/pic_manager.h b/Marlin/src/lcd/extui/lib/mks_ui/pic_manager.h
index 0abfd7834a..19c93468e4 100644
--- a/Marlin/src/lcd/extui/lib/mks_ui/pic_manager.h
+++ b/Marlin/src/lcd/extui/lib/mks_ui/pic_manager.h
@@ -109,21 +109,21 @@
   #define PIC_OTHER_SIZE_ADDR_TFT32     0x5EE000
 
   // font
   #define FONTINFOADDR                  0x600000 // 6M -- font addr
   #define UNIGBK_FLASH_ADDR            (FONTINFOADDR+4096) // 4*1024
   #define GBK_FLASH_ADDR               (UNIGBK_FLASH_ADDR+180224) // 176*1024
 
 #endif
 
 // Flash flag
-#define REFLSHE_FLGA_ADD                (0X800000-32)
+#define REFLSHE_FLGA_ADD                (0x800000-32)
 
 // SD card information first addr
 #define VAR_INF_ADDR                    0x000000
 #define FLASH_INF_VALID_FLAG            0x20201118
 
 //Store some gcode commands, such as auto leveling commands
 #define GCODE_COMMAND_ADDR              VAR_INF_ADDR + 3*1024
 #define AUTO_LEVELING_COMMAND_ADDR      GCODE_COMMAND_ADDR
 #define OTHERS_COMMAND_ADDR_1           AUTO_LEVELING_COMMAND_ADDR + 100
 #define OTHERS_COMMAND_ADDR_2           OTHERS_COMMAND_ADDR_1 + 100

commit 35c1b330ec62e698a455176330e7d75600af461d
Author: MKS-Sean <56996910+MKS-Sean@users.noreply.github.com>
Date:   Thu Jan 14 12:41:09 2021 +0800

    MKS WiFi for TFT_LVGL_UI (#20191)

diff --git a/Marlin/src/lcd/extui/lib/mks_ui/pic_manager.h b/Marlin/src/lcd/extui/lib/mks_ui/pic_manager.h
index b856916b95..0abfd7834a 100644
--- a/Marlin/src/lcd/extui/lib/mks_ui/pic_manager.h
+++ b/Marlin/src/lcd/extui/lib/mks_ui/pic_manager.h
@@ -113,21 +113,21 @@
   #define UNIGBK_FLASH_ADDR            (FONTINFOADDR+4096) // 4*1024
   #define GBK_FLASH_ADDR               (UNIGBK_FLASH_ADDR+180224) // 176*1024
 
 #endif
 
 // Flash flag
 #define REFLSHE_FLGA_ADD                (0X800000-32)
 
 // SD card information first addr
 #define VAR_INF_ADDR                    0x000000
-#define FLASH_INF_VALID_FLAG            0x20200831
+#define FLASH_INF_VALID_FLAG            0x20201118
 
 //Store some gcode commands, such as auto leveling commands
 #define GCODE_COMMAND_ADDR              VAR_INF_ADDR + 3*1024
 #define AUTO_LEVELING_COMMAND_ADDR      GCODE_COMMAND_ADDR
 #define OTHERS_COMMAND_ADDR_1           AUTO_LEVELING_COMMAND_ADDR + 100
 #define OTHERS_COMMAND_ADDR_2           OTHERS_COMMAND_ADDR_1 + 100
 #define OTHERS_COMMAND_ADDR_3           OTHERS_COMMAND_ADDR_2 + 100
 #define OTHERS_COMMAND_ADDR_4           OTHERS_COMMAND_ADDR_3 + 100
 
 #ifdef __cplusplus

commit 44c57ab05a8f909b85f51e08c90316b41e50c455
Author: Scott Lahteine <thinkyhead@users.noreply.github.com>
Date:   Tue Jan 12 21:02:35 2021 -0600

    MKS UI prelim. cleanup (#20763)

diff --git a/Marlin/src/lcd/extui/lib/mks_ui/pic_manager.h b/Marlin/src/lcd/extui/lib/mks_ui/pic_manager.h
index ea75915df3..b856916b95 100644
--- a/Marlin/src/lcd/extui/lib/mks_ui/pic_manager.h
+++ b/Marlin/src/lcd/extui/lib/mks_ui/pic_manager.h
@@ -88,23 +88,21 @@
   // font
   #define FONTINFOADDR                  0x150000 // 6M -- font addr
   #define UNIGBK_FLASH_ADDR            (FONTINFOADDR+4096) // 4*1024
 
 #else
   //pic
   //Robin_pro pic addr
   #define PIC_NAME_ADDR                 0x003000      // Pic information addr
   #define PIC_SIZE_ADDR                 0x007000      // Pic size information addr
   #define PIC_COUNTER_ADDR              0x008000      // Pic total number
-  //#define PER_PIC_SAVE_ADDR           0x009000      // Storage address of each picture
   #define PIC_LOGO_ADDR                 0x009000      // Logo addr
-  //#define PIC_DATA_ADDR               0x02F000      //
 
   // TFT35
   #define DEFAULT_VIEW_ADDR_TFT35       0xC5800
   #define BAK_VIEW_ADDR_TFT35           (DEFAULT_VIEW_ADDR_TFT35+90*1024)
   #define PIC_ICON_LOGO_ADDR_TFT35      (BAK_VIEW_ADDR_TFT35+80*1024)
   #define PIC_DATA_ADDR_TFT35           (PIC_ICON_LOGO_ADDR_TFT35+350*1024) //0xC5800
 
   // TFT32
   #define PIC_DATA_ADDR_TFT32           0x02F000
   #define PIC_ICON_LOGO_ADDR_TFT32      0x5D8000

commit 6831341ab483a49d7daad4c704bb684d3cbbf075
Author: Scott Lahteine <github@thinkyhead.com>
Date:   Fri Oct 9 16:50:17 2020 -0500

    Batch appercase hex values

diff --git a/Marlin/src/lcd/extui/lib/mks_ui/pic_manager.h b/Marlin/src/lcd/extui/lib/mks_ui/pic_manager.h
index 5d5227c2a4..ea75915df3 100644
--- a/Marlin/src/lcd/extui/lib/mks_ui/pic_manager.h
+++ b/Marlin/src/lcd/extui/lib/mks_ui/pic_manager.h
@@ -69,21 +69,21 @@
   //pic
   //Robin_pro pic addr
   #define PIC_NAME_ADDR                 0x001000      // Pic information addr
   #define PIC_SIZE_ADDR                 0x001800      // Pic size information addr
   #define PIC_COUNTER_ADDR              0x002000      // Pic total number
   #define PER_PIC_SAVE_ADDR             0x000000      // Storage address of each picture
   #define PIC_LOGO_ADDR                 0x000000      // Logo addr
   #define PIC_DATA_ADDR                 0x003000      //
 
   // TFT35
-  #define DEFAULT_VIEW_ADDR_TFT35       0x1ea070
+  #define DEFAULT_VIEW_ADDR_TFT35       0x1EA070
   #define BAK_VIEW_ADDR_TFT35           (DEFAULT_VIEW_ADDR_TFT35+90*1024)
   #define PIC_ICON_LOGO_ADDR_TFT35      (BAK_VIEW_ADDR_TFT35+80*1024)
   #define PIC_DATA_ADDR_TFT35           0x003000 // (PIC_ICON_LOGO_ADDR_TFT35+350*1024) //0xC5800
 
   #define PIC_DATA_ADDR_TFT32           0x00F000
   #define PIC_ICON_LOGO_ADDR_TFT32      0x5D8000
   #define PIC_OTHER_SIZE_ADDR_TFT32     0x5EE000
 
   // font
   #define FONTINFOADDR                  0x150000 // 6M -- font addr

commit 6572d7131f61811d3507d0dfb1b76a38c770e95f
Author: Victor Oliveira <rhapsodyv@gmail.com>
Date:   Sun Sep 27 23:22:08 2020 -0300

    LVGL followup fixing "C", etc. (#19517)

diff --git a/Marlin/src/lcd/extui/lib/mks_ui/pic_manager.h b/Marlin/src/lcd/extui/lib/mks_ui/pic_manager.h
index b1bd88a60d..5d5227c2a4 100644
--- a/Marlin/src/lcd/extui/lib/mks_ui/pic_manager.h
+++ b/Marlin/src/lcd/extui/lib/mks_ui/pic_manager.h
@@ -14,21 +14,21 @@
  * but WITHOUT ANY WARRANTY; without even the implied warranty of
  * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
  * GNU General Public License for more details.
  *
  * You should have received a copy of the GNU General Public License
  * along with this program.  If not, see <https://www.gnu.org/licenses/>.
  *
  */
 #pragma once
 
-#include "../../../../inc/MarlinConfigPre.h"
+#include "../../../../inc/MarlinConfig.h"
 
 #include "../../../../libs/W25Qxx.h"
 
 #include <lvgl.h>
 
 #include <stdint.h>
 #include <string.h>
 
 #ifndef HAS_SPI_FLASH_FONT
   #define HAS_SPI_FLASH_FONT              1 // Disabled until fix the font load code

commit d8ed74904559aa8bdccc8b68acbccfbf1bf779d3
Author: makerbase <4164049@qq.com>
Date:   Mon Sep 21 09:55:02 2020 +0800

    Add MKS Robin E3P, improve LVGL UI (#19442)

diff --git a/Marlin/src/lcd/extui/lib/mks_ui/pic_manager.h b/Marlin/src/lcd/extui/lib/mks_ui/pic_manager.h
index 24b2945d73..b1bd88a60d 100644
--- a/Marlin/src/lcd/extui/lib/mks_ui/pic_manager.h
+++ b/Marlin/src/lcd/extui/lib/mks_ui/pic_manager.h
@@ -14,21 +14,21 @@
  * but WITHOUT ANY WARRANTY; without even the implied warranty of
  * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
  * GNU General Public License for more details.
  *
  * You should have received a copy of the GNU General Public License
  * along with this program.  If not, see <https://www.gnu.org/licenses/>.
  *
  */
 #pragma once
 
-#include "../../../../inc/MarlinConfig.h"
+#include "../../../../inc/MarlinConfigPre.h"
 
 #include "../../../../libs/W25Qxx.h"
 
 #include <lvgl.h>
 
 #include <stdint.h>
 #include <string.h>
 
 #ifndef HAS_SPI_FLASH_FONT
   #define HAS_SPI_FLASH_FONT              1 // Disabled until fix the font load code
@@ -112,23 +112,32 @@
 
   // font
   #define FONTINFOADDR                  0x600000 // 6M -- font addr
   #define UNIGBK_FLASH_ADDR            (FONTINFOADDR+4096) // 4*1024
   #define GBK_FLASH_ADDR               (UNIGBK_FLASH_ADDR+180224) // 176*1024
 
 #endif
 
 // Flash flag
 #define REFLSHE_FLGA_ADD                (0X800000-32)
-#define FLASH_INF_VALID_FLAG            0xAA558761
+
 // SD card information first addr
 #define VAR_INF_ADDR                    0x000000
+#define FLASH_INF_VALID_FLAG            0x20200831
+
+//Store some gcode commands, such as auto leveling commands
+#define GCODE_COMMAND_ADDR              VAR_INF_ADDR + 3*1024
+#define AUTO_LEVELING_COMMAND_ADDR      GCODE_COMMAND_ADDR
+#define OTHERS_COMMAND_ADDR_1           AUTO_LEVELING_COMMAND_ADDR + 100
+#define OTHERS_COMMAND_ADDR_2           OTHERS_COMMAND_ADDR_1 + 100
+#define OTHERS_COMMAND_ADDR_3           OTHERS_COMMAND_ADDR_2 + 100
+#define OTHERS_COMMAND_ADDR_4           OTHERS_COMMAND_ADDR_3 + 100
 
 #ifdef __cplusplus
   extern "C" { /* C-declarations for C++ */
 #endif
 
 union union32 {
   uint8_t bytes[4];
   uint32_t dwords;
 };
 

commit 60ab7a1ddbda1b1a6d20cbeb5c574ce775f57a4b
Author: Scott Lahteine <thinkyhead@users.noreply.github.com>
Date:   Sun Sep 20 19:07:59 2020 -0500

    Cleanup before MKS changes

diff --git a/Marlin/src/lcd/extui/lib/mks_ui/pic_manager.h b/Marlin/src/lcd/extui/lib/mks_ui/pic_manager.h
index f1086fd1b9..24b2945d73 100644
--- a/Marlin/src/lcd/extui/lib/mks_ui/pic_manager.h
+++ b/Marlin/src/lcd/extui/lib/mks_ui/pic_manager.h
@@ -117,21 +117,21 @@
 
 #endif
 
 // Flash flag
 #define REFLSHE_FLGA_ADD                (0X800000-32)
 #define FLASH_INF_VALID_FLAG            0xAA558761
 // SD card information first addr
 #define VAR_INF_ADDR                    0x000000
 
 #ifdef __cplusplus
-extern "C" { /* C-declarations for C++ */
+  extern "C" { /* C-declarations for C++ */
 #endif
 
 union union32 {
   uint8_t bytes[4];
   uint32_t dwords;
 };
 
 // pic information
 struct pic_msg {
   uint8_t name[PIC_NAME_MAX_LEN];
@@ -150,12 +150,12 @@ typedef struct pic_msg PIC_MSG;
 extern void Pic_Read(uint8_t *Pname, uint8_t *P_Rbuff);
 extern void Pic_Logo_Read(uint8_t *LogoName,uint8_t *Logo_Rbuff,uint32_t LogoReadsize);
 extern void lv_pic_test(uint8_t *P_Rbuff, uint32_t addr, uint32_t size);
 extern uint32_t lv_get_pic_addr(uint8_t *Pname);
 extern void get_spi_flash_data(const char *rec_buf, int offset, int size);
 extern void spi_flash_read_test();
 extern void default_view_Read(uint8_t *default_view_Rbuff, uint32_t default_view_Readsize);
 extern void flash_view_Read(uint8_t *flash_view_Rbuff, uint32_t flash_view_Readsize);
 
 #ifdef __cplusplus
-} /* C-declarations for C++ */
+  } /* C-declarations for C++ */
 #endif

commit 6759aff22036a9fd4ae9f9398cd6e142a31ebd3b
Author: Scott Lahteine <thinkyhead@users.noreply.github.com>
Date:   Thu Sep 10 17:34:41 2020 -0500

    Clean up W25QXXFlash class

diff --git a/Marlin/src/lcd/extui/lib/mks_ui/pic_manager.h b/Marlin/src/lcd/extui/lib/mks_ui/pic_manager.h
index 4d9d08a9b4..f1086fd1b9 100644
--- a/Marlin/src/lcd/extui/lib/mks_ui/pic_manager.h
+++ b/Marlin/src/lcd/extui/lib/mks_ui/pic_manager.h
@@ -149,15 +149,13 @@ typedef struct pic_msg PIC_MSG;
 
 extern void Pic_Read(uint8_t *Pname, uint8_t *P_Rbuff);
 extern void Pic_Logo_Read(uint8_t *LogoName,uint8_t *Logo_Rbuff,uint32_t LogoReadsize);
 extern void lv_pic_test(uint8_t *P_Rbuff, uint32_t addr, uint32_t size);
 extern uint32_t lv_get_pic_addr(uint8_t *Pname);
 extern void get_spi_flash_data(const char *rec_buf, int offset, int size);
 extern void spi_flash_read_test();
 extern void default_view_Read(uint8_t *default_view_Rbuff, uint32_t default_view_Readsize);
 extern void flash_view_Read(uint8_t *flash_view_Rbuff, uint32_t flash_view_Readsize);
 
-extern W25QXXFlash W25QXX;
-
 #ifdef __cplusplus
 } /* C-declarations for C++ */
 #endif

commit 0a1b8659871f681464f24c40b16aa64cd2f7ca8e
Author: Victor Oliveira <rhapsodyv@gmail.com>
Date:   Sat Aug 8 21:24:31 2020 -0300

    W25QXX SPI Flash support (#18897)
    
    Co-authored-by: Scott Lahteine <thinkyhead@users.noreply.github.com>

diff --git a/Marlin/src/lcd/extui/lib/mks_ui/pic_manager.h b/Marlin/src/lcd/extui/lib/mks_ui/pic_manager.h
index 354e11a540..4d9d08a9b4 100644
--- a/Marlin/src/lcd/extui/lib/mks_ui/pic_manager.h
+++ b/Marlin/src/lcd/extui/lib/mks_ui/pic_manager.h
@@ -16,20 +16,22 @@
  * GNU General Public License for more details.
  *
  * You should have received a copy of the GNU General Public License
  * along with this program.  If not, see <https://www.gnu.org/licenses/>.
  *
  */
 #pragma once
 
 #include "../../../../inc/MarlinConfig.h"
 
+#include "../../../../libs/W25Qxx.h"
+
 #include <lvgl.h>
 
 #include <stdint.h>
 #include <string.h>
 
 #ifndef HAS_SPI_FLASH_FONT
   #define HAS_SPI_FLASH_FONT              1 // Disabled until fix the font load code
 #endif
 #ifndef HAS_GCODE_PREVIEW
   #define HAS_GCODE_PREVIEW               1
@@ -147,13 +149,15 @@ typedef struct pic_msg PIC_MSG;
 
 extern void Pic_Read(uint8_t *Pname, uint8_t *P_Rbuff);
 extern void Pic_Logo_Read(uint8_t *LogoName,uint8_t *Logo_Rbuff,uint32_t LogoReadsize);
 extern void lv_pic_test(uint8_t *P_Rbuff, uint32_t addr, uint32_t size);
 extern uint32_t lv_get_pic_addr(uint8_t *Pname);
 extern void get_spi_flash_data(const char *rec_buf, int offset, int size);
 extern void spi_flash_read_test();
 extern void default_view_Read(uint8_t *default_view_Rbuff, uint32_t default_view_Readsize);
 extern void flash_view_Read(uint8_t *flash_view_Rbuff, uint32_t flash_view_Readsize);
 
+extern W25QXXFlash W25QXX;
+
 #ifdef __cplusplus
 } /* C-declarations for C++ */
 #endif

commit 5e08efb0fc0e5991f70c19f55112025145128b59
Author: Victor Oliveira <rhapsodyv@gmail.com>
Date:   Fri Aug 7 03:53:43 2020 -0300

    Fix LVGL "C" brace (#18942)

diff --git a/Marlin/src/lcd/extui/lib/mks_ui/pic_manager.h b/Marlin/src/lcd/extui/lib/mks_ui/pic_manager.h
index c71bdbd737..354e11a540 100644
--- a/Marlin/src/lcd/extui/lib/mks_ui/pic_manager.h
+++ b/Marlin/src/lcd/extui/lib/mks_ui/pic_manager.h
@@ -14,24 +14,20 @@
  * but WITHOUT ANY WARRANTY; without even the implied warranty of
  * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
  * GNU General Public License for more details.
  *
  * You should have received a copy of the GNU General Public License
  * along with this program.  If not, see <https://www.gnu.org/licenses/>.
  *
  */
 #pragma once
 
-#ifdef __cplusplus
-extern "C" { /* C-declarations for C++ */
-#endif
-
 #include "../../../../inc/MarlinConfig.h"
 
 #include <lvgl.h>
 
 #include <stdint.h>
 #include <string.h>
 
 #ifndef HAS_SPI_FLASH_FONT
   #define HAS_SPI_FLASH_FONT              1 // Disabled until fix the font load code
 #endif
@@ -118,20 +114,24 @@ extern "C" { /* C-declarations for C++ */
   #define GBK_FLASH_ADDR               (UNIGBK_FLASH_ADDR+180224) // 176*1024
 
 #endif
 
 // Flash flag
 #define REFLSHE_FLGA_ADD                (0X800000-32)
 #define FLASH_INF_VALID_FLAG            0xAA558761
 // SD card information first addr
 #define VAR_INF_ADDR                    0x000000
 
+#ifdef __cplusplus
+extern "C" { /* C-declarations for C++ */
+#endif
+
 union union32 {
   uint8_t bytes[4];
   uint32_t dwords;
 };
 
 // pic information
 struct pic_msg {
   uint8_t name[PIC_NAME_MAX_LEN];
   union union32 size;
 };

commit 35e11e5f8bf873a399e722d048669e72cc492a29
Author: Victor Oliveira <rhapsodyv@gmail.com>
Date:   Thu Aug 6 22:52:01 2020 -0300

    Followup fixes to LVGL for Chitu (#18940)

diff --git a/Marlin/src/lcd/extui/lib/mks_ui/pic_manager.h b/Marlin/src/lcd/extui/lib/mks_ui/pic_manager.h
index d97b54a658..c71bdbd737 100644
--- a/Marlin/src/lcd/extui/lib/mks_ui/pic_manager.h
+++ b/Marlin/src/lcd/extui/lib/mks_ui/pic_manager.h
@@ -18,21 +18,21 @@
  * You should have received a copy of the GNU General Public License
  * along with this program.  If not, see <https://www.gnu.org/licenses/>.
  *
  */
 #pragma once
 
 #ifdef __cplusplus
 extern "C" { /* C-declarations for C++ */
 #endif
 
-#include "../../inc/MarlinConfigPre.h"
+#include "../../../../inc/MarlinConfig.h"
 
 #include <lvgl.h>
 
 #include <stdint.h>
 #include <string.h>
 
 #ifndef HAS_SPI_FLASH_FONT
   #define HAS_SPI_FLASH_FONT              1 // Disabled until fix the font load code
 #endif
 #ifndef HAS_GCODE_PREVIEW

commit 04b12dde492b44a2b1e18f2e38b126bc82edcfdf
Author: Victor Oliveira <rhapsodyv@gmail.com>
Date:   Tue Aug 4 06:50:05 2020 -0300

    SPI Flash data compression (#18879)

diff --git a/Marlin/src/lcd/extui/lib/mks_ui/pic_manager.h b/Marlin/src/lcd/extui/lib/mks_ui/pic_manager.h
index 3ef4ee4f86..d97b54a658 100644
--- a/Marlin/src/lcd/extui/lib/mks_ui/pic_manager.h
+++ b/Marlin/src/lcd/extui/lib/mks_ui/pic_manager.h
@@ -56,21 +56,21 @@ extern "C" { /* C-declarations for C++ */
 
 #define PIC_MAX_CN           100    // Maximum number of pictures
 #define PIC_NAME_MAX_LEN      50    // Picture name maximum length
 
 #define LOGO_MAX_SIZE_TFT35             (300*1024)
 #define LOGO_MAX_SIZE_TFT32             (150*1024)
 #define TITLELOGO_MAX_SIZE              (150*1024) // Little logo maximum
 #define DEFAULT_VIEW_MAX_SIZE           (200*200*2)
 #define FLASH_VIEW_MAX_SIZE             (200*200*2)
 
-#define PER_PIC_MAX_SPACE_TFT35         (32*1024)
+#define PER_PIC_MAX_SPACE_TFT35         (9*1024)
 #define PER_PIC_MAX_SPACE_TFT32         (16*1024)
 #define PER_FONT_MAX_SPACE              (16*1024)
 
 #if SPI_FLASH_SIZE == 0x200000
   //pic
   //Robin_pro pic addr
   #define PIC_NAME_ADDR                 0x001000      // Pic information addr
   #define PIC_SIZE_ADDR                 0x001800      // Pic size information addr
   #define PIC_COUNTER_ADDR              0x002000      // Pic total number
   #define PER_PIC_SAVE_ADDR             0x000000      // Storage address of each picture
@@ -81,21 +81,21 @@ extern "C" { /* C-declarations for C++ */
   #define DEFAULT_VIEW_ADDR_TFT35       0x1ea070
   #define BAK_VIEW_ADDR_TFT35           (DEFAULT_VIEW_ADDR_TFT35+90*1024)
   #define PIC_ICON_LOGO_ADDR_TFT35      (BAK_VIEW_ADDR_TFT35+80*1024)
   #define PIC_DATA_ADDR_TFT35           0x003000 // (PIC_ICON_LOGO_ADDR_TFT35+350*1024) //0xC5800
 
   #define PIC_DATA_ADDR_TFT32           0x00F000
   #define PIC_ICON_LOGO_ADDR_TFT32      0x5D8000
   #define PIC_OTHER_SIZE_ADDR_TFT32     0x5EE000
 
   // font
-  #define FONTINFOADDR                  0x183000 // 6M -- font addr
+  #define FONTINFOADDR                  0x150000 // 6M -- font addr
   #define UNIGBK_FLASH_ADDR            (FONTINFOADDR+4096) // 4*1024
 
 #else
   //pic
   //Robin_pro pic addr
   #define PIC_NAME_ADDR                 0x003000      // Pic information addr
   #define PIC_SIZE_ADDR                 0x007000      // Pic size information addr
   #define PIC_COUNTER_ADDR              0x008000      // Pic total number
   //#define PER_PIC_SAVE_ADDR           0x009000      // Storage address of each picture
   #define PIC_LOGO_ADDR                 0x009000      // Logo addr

commit 3eef000e2a7623d0d1d1f56fbf3109023f5d74c2
Author: Victor Oliveira <rhapsodyv@gmail.com>
Date:   Sun Jul 26 01:08:30 2020 -0300

    Fix MKS Robin Nano V2 build / upload (#18784)

diff --git a/Marlin/src/lcd/extui/lib/mks_ui/pic_manager.h b/Marlin/src/lcd/extui/lib/mks_ui/pic_manager.h
index 663a88d8db..3ef4ee4f86 100644
--- a/Marlin/src/lcd/extui/lib/mks_ui/pic_manager.h
+++ b/Marlin/src/lcd/extui/lib/mks_ui/pic_manager.h
@@ -113,40 +113,41 @@ extern "C" { /* C-declarations for C++ */
   #define PIC_OTHER_SIZE_ADDR_TFT32     0x5EE000
 
   // font
   #define FONTINFOADDR                  0x600000 // 6M -- font addr
   #define UNIGBK_FLASH_ADDR            (FONTINFOADDR+4096) // 4*1024
   #define GBK_FLASH_ADDR               (UNIGBK_FLASH_ADDR+180224) // 176*1024
 
 #endif
 
 // Flash flag
+#define REFLSHE_FLGA_ADD                (0X800000-32)
 #define FLASH_INF_VALID_FLAG            0xAA558761
 // SD card information first addr
 #define VAR_INF_ADDR                    0x000000
 
 union union32 {
   uint8_t bytes[4];
   uint32_t dwords;
 };
 
 // pic information
 struct pic_msg {
   uint8_t name[PIC_NAME_MAX_LEN];
   union union32 size;
 };
 
 typedef struct pic_msg PIC_MSG;
 
 #define BMP_WRITE_BUF_LEN 512
 
-#define PICINFOADDR   0
+#define PICINFOADDR   0x1000
 
 #define PIC_SIZE_xM   6
 #define FONT_SIZE_xM  2
 
 extern void Pic_Read(uint8_t *Pname, uint8_t *P_Rbuff);
 extern void Pic_Logo_Read(uint8_t *LogoName,uint8_t *Logo_Rbuff,uint32_t LogoReadsize);
 extern void lv_pic_test(uint8_t *P_Rbuff, uint32_t addr, uint32_t size);
 extern uint32_t lv_get_pic_addr(uint8_t *Pname);
 extern void get_spi_flash_data(const char *rec_buf, int offset, int size);
 extern void spi_flash_read_test();

commit d20d4591321aa467c062f0050355d2aca84e03ad
Author: MKS-Sean <56996910+MKS-Sean@users.noreply.github.com>
Date:   Sat Jul 25 13:52:07 2020 +0800

    Robin nano V2, TFT LVGL UI parameters, and more (#18500)

diff --git a/Marlin/src/lcd/extui/lib/mks_ui/pic_manager.h b/Marlin/src/lcd/extui/lib/mks_ui/pic_manager.h
index c0130d0e7e..663a88d8db 100644
--- a/Marlin/src/lcd/extui/lib/mks_ui/pic_manager.h
+++ b/Marlin/src/lcd/extui/lib/mks_ui/pic_manager.h
@@ -18,103 +18,111 @@
  * You should have received a copy of the GNU General Public License
  * along with this program.  If not, see <https://www.gnu.org/licenses/>.
  *
  */
 #pragma once
 
 #ifdef __cplusplus
 extern "C" { /* C-declarations for C++ */
 #endif
 
+#include "../../inc/MarlinConfigPre.h"
+
+#include <lvgl.h>
+
 #include <stdint.h>
 #include <string.h>
-#include "lvgl.h"
-
-#include "../../inc/MarlinConfigPre.h"
 
 #ifndef HAS_SPI_FLASH_FONT
-  #define HAS_SPI_FLASH_FONT              0 //disabled until fix the font load code
+  #define HAS_SPI_FLASH_FONT              1 // Disabled until fix the font load code
 #endif
 #ifndef HAS_GCODE_PREVIEW
   #define HAS_GCODE_PREVIEW               1
 #endif
 #ifndef HAS_LANG_SELECT_SCREEN
-  #define HAS_LANG_SELECT_SCREEN               0
+  #define HAS_LANG_SELECT_SCREEN          1
 #endif
 #ifndef HAS_BAK_VIEW_IN_FLASH
-  #define HAS_BAK_VIEW_IN_FLASH               1
+  #define HAS_BAK_VIEW_IN_FLASH           1
 #endif
 #ifndef HAS_GCODE_DEFAULT_VIEW_IN_FLASH
-  #define HAS_GCODE_DEFAULT_VIEW_IN_FLASH               1
+  #define HAS_GCODE_DEFAULT_VIEW_IN_FLASH 1
+#endif
+#ifndef HAS_LOGO_IN_FLASH
+  #define HAS_LOGO_IN_FLASH 1
 #endif
 #ifndef SPI_FLASH_SIZE
-  #define SPI_FLASH_SIZE                  0x1000000 // 16MB
+  #define SPI_FLASH_SIZE                0x1000000 // 16MB
 #endif
 
 #define PIC_MAX_CN           100    // Maximum number of pictures
 #define PIC_NAME_MAX_LEN      50    // Picture name maximum length
 
 #define LOGO_MAX_SIZE_TFT35             (300*1024)
 #define LOGO_MAX_SIZE_TFT32             (150*1024)
 #define TITLELOGO_MAX_SIZE              (150*1024) // Little logo maximum
 #define DEFAULT_VIEW_MAX_SIZE           (200*200*2)
 #define FLASH_VIEW_MAX_SIZE             (200*200*2)
 
 #define PER_PIC_MAX_SPACE_TFT35         (32*1024)
 #define PER_PIC_MAX_SPACE_TFT32         (16*1024)
 #define PER_FONT_MAX_SPACE              (16*1024)
 
 #if SPI_FLASH_SIZE == 0x200000
   //pic
   //Robin_pro pic addr
-  #define PIC_NAME_ADDR                   0x001000      // Pic information addr
-  #define PIC_SIZE_ADDR                   0x001800      // Pic size information addr
-  #define PIC_COUNTER_ADDR                0x002000      // Pic total number
-  #define PER_PIC_SAVE_ADDR               0x000000      // Storage address of each picture
-  #define PIC_LOGO_ADDR                   0x000000      // Logo addr
-  #define PIC_DATA_ADDR                   0x003000    //
+  #define PIC_NAME_ADDR                 0x001000      // Pic information addr
+  #define PIC_SIZE_ADDR                 0x001800      // Pic size information addr
+  #define PIC_COUNTER_ADDR              0x002000      // Pic total number
+  #define PER_PIC_SAVE_ADDR             0x000000      // Storage address of each picture
+  #define PIC_LOGO_ADDR                 0x000000      // Logo addr
+  #define PIC_DATA_ADDR                 0x003000      //
 
   // TFT35
-  #define DEFAULT_VIEW_ADDR_TFT35         0x1ea070
-  #define BAK_VIEW_ADDR_TFT35             (DEFAULT_VIEW_ADDR_TFT35+90*1024)
-  #define PIC_ICON_LOGO_ADDR_TFT35        (BAK_VIEW_ADDR_TFT35+80*1024)
-  #define PIC_DATA_ADDR_TFT35             0x003000 // (PIC_ICON_LOGO_ADDR_TFT35+350*1024) //0xC5800
+  #define DEFAULT_VIEW_ADDR_TFT35       0x1ea070
+  #define BAK_VIEW_ADDR_TFT35           (DEFAULT_VIEW_ADDR_TFT35+90*1024)
+  #define PIC_ICON_LOGO_ADDR_TFT35      (BAK_VIEW_ADDR_TFT35+80*1024)
+  #define PIC_DATA_ADDR_TFT35           0x003000 // (PIC_ICON_LOGO_ADDR_TFT35+350*1024) //0xC5800
 
-  #define PIC_DATA_ADDR_TFT32             0x00F000
-  #define PIC_ICON_LOGO_ADDR_TFT32        0x5D8000
-  #define PIC_OTHER_SIZE_ADDR_TFT32       0x5EE000
+  #define PIC_DATA_ADDR_TFT32           0x00F000
+  #define PIC_ICON_LOGO_ADDR_TFT32      0x5D8000
+  #define PIC_OTHER_SIZE_ADDR_TFT32     0x5EE000
+
+  // font
+  #define FONTINFOADDR                  0x183000 // 6M -- font addr
+  #define UNIGBK_FLASH_ADDR            (FONTINFOADDR+4096) // 4*1024
 
 #else
   //pic
   //Robin_pro pic addr
-  #define PIC_NAME_ADDR                   0x003000      // Pic information addr
-  #define PIC_SIZE_ADDR                   0x007000      // Pic size information addr
-  #define PIC_COUNTER_ADDR                0x008000      // Pic total number
-  #define PER_PIC_SAVE_ADDR               0x009000      // Storage address of each picture
-  #define PIC_LOGO_ADDR                   0x00A000      // Logo addr
-  //#define PIC_DATA_ADDR                 0x02F000      //
+  #define PIC_NAME_ADDR                 0x003000      // Pic information addr
+  #define PIC_SIZE_ADDR                 0x007000      // Pic size information addr
+  #define PIC_COUNTER_ADDR              0x008000      // Pic total number
+  //#define PER_PIC_SAVE_ADDR           0x009000      // Storage address of each picture
+  #define PIC_LOGO_ADDR                 0x009000      // Logo addr
+  //#define PIC_DATA_ADDR               0x02F000      //
 
   // TFT35
-  #define DEFAULT_VIEW_ADDR_TFT35         0xC5800
-  #define BAK_VIEW_ADDR_TFT35             (DEFAULT_VIEW_ADDR_TFT35+90*1024)
-  #define PIC_ICON_LOGO_ADDR_TFT35        (BAK_VIEW_ADDR_TFT35+80*1024)
-  #define PIC_DATA_ADDR_TFT35             (PIC_ICON_LOGO_ADDR_TFT35+350*1024) //0xC5800
+  #define DEFAULT_VIEW_ADDR_TFT35       0xC5800
+  #define BAK_VIEW_ADDR_TFT35           (DEFAULT_VIEW_ADDR_TFT35+90*1024)
+  #define PIC_ICON_LOGO_ADDR_TFT35      (BAK_VIEW_ADDR_TFT35+80*1024)
+  #define PIC_DATA_ADDR_TFT35           (PIC_ICON_LOGO_ADDR_TFT35+350*1024) //0xC5800
 
   // TFT32
-  #define PIC_DATA_ADDR_TFT32             0x02F000
-  #define PIC_ICON_LOGO_ADDR_TFT32        0x5D8000
-  #define PIC_OTHER_SIZE_ADDR_TFT32       0x5EE000
+  #define PIC_DATA_ADDR_TFT32           0x02F000
+  #define PIC_ICON_LOGO_ADDR_TFT32      0x5D8000
+  #define PIC_OTHER_SIZE_ADDR_TFT32     0x5EE000
 
   // font
-  #define FONTINFOADDR                    0x600000 // 6M -- font addr
-  #define UNIGBK_FLASH_ADDR              (FONTINFOADDR+4096) // 4*1024
-  #define GBK_FLASH_ADDR                 (UNIGBK_FLASH_ADDR+180224) // 176*1024
+  #define FONTINFOADDR                  0x600000 // 6M -- font addr
+  #define UNIGBK_FLASH_ADDR            (FONTINFOADDR+4096) // 4*1024
+  #define GBK_FLASH_ADDR               (UNIGBK_FLASH_ADDR+180224) // 176*1024
 
 #endif
 
 // Flash flag
 #define FLASH_INF_VALID_FLAG            0xAA558761
 // SD card information first addr
 #define VAR_INF_ADDR                    0x000000
 
 union union32 {
   uint8_t bytes[4];
@@ -130,20 +138,21 @@ struct pic_msg {
 typedef struct pic_msg PIC_MSG;
 
 #define BMP_WRITE_BUF_LEN 512
 
 #define PICINFOADDR   0
 
 #define PIC_SIZE_xM   6
 #define FONT_SIZE_xM  2
 
 extern void Pic_Read(uint8_t *Pname, uint8_t *P_Rbuff);
+extern void Pic_Logo_Read(uint8_t *LogoName,uint8_t *Logo_Rbuff,uint32_t LogoReadsize);
 extern void lv_pic_test(uint8_t *P_Rbuff, uint32_t addr, uint32_t size);
 extern uint32_t lv_get_pic_addr(uint8_t *Pname);
 extern void get_spi_flash_data(const char *rec_buf, int offset, int size);
 extern void spi_flash_read_test();
 extern void default_view_Read(uint8_t *default_view_Rbuff, uint32_t default_view_Readsize);
 extern void flash_view_Read(uint8_t *flash_view_Rbuff, uint32_t flash_view_Readsize);
 
 #ifdef __cplusplus
 } /* C-declarations for C++ */
 #endif

commit 42fbd527f3bcc317ae6851aca5a45bdbf979de55
Author: Diego von Deschwanden <68632259+Diegovd@users.noreply.github.com>
Date:   Thu Jul 23 05:20:14 2020 +0200

    Fix links to secure sites (#18745)

diff --git a/Marlin/src/lcd/extui/lib/mks_ui/pic_manager.h b/Marlin/src/lcd/extui/lib/mks_ui/pic_manager.h
index 4176ee0230..c0130d0e7e 100644
--- a/Marlin/src/lcd/extui/lib/mks_ui/pic_manager.h
+++ b/Marlin/src/lcd/extui/lib/mks_ui/pic_manager.h
@@ -9,21 +9,21 @@
  * it under the terms of the GNU General Public License as published by
  * the Free Software Foundation, either version 3 of the License, or
  * (at your option) any later version.
  *
  * This program is distributed in the hope that it will be useful,
  * but WITHOUT ANY WARRANTY; without even the implied warranty of
  * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
  * GNU General Public License for more details.
  *
  * You should have received a copy of the GNU General Public License
- * along with this program.  If not, see <http://www.gnu.org/licenses/>.
+ * along with this program.  If not, see <https://www.gnu.org/licenses/>.
  *
  */
 #pragma once
 
 #ifdef __cplusplus
 extern "C" { /* C-declarations for C++ */
 #endif
 
 #include <stdint.h>
 #include <string.h>

commit e5bc9d31cc87be5c7ef2bd3cd70c2599f76d2bd7
Author: Victor Oliveira <rhapsodyv@gmail.com>
Date:   Wed Jul 1 03:30:24 2020 -0300

    Add TFT_LVGL_UI support (#18438)

diff --git a/Marlin/src/lcd/extui/lib/mks_ui/pic_manager.h b/Marlin/src/lcd/extui/lib/mks_ui/pic_manager.h
index b307cc8dba..4176ee0230 100644
--- a/Marlin/src/lcd/extui/lib/mks_ui/pic_manager.h
+++ b/Marlin/src/lcd/extui/lib/mks_ui/pic_manager.h
@@ -22,99 +22,128 @@
 #pragma once
 
 #ifdef __cplusplus
 extern "C" { /* C-declarations for C++ */
 #endif
 
 #include <stdint.h>
 #include <string.h>
 #include "lvgl.h"
 
-#if 1
+#include "../../inc/MarlinConfigPre.h"
 
-  #define PIC_MAX_CN           100    // Maximum number of pictures
-  #define PIC_NAME_MAX_LEN      50    // Picture name maximum length
+#ifndef HAS_SPI_FLASH_FONT
+  #define HAS_SPI_FLASH_FONT              0 //disabled until fix the font load code
+#endif
+#ifndef HAS_GCODE_PREVIEW
+  #define HAS_GCODE_PREVIEW               1
+#endif
+#ifndef HAS_LANG_SELECT_SCREEN
+  #define HAS_LANG_SELECT_SCREEN               0
+#endif
+#ifndef HAS_BAK_VIEW_IN_FLASH
+  #define HAS_BAK_VIEW_IN_FLASH               1
+#endif
+#ifndef HAS_GCODE_DEFAULT_VIEW_IN_FLASH
+  #define HAS_GCODE_DEFAULT_VIEW_IN_FLASH               1
+#endif
+#ifndef SPI_FLASH_SIZE
+  #define SPI_FLASH_SIZE                  0x1000000 // 16MB
+#endif
 
-  #define LOGO_MAX_SIZE_TFT35             (300*1024)
-  #define LOGO_MAX_SIZE_TFT32             (150*1024)
-  #define TITLELOGO_MAX_SIZE              (150*1024) // Little logo maximum
-  #define DEFAULT_VIEW_MAX_SIZE           (200*200*2)
-  #define FLASH_VIEW_MAX_SIZE             (200*200*2)
+#define PIC_MAX_CN           100    // Maximum number of pictures
+#define PIC_NAME_MAX_LEN      50    // Picture name maximum length
 
-  #define PER_PIC_MAX_SPACE_TFT35         (32*1024)
-  #define PER_PIC_MAX_SPACE_TFT32         (16*1024)
-  #define PER_FONT_MAX_SPACE              (16*1024)
+#define LOGO_MAX_SIZE_TFT35             (300*1024)
+#define LOGO_MAX_SIZE_TFT32             (150*1024)
+#define TITLELOGO_MAX_SIZE              (150*1024) // Little logo maximum
+#define DEFAULT_VIEW_MAX_SIZE           (200*200*2)
+#define FLASH_VIEW_MAX_SIZE             (200*200*2)
 
+#define PER_PIC_MAX_SPACE_TFT35         (32*1024)
+#define PER_PIC_MAX_SPACE_TFT32         (16*1024)
+#define PER_FONT_MAX_SPACE              (16*1024)
+
+#if SPI_FLASH_SIZE == 0x200000
+  //pic
+  //Robin_pro pic addr
+  #define PIC_NAME_ADDR                   0x001000      // Pic information addr
+  #define PIC_SIZE_ADDR                   0x001800      // Pic size information addr
+  #define PIC_COUNTER_ADDR                0x002000      // Pic total number
+  #define PER_PIC_SAVE_ADDR               0x000000      // Storage address of each picture
+  #define PIC_LOGO_ADDR                   0x000000      // Logo addr
+  #define PIC_DATA_ADDR                   0x003000    //
+
+  // TFT35
+  #define DEFAULT_VIEW_ADDR_TFT35         0x1ea070
+  #define BAK_VIEW_ADDR_TFT35             (DEFAULT_VIEW_ADDR_TFT35+90*1024)
+  #define PIC_ICON_LOGO_ADDR_TFT35        (BAK_VIEW_ADDR_TFT35+80*1024)
+  #define PIC_DATA_ADDR_TFT35             0x003000 // (PIC_ICON_LOGO_ADDR_TFT35+350*1024) //0xC5800
+
+  #define PIC_DATA_ADDR_TFT32             0x00F000
+  #define PIC_ICON_LOGO_ADDR_TFT32        0x5D8000
+  #define PIC_OTHER_SIZE_ADDR_TFT32       0x5EE000
+
+#else
   //pic
   //Robin_pro pic addr
   #define PIC_NAME_ADDR                   0x003000      // Pic information addr
   #define PIC_SIZE_ADDR                   0x007000      // Pic size information addr
   #define PIC_COUNTER_ADDR                0x008000      // Pic total number
   #define PER_PIC_SAVE_ADDR               0x009000      // Storage address of each picture
   #define PIC_LOGO_ADDR                   0x00A000      // Logo addr
-  //#define PIC_DATA_ADDR                   0x02F000    //
+  //#define PIC_DATA_ADDR                 0x02F000      //
 
   // TFT35
-  #define DEFAULT_VIEW_ADDR_TFT35                         0XC5800
-  #define BAK_VIEW_ADDR_TFT35                                             (DEFAULT_VIEW_ADDR_TFT35+90*1024)
-  #define PIC_ICON_LOGO_ADDR_TFT35            (BAK_VIEW_ADDR_TFT35+80*1024)
-  #define PIC_DATA_ADDR_TFT35                                             (PIC_ICON_LOGO_ADDR_TFT35+350*1024)//0XC5800
+  #define DEFAULT_VIEW_ADDR_TFT35         0xC5800
+  #define BAK_VIEW_ADDR_TFT35             (DEFAULT_VIEW_ADDR_TFT35+90*1024)
+  #define PIC_ICON_LOGO_ADDR_TFT35        (BAK_VIEW_ADDR_TFT35+80*1024)
+  #define PIC_DATA_ADDR_TFT35             (PIC_ICON_LOGO_ADDR_TFT35+350*1024) //0xC5800
 
   // TFT32
   #define PIC_DATA_ADDR_TFT32             0x02F000
   #define PIC_ICON_LOGO_ADDR_TFT32        0x5D8000
   #define PIC_OTHER_SIZE_ADDR_TFT32       0x5EE000
 
   // font
   #define FONTINFOADDR                    0x600000 // 6M -- font addr
   #define UNIGBK_FLASH_ADDR              (FONTINFOADDR+4096) // 4*1024
   #define GBK_FLASH_ADDR                 (UNIGBK_FLASH_ADDR+180224) // 176*1024
 
-  // Flash flag
-  #define FLASH_INF_VALID_FLAG            0xAA558761
-  // SD card information first addr
-  #define VAR_INF_ADDR                    0x000000
-
-  union union32 {
-    uint8_t bytes[4];
-    uint32_t dwords;
-  };
-
-  // pic information
-  struct pic_msg {
-    uint8_t name[PIC_NAME_MAX_LEN];
-    union union32 size;
-  };
+#endif
 
-  typedef struct pic_msg PIC_MSG;
+// Flash flag
+#define FLASH_INF_VALID_FLAG            0xAA558761
+// SD card information first addr
+#define VAR_INF_ADDR                    0x000000
 
-  #define BMP_WRITE_BUF_LEN 512
+union union32 {
+  uint8_t bytes[4];
+  uint32_t dwords;
+};
 
-  #define PICINFOADDR   0
+// pic information
+struct pic_msg {
+  uint8_t name[PIC_NAME_MAX_LEN];
+  union union32 size;
+};
 
-  #define PIC_SIZE_xM   6
-  #define FONT_SIZE_xM  2
+typedef struct pic_msg PIC_MSG;
 
-  //extern void PicMsg_Init(void);
-  extern void Pic_Read(uint8_t *Pname, uint8_t *P_Rbuff);
-  //extern void bindBmpFileData(const uint8_t **pBuf, uint8_t *pName);
-  //extern void Pic_Logo_Read(uint8_t *LogoName,uint8_t *Logo_Rbuff,uint32_t LogoReadsize);
-  //extern void default_view_Read(uint8_t *default_view_Rbuff,uint32_t default_view_Readsize);
-  //extern void flash_view_Read(uint8_t *flash_view_Rbuff,uint32_t flash_view_Readsize);
+#define BMP_WRITE_BUF_LEN 512
 
-  //extern void lv_Pic_Read(uint8_t *Pname,uint8_t *P_Rbuff,uint32_t addr,uint32_t size);
-  extern void lv_pic_test(uint8_t *P_Rbuff, uint32_t addr, uint32_t size);
+#define PICINFOADDR   0
 
-#endif
+#define PIC_SIZE_xM   6
+#define FONT_SIZE_xM  2
 
+extern void Pic_Read(uint8_t *Pname, uint8_t *P_Rbuff);
+extern void lv_pic_test(uint8_t *P_Rbuff, uint32_t addr, uint32_t size);
 extern uint32_t lv_get_pic_addr(uint8_t *Pname);
-
 extern void get_spi_flash_data(const char *rec_buf, int offset, int size);
-//extern void SPI_FLASH_BufferRead(uint8_t* pBuffer, uint32_t ReadAddr, uint16_t NumByteToRead);
-
 extern void spi_flash_read_test();
 extern void default_view_Read(uint8_t *default_view_Rbuff, uint32_t default_view_Readsize);
 extern void flash_view_Read(uint8_t *flash_view_Rbuff, uint32_t flash_view_Readsize);
 
 #ifdef __cplusplus
 } /* C-declarations for C++ */
 #endif

commit 642112d3eb7c1af9a52feec8134c85ed3e34891c
Author: makerbase <4164049@qq.com>
Date:   Tue Jun 16 10:05:33 2020 +0800

    Add MKS UI (TFT_LITTLE_VGL_UI) (#18071)

diff --git a/Marlin/src/lcd/extui/lib/mks_ui/pic_manager.h b/Marlin/src/lcd/extui/lib/mks_ui/pic_manager.h
new file mode 100644
index 0000000000..b307cc8dba
--- /dev/null
+++ b/Marlin/src/lcd/extui/lib/mks_ui/pic_manager.h
@@ -0,0 +1,120 @@
+/**
+ * Marlin 3D Printer Firmware
+ * Copyright (c) 2020 MarlinFirmware [https://github.com/MarlinFirmware/Marlin]
+ *
+ * Based on Sprinter and grbl.
+ * Copyright (c) 2011 Camiel Gubbels / Erik van der Zalm
+ *
+ * This program is free software: you can redistribute it and/or modify
+ * it under the terms of the GNU General Public License as published by
+ * the Free Software Foundation, either version 3 of the License, or
+ * (at your option) any later version.
+ *
+ * This program is distributed in the hope that it will be useful,
+ * but WITHOUT ANY WARRANTY; without even the implied warranty of
+ * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
+ * GNU General Public License for more details.
+ *
+ * You should have received a copy of the GNU General Public License
+ * along with this program.  If not, see <http://www.gnu.org/licenses/>.
+ *
+ */
+#pragma once
+
+#ifdef __cplusplus
+extern "C" { /* C-declarations for C++ */
+#endif
+
+#include <stdint.h>
+#include <string.h>
+#include "lvgl.h"
+
+#if 1
+
+  #define PIC_MAX_CN           100    // Maximum number of pictures
+  #define PIC_NAME_MAX_LEN      50    // Picture name maximum length
+
+  #define LOGO_MAX_SIZE_TFT35             (300*1024)
+  #define LOGO_MAX_SIZE_TFT32             (150*1024)
+  #define TITLELOGO_MAX_SIZE              (150*1024) // Little logo maximum
+  #define DEFAULT_VIEW_MAX_SIZE           (200*200*2)
+  #define FLASH_VIEW_MAX_SIZE             (200*200*2)
+
+  #define PER_PIC_MAX_SPACE_TFT35         (32*1024)
+  #define PER_PIC_MAX_SPACE_TFT32         (16*1024)
+  #define PER_FONT_MAX_SPACE              (16*1024)
+
+  //pic
+  //Robin_pro pic addr
+  #define PIC_NAME_ADDR                   0x003000      // Pic information addr
+  #define PIC_SIZE_ADDR                   0x007000      // Pic size information addr
+  #define PIC_COUNTER_ADDR                0x008000      // Pic total number
+  #define PER_PIC_SAVE_ADDR               0x009000      // Storage address of each picture
+  #define PIC_LOGO_ADDR                   0x00A000      // Logo addr
+  //#define PIC_DATA_ADDR                   0x02F000    //
+
+  // TFT35
+  #define DEFAULT_VIEW_ADDR_TFT35                         0XC5800
+  #define BAK_VIEW_ADDR_TFT35                                             (DEFAULT_VIEW_ADDR_TFT35+90*1024)
+  #define PIC_ICON_LOGO_ADDR_TFT35            (BAK_VIEW_ADDR_TFT35+80*1024)
+  #define PIC_DATA_ADDR_TFT35                                             (PIC_ICON_LOGO_ADDR_TFT35+350*1024)//0XC5800
+
+  // TFT32
+  #define PIC_DATA_ADDR_TFT32             0x02F000
+  #define PIC_ICON_LOGO_ADDR_TFT32        0x5D8000
+  #define PIC_OTHER_SIZE_ADDR_TFT32       0x5EE000
+
+  // font
+  #define FONTINFOADDR                    0x600000 // 6M -- font addr
+  #define UNIGBK_FLASH_ADDR              (FONTINFOADDR+4096) // 4*1024
+  #define GBK_FLASH_ADDR                 (UNIGBK_FLASH_ADDR+180224) // 176*1024
+
+  // Flash flag
+  #define FLASH_INF_VALID_FLAG            0xAA558761
+  // SD card information first addr
+  #define VAR_INF_ADDR                    0x000000
+
+  union union32 {
+    uint8_t bytes[4];
+    uint32_t dwords;
+  };
+
+  // pic information
+  struct pic_msg {
+    uint8_t name[PIC_NAME_MAX_LEN];
+    union union32 size;
+  };
+
+  typedef struct pic_msg PIC_MSG;
+
+  #define BMP_WRITE_BUF_LEN 512
+
+  #define PICINFOADDR   0
+
+  #define PIC_SIZE_xM   6
+  #define FONT_SIZE_xM  2
+
+  //extern void PicMsg_Init(void);
+  extern void Pic_Read(uint8_t *Pname, uint8_t *P_Rbuff);
+  //extern void bindBmpFileData(const uint8_t **pBuf, uint8_t *pName);
+  //extern void Pic_Logo_Read(uint8_t *LogoName,uint8_t *Logo_Rbuff,uint32_t LogoReadsize);
+  //extern void default_view_Read(uint8_t *default_view_Rbuff,uint32_t default_view_Readsize);
+  //extern void flash_view_Read(uint8_t *flash_view_Rbuff,uint32_t flash_view_Readsize);
+
+  //extern void lv_Pic_Read(uint8_t *Pname,uint8_t *P_Rbuff,uint32_t addr,uint32_t size);
+  extern void lv_pic_test(uint8_t *P_Rbuff, uint32_t addr, uint32_t size);
+
+#endif
+
+extern uint32_t lv_get_pic_addr(uint8_t *Pname);
+
+extern void get_spi_flash_data(const char *rec_buf, int offset, int size);
+//extern void SPI_FLASH_BufferRead(uint8_t* pBuffer, uint32_t ReadAddr, uint16_t NumByteToRead);
+
+extern void spi_flash_read_test();
+extern void default_view_Read(uint8_t *default_view_Rbuff, uint32_t default_view_Readsize);
+extern void flash_view_Read(uint8_t *flash_view_Rbuff, uint32_t flash_view_Readsize);
+
+#ifdef __cplusplus
+} /* C-declarations for C++ */
+#endif
