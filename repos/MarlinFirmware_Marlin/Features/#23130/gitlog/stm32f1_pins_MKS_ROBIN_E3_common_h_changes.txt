commit aa7d5714867df05348ca63ad113ea9cf7ccc3271
Author: Scott Lahteine <thinkyhead@users.noreply.github.com>
Date:   Mon Jan 22 17:32:01 2024 -0600

    ‚ôªÔ∏è LCD pins migration precursor (#26719)
    
    Preliminary changes for #25650

diff --git a/Marlin/src/pins/stm32f1/pins_MKS_ROBIN_E3_common.h b/Marlin/src/pins/stm32f1/pins_MKS_ROBIN_E3_common.h
index 0557992a83..49f14866c0 100644
--- a/Marlin/src/pins/stm32f1/pins_MKS_ROBIN_E3_common.h
+++ b/Marlin/src/pins/stm32f1/pins_MKS_ROBIN_E3_common.h
@@ -213,63 +213,62 @@
     #define DOGLCD_A0                LCD_PINS_DC
     #define LCD_BACKLIGHT_PIN               -1
     #define LCD_RESET_PIN            EXP1_05_PIN
     #define NEOPIXEL_PIN             EXP1_06_PIN
     #define DOGLCD_MOSI              EXP2_06_PIN
     #define DOGLCD_SCK               EXP2_02_PIN
     #define FORCE_SOFT_SPI
     #define SOFTWARE_SPI
     //#define LCD_SCREEN_ROTATE              180  // 0, 90, 180, 270
 
-  #else
+  #else // !FYSETC_MINI_12864_2_1
 
     #define LCD_PINS_D4              EXP1_05_PIN
     #if IS_ULTIPANEL
       #define LCD_PINS_D5            EXP1_06_PIN
       #define LCD_PINS_D6            EXP1_07_PIN
       #define LCD_PINS_D7            EXP1_08_PIN
 
       #if !defined(BTN_ENC_EN) && ENABLED(REPRAP_DISCOUNT_FULL_GRAPHIC_SMART_CONTROLLER)
         #define BTN_ENC_EN           LCD_PINS_D7  // Detect the presence of the encoder
       #endif
 
     #endif
 
-  #endif // !MKS_MINI_12864
+  #endif // !FYSETC_MINI_12864_2_1
 
 #endif // HAS_WIRED_LCD
 
 // Alter timing for graphical display
 #if IS_U8GLIB_ST7920
   #ifndef BOARD_ST7920_DELAY_1
     #define BOARD_ST7920_DELAY_1             125
   #endif
   #ifndef BOARD_ST7920_DELAY_2
     #define BOARD_ST7920_DELAY_2             125
   #endif
   #ifndef BOARD_ST7920_DELAY_3
     #define BOARD_ST7920_DELAY_3             125
   #endif
 #endif
 
 // LED driving pin
-#ifndef NEOPIXEL_PIN
-  #define NEOPIXEL_PIN                      PA2
+#ifndef BOARD_NEOPIXEL_PIN
+  #define BOARD_NEOPIXEL_PIN                PA2
 #endif
 
 //
 // SD Card
 //
 #define SDCARD_CONNECTION                ONBOARD
-#define SPI_DEVICE                             2  // Maple
-#define ONBOARD_SPI_DEVICE                     2
+#define ONBOARD_SPI_DEVICE                     2  // Maple
 #define SDSS                           SD_SS_PIN
 #define ONBOARD_SD_CS_PIN              SD_SS_PIN
-#define SD_DETECT_PIN                       PC10  // EXP2_07_PIN
+#define SD_DETECT_PIN                EXP2_07_PIN
 #define NO_SD_HOST_DRIVE
 
 // TODO: This is the only way to set SPI for SD on STM32 (for now)
 #define ENABLE_SPI2
 #define SD_SCK_PIN                   EXP2_02_PIN
 #define SD_MISO_PIN                  EXP2_01_PIN
 #define SD_MOSI_PIN                  EXP2_06_PIN
 #define SD_SS_PIN                    EXP2_04_PIN

commit 204de723f1c08f83e281f0629b60822b334097ed
Author: Keith Bennett <13375512+thisiskeithb@users.noreply.github.com>
Date:   Sun Jan 21 04:01:25 2024 -0800

    ‚ú® BIQU MicroProbe (#26527)

diff --git a/Marlin/src/pins/stm32f1/pins_MKS_ROBIN_E3_common.h b/Marlin/src/pins/stm32f1/pins_MKS_ROBIN_E3_common.h
index c3becd3fa1..0557992a83 100644
--- a/Marlin/src/pins/stm32f1/pins_MKS_ROBIN_E3_common.h
+++ b/Marlin/src/pins/stm32f1/pins_MKS_ROBIN_E3_common.h
@@ -57,20 +57,27 @@
 #define Y_STOP_PIN                          PA11
 #define Z_STOP_PIN                          PC6
 
 //
 // Z Probe
 //
 #ifndef Z_MIN_PROBE_PIN
   #define Z_MIN_PROBE_PIN                   PB1
 #endif
 
+//
+// Probe enable
+//
+#if ENABLED(PROBE_ENABLE_DISABLE) && !defined(PROBE_ENABLE_PIN)
+  #define PROBE_ENABLE_PIN            SERVO0_PIN
+#endif
+
 //
 // Steppers
 //
 #define X_STEP_PIN                          PC0
 #define X_DIR_PIN                           PB2
 #define X_ENABLE_PIN                        PC13
 
 #define Y_STEP_PIN                          PC2
 #define Y_DIR_PIN                           PB9
 #define Y_ENABLE_PIN                        PB12

commit 2691167afe02fbbe74b0fdca2c28a49fac635741
Author: Scott Lahteine <thinkyhead@users.noreply.github.com>
Date:   Fri Jun 2 14:26:02 2023 -0500

    üßë‚Äçüíª Dump BOTH and EITHER macros (#25908)

diff --git a/Marlin/src/pins/stm32f1/pins_MKS_ROBIN_E3_common.h b/Marlin/src/pins/stm32f1/pins_MKS_ROBIN_E3_common.h
index a8583e92d7..c3becd3fa1 100644
--- a/Marlin/src/pins/stm32f1/pins_MKS_ROBIN_E3_common.h
+++ b/Marlin/src/pins/stm32f1/pins_MKS_ROBIN_E3_common.h
@@ -31,21 +31,21 @@
 
 #define BOARD_NO_NATIVE_USB
 #define USES_DIAG_JUMPERS
 
 //#define DISABLE_DEBUG
 #define DISABLE_JTAG
 
 //
 // EEPROM
 //
-#if EITHER(NO_EEPROM_SELECTED, FLASH_EEPROM_EMULATION)
+#if ANY(NO_EEPROM_SELECTED, FLASH_EEPROM_EMULATION)
   #define FLASH_EEPROM_EMULATION
   #define EEPROM_PAGE_SIZE     (0x800U)           // 2K
   #define EEPROM_START_ADDRESS (0x8000000UL + (STM32_FLASH_SIZE) * 1024UL - (EEPROM_PAGE_SIZE) * 2UL)
   #define MARLIN_EEPROM_SIZE    EEPROM_PAGE_SIZE  // 2K
 #endif
 
 //
 // Servos
 //
 #define SERVO0_PIN                          PA3

commit ea63ac8f4d2a5fc9d0501ebf979d115adcd42910
Author: Scott Lahteine <thinkyhead@users.noreply.github.com>
Date:   Sun May 21 08:38:42 2023 -0500

    ü©π Fix TFT LVGL compile error (#25865)
    
    Fixes regression from #24302

diff --git a/Marlin/src/pins/stm32f1/pins_MKS_ROBIN_E3_common.h b/Marlin/src/pins/stm32f1/pins_MKS_ROBIN_E3_common.h
index f257ea3bbb..a8583e92d7 100644
--- a/Marlin/src/pins/stm32f1/pins_MKS_ROBIN_E3_common.h
+++ b/Marlin/src/pins/stm32f1/pins_MKS_ROBIN_E3_common.h
@@ -246,21 +246,21 @@
 
 // LED driving pin
 #ifndef NEOPIXEL_PIN
   #define NEOPIXEL_PIN                      PA2
 #endif
 
 //
 // SD Card
 //
 #define SDCARD_CONNECTION                ONBOARD
-#define SPI_DEVICE                             2
+#define SPI_DEVICE                             2  // Maple
 #define ONBOARD_SPI_DEVICE                     2
 #define SDSS                           SD_SS_PIN
 #define ONBOARD_SD_CS_PIN              SD_SS_PIN
 #define SD_DETECT_PIN                       PC10  // EXP2_07_PIN
 #define NO_SD_HOST_DRIVE
 
 // TODO: This is the only way to set SPI for SD on STM32 (for now)
 #define ENABLE_SPI2
 #define SD_SCK_PIN                   EXP2_02_PIN
 #define SD_MISO_PIN                  EXP2_01_PIN

commit 40895cbcbb284b9d5e7440dc8ad40fdcfd1579bd
Author: Scott Lahteine <thinkyhead@users.noreply.github.com>
Date:   Fri May 5 20:46:33 2023 -0500

    üîß Allow TMC_BAUD_RATE override

diff --git a/Marlin/src/pins/stm32f1/pins_MKS_ROBIN_E3_common.h b/Marlin/src/pins/stm32f1/pins_MKS_ROBIN_E3_common.h
index 4d71fcf656..f257ea3bbb 100644
--- a/Marlin/src/pins/stm32f1/pins_MKS_ROBIN_E3_common.h
+++ b/Marlin/src/pins/stm32f1/pins_MKS_ROBIN_E3_common.h
@@ -105,22 +105,25 @@
   #define Y_SERIAL_TX_PIN                   PD2
   #define Y_SERIAL_RX_PIN                   PD2
 
   #define Z_SERIAL_TX_PIN                   PC12
   #define Z_SERIAL_RX_PIN                   PC12
 
   #define E0_SERIAL_TX_PIN                  PC11
   #define E0_SERIAL_RX_PIN                  PC11
 
   // Reduce baud rate to improve software serial reliability
-  #define TMC_BAUD_RATE                    19200
-#endif
+  #ifndef TMC_BAUD_RATE
+    #define TMC_BAUD_RATE                  19200
+  #endif
+
+#endif // HAS_TMC_UART
 
 //
 // Heaters 0,1 / Fans / Bed
 //
 #define HEATER_0_PIN                        PC9
 #define FAN0_PIN                            PA8
 #define HEATER_BED_PIN                      PC8
 
 //
 // Temperature Sensors

commit cd5dc7203ca6340017a4f686a456f5d71792f272
Author: Scott Lahteine <thinkyhead@users.noreply.github.com>
Date:   Sat Apr 8 14:02:14 2023 -0500

    ‚ôªÔ∏è LCD_PINS_ENABLE => LCD_PINS_EN

diff --git a/Marlin/src/pins/stm32f1/pins_MKS_ROBIN_E3_common.h b/Marlin/src/pins/stm32f1/pins_MKS_ROBIN_E3_common.h
index c7aacc4bab..4d71fcf656 100644
--- a/Marlin/src/pins/stm32f1/pins_MKS_ROBIN_E3_common.h
+++ b/Marlin/src/pins/stm32f1/pins_MKS_ROBIN_E3_common.h
@@ -174,21 +174,21 @@
 #define EXP3_04_PIN                         -1    // RESET
 #define EXP3_05_PIN                         PB0
 #define EXP3_06_PIN                         PA6
 #define EXP3_07_PIN                         PA5
 #define EXP3_08_PIN                         PA4
 
 #if HAS_WIRED_LCD
 
   #define BEEPER_PIN                 EXP1_01_PIN
   #define BTN_ENC                    EXP1_02_PIN
-  #define LCD_PINS_ENABLE            EXP1_03_PIN
+  #define LCD_PINS_EN                EXP1_03_PIN
   #define LCD_PINS_RS                EXP1_04_PIN
   #define BTN_EN1                    EXP2_03_PIN
   #define BTN_EN2                    EXP2_05_PIN
 
   // MKS MINI12864 and MKS LCD12864B; If using MKS LCD12864A (Need to remove RPK2 resistor)
   #if ENABLED(MKS_MINI_12864)
 
     #define LCD_BACKLIGHT_PIN               -1
     #define LCD_RESET_PIN                   -1
     #define DOGLCD_A0                EXP1_07_PIN

commit 2e4bf0ab9b2b4db545665bf976d2e0738c237b80
Author: Scott Lahteine <thinkyhead@users.noreply.github.com>
Date:   Sat Mar 25 18:20:14 2023 -0500

    üé® Rename FAN_PIN to FAN0_PIN (#25568)

diff --git a/Marlin/src/pins/stm32f1/pins_MKS_ROBIN_E3_common.h b/Marlin/src/pins/stm32f1/pins_MKS_ROBIN_E3_common.h
index 74780562b6..c7aacc4bab 100644
--- a/Marlin/src/pins/stm32f1/pins_MKS_ROBIN_E3_common.h
+++ b/Marlin/src/pins/stm32f1/pins_MKS_ROBIN_E3_common.h
@@ -112,21 +112,21 @@
   #define E0_SERIAL_RX_PIN                  PC11
 
   // Reduce baud rate to improve software serial reliability
   #define TMC_BAUD_RATE                    19200
 #endif
 
 //
 // Heaters 0,1 / Fans / Bed
 //
 #define HEATER_0_PIN                        PC9
-#define FAN_PIN                             PA8
+#define FAN0_PIN                            PA8
 #define HEATER_BED_PIN                      PC8
 
 //
 // Temperature Sensors
 //
 #define TEMP_BED_PIN                        PA1   // TB
 #define TEMP_0_PIN                          PA0   // TH1
 
 #define FIL_RUNOUT_PIN                      PB10  // MT_DET
 

commit 769ad2764512b38e987ebbed1fe026d68a424bb1
Author: Scott Lahteine <thinkyhead@users.noreply.github.com>
Date:   Fri Mar 24 00:33:39 2023 -0500

    üé® TMC SPI Pins
    
    Co-Authored-By: Martin Turski <turningtides@outlook.de>

diff --git a/Marlin/src/pins/stm32f1/pins_MKS_ROBIN_E3_common.h b/Marlin/src/pins/stm32f1/pins_MKS_ROBIN_E3_common.h
index 642c97bb11..74780562b6 100644
--- a/Marlin/src/pins/stm32f1/pins_MKS_ROBIN_E3_common.h
+++ b/Marlin/src/pins/stm32f1/pins_MKS_ROBIN_E3_common.h
@@ -158,27 +158,27 @@
 #define EXP1_07_PIN                         PC4
 #define EXP1_08_PIN                         PC5
 
 #define EXP2_01_PIN                         PB14
 #define EXP2_02_PIN                         PB13
 #define EXP2_03_PIN                         PB11
 #define EXP2_04_PIN                         PA15
 #define EXP2_05_PIN                         PB0
 #define EXP2_06_PIN                         PB15
 #define EXP2_07_PIN                         PC10
-#define EXP2_08_PIN                         -1   // RESET
+#define EXP2_08_PIN                         -1    // RESET
 
 // "Ender-3 EXP1"
 #define EXP3_01_PIN                         PC1
 #define EXP3_02_PIN                         PC3
 #define EXP3_03_PIN                         PB11
-#define EXP3_04_PIN                         -1   // RESET
+#define EXP3_04_PIN                         -1    // RESET
 #define EXP3_05_PIN                         PB0
 #define EXP3_06_PIN                         PA6
 #define EXP3_07_PIN                         PA5
 #define EXP3_08_PIN                         PA4
 
 #if HAS_WIRED_LCD
 
   #define BEEPER_PIN                 EXP1_01_PIN
   #define BTN_ENC                    EXP1_02_PIN
   #define LCD_PINS_ENABLE            EXP1_03_PIN

commit 2419a167ee7e0c488969ee656f9c6d3e8c65f02a
Author: Scott Lahteine <thinkyhead@users.noreply.github.com>
Date:   Wed Jul 20 16:26:33 2022 -0500

    EXP header pin numbers redux (#24525)
    
    Followup to 504fec98

diff --git a/Marlin/src/pins/stm32f1/pins_MKS_ROBIN_E3_common.h b/Marlin/src/pins/stm32f1/pins_MKS_ROBIN_E3_common.h
index a25c8950cb..642c97bb11 100644
--- a/Marlin/src/pins/stm32f1/pins_MKS_ROBIN_E3_common.h
+++ b/Marlin/src/pins/stm32f1/pins_MKS_ROBIN_E3_common.h
@@ -142,47 +142,47 @@
 /**
  *                ------                                    ------                                  ------
  *  (BEEPER) PC1 | 1  2 | PC3 (BTN_ENC)        (MISO) PB14 | 1  2 | PB13 (SD_SCK)    (BEEPER) PC1  | 1  2 | PC3 (BTN_ENC)
  *  (LCD_EN) PA4 | 3  4 | PA5 (LCD_RS)      (BTN_EN1) PB11 | 3  4 | PA15 (SD_SS)    (BTN_EN1) PB11 | 3  4 | RESET
  *  (LCD_D4) PA6   5  6 | PA7 (LCD_D5)      (BTN_EN2)  PB0   5  6 | PB15 (SD_MOSI)  (BTN_EN2) PB0    5  6 | PA6  (LCD_D4)
  *  (LCD_D6) PC4 | 7  8 | PC5 (LCD_D7)    (SD_DETECT) PC10 | 7  8 | RESET            (LCD_RS) PA5  | 7  8 | PA4  (LCD_EN)
  *           GND | 9 10 | 5V                           GND | 9 10 | --                         GND | 9 10 | 5V
  *                ------                                    ------                                  ------
  *                 EXP1                                      EXP2                                "Ender-3 EXP1"
  */
-#define EXP1_08_PIN                         PC5
-#define EXP1_07_PIN                         PC4
-#define EXP1_06_PIN                         PA7
-#define EXP1_05_PIN                         PA6
-#define EXP1_04_PIN                         PA5
-#define EXP1_03_PIN                         PA4
-#define EXP1_02_PIN                         PC3
 #define EXP1_01_PIN                         PC1
+#define EXP1_02_PIN                         PC3
+#define EXP1_03_PIN                         PA4
+#define EXP1_04_PIN                         PA5
+#define EXP1_05_PIN                         PA6
+#define EXP1_06_PIN                         PA7
+#define EXP1_07_PIN                         PC4
+#define EXP1_08_PIN                         PC5
 
-#define EXP2_08_PIN                         -1   // RESET
-#define EXP2_07_PIN                         PC10
-#define EXP2_06_PIN                         PB15
-#define EXP2_05_PIN                         PB0
-#define EXP2_04_PIN                         PA15
-#define EXP2_03_PIN                         PB11
-#define EXP2_02_PIN                         PB13
 #define EXP2_01_PIN                         PB14
+#define EXP2_02_PIN                         PB13
+#define EXP2_03_PIN                         PB11
+#define EXP2_04_PIN                         PA15
+#define EXP2_05_PIN                         PB0
+#define EXP2_06_PIN                         PB15
+#define EXP2_07_PIN                         PC10
+#define EXP2_08_PIN                         -1   // RESET
 
 // "Ender-3 EXP1"
-#define EXP3_08_PIN                         PA4
-#define EXP3_07_PIN                         PA5
-#define EXP3_06_PIN                         PA6
-#define EXP3_05_PIN                         PB0
-#define EXP3_04_PIN                         -1   // RESET
-#define EXP3_03_PIN                         PB11
-#define EXP3_02_PIN                         PC3
 #define EXP3_01_PIN                         PC1
+#define EXP3_02_PIN                         PC3
+#define EXP3_03_PIN                         PB11
+#define EXP3_04_PIN                         -1   // RESET
+#define EXP3_05_PIN                         PB0
+#define EXP3_06_PIN                         PA6
+#define EXP3_07_PIN                         PA5
+#define EXP3_08_PIN                         PA4
 
 #if HAS_WIRED_LCD
 
   #define BEEPER_PIN                 EXP1_01_PIN
   #define BTN_ENC                    EXP1_02_PIN
   #define LCD_PINS_ENABLE            EXP1_03_PIN
   #define LCD_PINS_RS                EXP1_04_PIN
   #define BTN_EN1                    EXP2_03_PIN
   #define BTN_EN2                    EXP2_05_PIN
 

commit 504fec98237a1042819eba145ae39ad14cc49a1e
Author: Scott Lahteine <thinkyhead@users.noreply.github.com>
Date:   Sat Jul 16 16:26:36 2022 -0500

    üö∏ Renumber EXP pins to match schematics/RRF/Klipper

diff --git a/Marlin/src/pins/stm32f1/pins_MKS_ROBIN_E3_common.h b/Marlin/src/pins/stm32f1/pins_MKS_ROBIN_E3_common.h
index 4af88c1848..a25c8950cb 100644
--- a/Marlin/src/pins/stm32f1/pins_MKS_ROBIN_E3_common.h
+++ b/Marlin/src/pins/stm32f1/pins_MKS_ROBIN_E3_common.h
@@ -134,96 +134,96 @@
 // Power Supply Control
 //
 #if ENABLED(MKS_PWC)
   #define PS_ON_PIN                         PA14  // PW_OFF
   #define KILL_PIN                          PB10  // PW_DET
   #define KILL_PIN_STATE                    HIGH
 #endif
 
 /**
  *                ------                                    ------                                  ------
- *  (BEEPER) PC1 |10  9 | PC3 (BTN_ENC)        (MISO) PB14 |10  9 | PB13 (SD_SCK)    (BEEPER) PC1  |10  9 | PC3 (BTN_ENC)
- *  (LCD_EN) PA4 | 8  7 | PA5 (LCD_RS)      (BTN_EN1) PB11 | 8  7 | PA15 (SD_SS)    (BTN_EN1) PB11 | 8  7 | RESET
- *  (LCD_D4) PA6   6  5 | PA7 (LCD_D5)      (BTN_EN2)  PB0   6  5 | PB15 (SD_MOSI)  (BTN_EN2) PB0    6  5 | PA6  (LCD_D4)
- *  (LCD_D6) PC4 | 4  3 | PC5 (LCD_D7)    (SD_DETECT) PC10 | 4  3 | RESET            (LCD_RS) PA5  | 4  3 | PA4  (LCD_EN)
- *           GND | 2  1 | 5V                           GND | 2  1 | --                         GND | 2  1 | 5V
+ *  (BEEPER) PC1 | 1  2 | PC3 (BTN_ENC)        (MISO) PB14 | 1  2 | PB13 (SD_SCK)    (BEEPER) PC1  | 1  2 | PC3 (BTN_ENC)
+ *  (LCD_EN) PA4 | 3  4 | PA5 (LCD_RS)      (BTN_EN1) PB11 | 3  4 | PA15 (SD_SS)    (BTN_EN1) PB11 | 3  4 | RESET
+ *  (LCD_D4) PA6   5  6 | PA7 (LCD_D5)      (BTN_EN2)  PB0   5  6 | PB15 (SD_MOSI)  (BTN_EN2) PB0    5  6 | PA6  (LCD_D4)
+ *  (LCD_D6) PC4 | 7  8 | PC5 (LCD_D7)    (SD_DETECT) PC10 | 7  8 | RESET            (LCD_RS) PA5  | 7  8 | PA4  (LCD_EN)
+ *           GND | 9 10 | 5V                           GND | 9 10 | --                         GND | 9 10 | 5V
  *                ------                                    ------                                  ------
  *                 EXP1                                      EXP2                                "Ender-3 EXP1"
  */
-#define EXP1_03_PIN                         PC5
-#define EXP1_04_PIN                         PC4
-#define EXP1_05_PIN                         PA7
-#define EXP1_06_PIN                         PA6
-#define EXP1_07_PIN                         PA5
-#define EXP1_08_PIN                         PA4
-#define EXP1_09_PIN                         PC3
-#define EXP1_10_PIN                         PC1
-
-#define EXP2_03_PIN                         -1   // RESET
-#define EXP2_04_PIN                         PC10
-#define EXP2_05_PIN                         PB15
-#define EXP2_06_PIN                         PB0
-#define EXP2_07_PIN                         PA15
-#define EXP2_08_PIN                         PB11
-#define EXP2_09_PIN                         PB13
-#define EXP2_10_PIN                         PB14
+#define EXP1_08_PIN                         PC5
+#define EXP1_07_PIN                         PC4
+#define EXP1_06_PIN                         PA7
+#define EXP1_05_PIN                         PA6
+#define EXP1_04_PIN                         PA5
+#define EXP1_03_PIN                         PA4
+#define EXP1_02_PIN                         PC3
+#define EXP1_01_PIN                         PC1
+
+#define EXP2_08_PIN                         -1   // RESET
+#define EXP2_07_PIN                         PC10
+#define EXP2_06_PIN                         PB15
+#define EXP2_05_PIN                         PB0
+#define EXP2_04_PIN                         PA15
+#define EXP2_03_PIN                         PB11
+#define EXP2_02_PIN                         PB13
+#define EXP2_01_PIN                         PB14
 
 // "Ender-3 EXP1"
-#define E3_EXP1_03_PIN                      PA4
-#define E3_EXP1_04_PIN                      PA5
-#define E3_EXP1_05_PIN                      PA6
-#define E3_EXP1_06_PIN                      PB0
-#define E3_EXP1_07_PIN                      -1   // RESET
-#define E3_EXP1_08_PIN                      PB11
-#define E3_EXP1_09_PIN                      PC3
-#define E3_EXP1_10_PIN                      PC1
+#define EXP3_08_PIN                         PA4
+#define EXP3_07_PIN                         PA5
+#define EXP3_06_PIN                         PA6
+#define EXP3_05_PIN                         PB0
+#define EXP3_04_PIN                         -1   // RESET
+#define EXP3_03_PIN                         PB11
+#define EXP3_02_PIN                         PC3
+#define EXP3_01_PIN                         PC1
 
 #if HAS_WIRED_LCD
 
-  #define BEEPER_PIN                 EXP1_10_PIN
-  #define BTN_ENC                    EXP1_09_PIN
-  #define LCD_PINS_ENABLE            EXP1_08_PIN
-  #define LCD_PINS_RS                EXP1_07_PIN
-  #define BTN_EN1                    EXP2_08_PIN
-  #define BTN_EN2                    EXP2_06_PIN
+  #define BEEPER_PIN                 EXP1_01_PIN
+  #define BTN_ENC                    EXP1_02_PIN
+  #define LCD_PINS_ENABLE            EXP1_03_PIN
+  #define LCD_PINS_RS                EXP1_04_PIN
+  #define BTN_EN1                    EXP2_03_PIN
+  #define BTN_EN2                    EXP2_05_PIN
 
   // MKS MINI12864 and MKS LCD12864B; If using MKS LCD12864A (Need to remove RPK2 resistor)
   #if ENABLED(MKS_MINI_12864)
 
     #define LCD_BACKLIGHT_PIN               -1
     #define LCD_RESET_PIN                   -1
-    #define DOGLCD_A0                EXP1_04_PIN
-    #define DOGLCD_CS                EXP1_05_PIN
-    #define DOGLCD_SCK               EXP2_09_PIN
-    #define DOGLCD_MOSI              EXP2_05_PIN
+    #define DOGLCD_A0                EXP1_07_PIN
+    #define DOGLCD_CS                EXP1_06_PIN
+    #define DOGLCD_SCK               EXP2_02_PIN
+    #define DOGLCD_MOSI              EXP2_06_PIN
 
   #elif ENABLED(FYSETC_MINI_12864_2_1)
 
-    #define LCD_PINS_DC              EXP1_07_PIN
-    #define DOGLCD_CS                EXP1_08_PIN
+    #define LCD_PINS_DC              EXP1_04_PIN
+    #define DOGLCD_CS                EXP1_03_PIN
     #define DOGLCD_A0                LCD_PINS_DC
     #define LCD_BACKLIGHT_PIN               -1
-    #define LCD_RESET_PIN            EXP1_06_PIN
-    #define NEOPIXEL_PIN             EXP1_05_PIN
-    #define DOGLCD_MOSI              EXP2_05_PIN
-    #define DOGLCD_SCK               EXP2_09_PIN
+    #define LCD_RESET_PIN            EXP1_05_PIN
+    #define NEOPIXEL_PIN             EXP1_06_PIN
+    #define DOGLCD_MOSI              EXP2_06_PIN
+    #define DOGLCD_SCK               EXP2_02_PIN
     #define FORCE_SOFT_SPI
     #define SOFTWARE_SPI
     //#define LCD_SCREEN_ROTATE              180  // 0, 90, 180, 270
 
   #else
 
-    #define LCD_PINS_D4              EXP1_06_PIN
+    #define LCD_PINS_D4              EXP1_05_PIN
     #if IS_ULTIPANEL
-      #define LCD_PINS_D5            EXP1_05_PIN
-      #define LCD_PINS_D6            EXP1_04_PIN
-      #define LCD_PINS_D7            EXP1_03_PIN
+      #define LCD_PINS_D5            EXP1_06_PIN
+      #define LCD_PINS_D6            EXP1_07_PIN
+      #define LCD_PINS_D7            EXP1_08_PIN
 
       #if !defined(BTN_ENC_EN) && ENABLED(REPRAP_DISCOUNT_FULL_GRAPHIC_SMART_CONTROLLER)
         #define BTN_ENC_EN           LCD_PINS_D7  // Detect the presence of the encoder
       #endif
 
     #endif
 
   #endif // !MKS_MINI_12864
 
 #endif // HAS_WIRED_LCD
@@ -247,19 +247,19 @@
 #endif
 
 //
 // SD Card
 //
 #define SDCARD_CONNECTION                ONBOARD
 #define SPI_DEVICE                             2
 #define ONBOARD_SPI_DEVICE                     2
 #define SDSS                           SD_SS_PIN
 #define ONBOARD_SD_CS_PIN              SD_SS_PIN
-#define SD_DETECT_PIN                       PC10  // EXP2_04_PIN
+#define SD_DETECT_PIN                       PC10  // EXP2_07_PIN
 #define NO_SD_HOST_DRIVE
 
 // TODO: This is the only way to set SPI for SD on STM32 (for now)
 #define ENABLE_SPI2
-#define SD_SCK_PIN                   EXP2_09_PIN
-#define SD_MISO_PIN                  EXP2_10_PIN
-#define SD_MOSI_PIN                  EXP2_05_PIN
-#define SD_SS_PIN                    EXP2_07_PIN
+#define SD_SCK_PIN                   EXP2_02_PIN
+#define SD_MISO_PIN                  EXP2_01_PIN
+#define SD_MOSI_PIN                  EXP2_06_PIN
+#define SD_SS_PIN                    EXP2_04_PIN

commit 4c8c02f66ff501fdf84082f9b89a9cc04be626d3
Author: Scott Lahteine <github@thinkyhead.com>
Date:   Wed May 4 12:47:15 2022 -0500

    üìù Replace KB with K in pins

diff --git a/Marlin/src/pins/stm32f1/pins_MKS_ROBIN_E3_common.h b/Marlin/src/pins/stm32f1/pins_MKS_ROBIN_E3_common.h
index a1a822a9c2..4af88c1848 100644
--- a/Marlin/src/pins/stm32f1/pins_MKS_ROBIN_E3_common.h
+++ b/Marlin/src/pins/stm32f1/pins_MKS_ROBIN_E3_common.h
@@ -33,23 +33,23 @@
 #define USES_DIAG_JUMPERS
 
 //#define DISABLE_DEBUG
 #define DISABLE_JTAG
 
 //
 // EEPROM
 //
 #if EITHER(NO_EEPROM_SELECTED, FLASH_EEPROM_EMULATION)
   #define FLASH_EEPROM_EMULATION
-  #define EEPROM_PAGE_SIZE     (0x800U)           // 2KB
+  #define EEPROM_PAGE_SIZE     (0x800U)           // 2K
   #define EEPROM_START_ADDRESS (0x8000000UL + (STM32_FLASH_SIZE) * 1024UL - (EEPROM_PAGE_SIZE) * 2UL)
-  #define MARLIN_EEPROM_SIZE    EEPROM_PAGE_SIZE  // 2KB
+  #define MARLIN_EEPROM_SIZE    EEPROM_PAGE_SIZE  // 2K
 #endif
 
 //
 // Servos
 //
 #define SERVO0_PIN                          PA3
 
 //
 // Limit Switches
 //

commit 8169253a7d41e9cc3cd0693b2ad1edce0c4c204e
Author: Scott Lahteine <thinkyhead@users.noreply.github.com>
Date:   Sat Jan 22 10:19:26 2022 -0600

    üßë‚Äçüíª Fix up some AUX / EXP pins (#23577)

diff --git a/Marlin/src/pins/stm32f1/pins_MKS_ROBIN_E3_common.h b/Marlin/src/pins/stm32f1/pins_MKS_ROBIN_E3_common.h
index 14591eb781..a1a822a9c2 100644
--- a/Marlin/src/pins/stm32f1/pins_MKS_ROBIN_E3_common.h
+++ b/Marlin/src/pins/stm32f1/pins_MKS_ROBIN_E3_common.h
@@ -190,23 +190,24 @@
   #if ENABLED(MKS_MINI_12864)
 
     #define LCD_BACKLIGHT_PIN               -1
     #define LCD_RESET_PIN                   -1
     #define DOGLCD_A0                EXP1_04_PIN
     #define DOGLCD_CS                EXP1_05_PIN
     #define DOGLCD_SCK               EXP2_09_PIN
     #define DOGLCD_MOSI              EXP2_05_PIN
 
   #elif ENABLED(FYSETC_MINI_12864_2_1)
+
+    #define LCD_PINS_DC              EXP1_07_PIN
     #define DOGLCD_CS                EXP1_08_PIN
-    #define DOGLCD_A0                EXP1_07_PIN
-    #define LCD_PINS_DC                DOGLCD_A0
+    #define DOGLCD_A0                LCD_PINS_DC
     #define LCD_BACKLIGHT_PIN               -1
     #define LCD_RESET_PIN            EXP1_06_PIN
     #define NEOPIXEL_PIN             EXP1_05_PIN
     #define DOGLCD_MOSI              EXP2_05_PIN
     #define DOGLCD_SCK               EXP2_09_PIN
     #define FORCE_SOFT_SPI
     #define SOFTWARE_SPI
     //#define LCD_SCREEN_ROTATE              180  // 0, 90, 180, 270
 
   #else

commit 5179f55bf9147a52cb63281a04c99ac79c9e3143
Author: Scott Lahteine <github@thinkyhead.com>
Date:   Wed Jan 19 03:27:10 2022 -0600

    üé® LCD_SCREEN_ROT_* => LCD_SCREEN_ROTATE

diff --git a/Marlin/src/pins/stm32f1/pins_MKS_ROBIN_E3_common.h b/Marlin/src/pins/stm32f1/pins_MKS_ROBIN_E3_common.h
index b0303861c9..14591eb781 100644
--- a/Marlin/src/pins/stm32f1/pins_MKS_ROBIN_E3_common.h
+++ b/Marlin/src/pins/stm32f1/pins_MKS_ROBIN_E3_common.h
@@ -200,21 +200,21 @@
     #define DOGLCD_CS                EXP1_08_PIN
     #define DOGLCD_A0                EXP1_07_PIN
     #define LCD_PINS_DC                DOGLCD_A0
     #define LCD_BACKLIGHT_PIN               -1
     #define LCD_RESET_PIN            EXP1_06_PIN
     #define NEOPIXEL_PIN             EXP1_05_PIN
     #define DOGLCD_MOSI              EXP2_05_PIN
     #define DOGLCD_SCK               EXP2_09_PIN
     #define FORCE_SOFT_SPI
     #define SOFTWARE_SPI
-    //#define LCD_SCREEN_ROT_180
+    //#define LCD_SCREEN_ROTATE              180  // 0, 90, 180, 270
 
   #else
 
     #define LCD_PINS_D4              EXP1_06_PIN
     #if IS_ULTIPANEL
       #define LCD_PINS_D5            EXP1_05_PIN
       #define LCD_PINS_D6            EXP1_04_PIN
       #define LCD_PINS_D7            EXP1_03_PIN
 
       #if !defined(BTN_ENC_EN) && ENABLED(REPRAP_DISCOUNT_FULL_GRAPHIC_SMART_CONTROLLER)

commit 761b1b93c62e9b70dd97c9579450804219d8f25b
Author: Scott Lahteine <thinkyhead@users.noreply.github.com>
Date:   Mon Dec 27 20:52:43 2021 -0600

    üìù Consistent pin header orientation

diff --git a/Marlin/src/pins/stm32f1/pins_MKS_ROBIN_E3_common.h b/Marlin/src/pins/stm32f1/pins_MKS_ROBIN_E3_common.h
index e02d1db786..b0303861c9 100644
--- a/Marlin/src/pins/stm32f1/pins_MKS_ROBIN_E3_common.h
+++ b/Marlin/src/pins/stm32f1/pins_MKS_ROBIN_E3_common.h
@@ -138,21 +138,21 @@
   #define KILL_PIN                          PB10  // PW_DET
   #define KILL_PIN_STATE                    HIGH
 #endif
 
 /**
  *                ------                                    ------                                  ------
  *  (BEEPER) PC1 |10  9 | PC3 (BTN_ENC)        (MISO) PB14 |10  9 | PB13 (SD_SCK)    (BEEPER) PC1  |10  9 | PC3 (BTN_ENC)
  *  (LCD_EN) PA4 | 8  7 | PA5 (LCD_RS)      (BTN_EN1) PB11 | 8  7 | PA15 (SD_SS)    (BTN_EN1) PB11 | 8  7 | RESET
  *  (LCD_D4) PA6   6  5 | PA7 (LCD_D5)      (BTN_EN2)  PB0   6  5 | PB15 (SD_MOSI)  (BTN_EN2) PB0    6  5 | PA6  (LCD_D4)
  *  (LCD_D6) PC4 | 4  3 | PC5 (LCD_D7)    (SD_DETECT) PC10 | 4  3 | RESET            (LCD_RS) PA5  | 4  3 | PA4  (LCD_EN)
- *           GND | 2  1 | 5V                           GND | 2  1 | NC                        GND  | 2  1 | 5V
+ *           GND | 2  1 | 5V                           GND | 2  1 | --                         GND | 2  1 | 5V
  *                ------                                    ------                                  ------
  *                 EXP1                                      EXP2                                "Ender-3 EXP1"
  */
 #define EXP1_03_PIN                         PC5
 #define EXP1_04_PIN                         PC4
 #define EXP1_05_PIN                         PA7
 #define EXP1_06_PIN                         PA6
 #define EXP1_07_PIN                         PA5
 #define EXP1_08_PIN                         PA4
 #define EXP1_09_PIN                         PC3

commit 555c749fe2be922eaf3bd78a79ae3b89b012662f
Author: Keith Bennett <13375512+thisiskeithb@users.noreply.github.com>
Date:   Sat Dec 25 19:41:01 2021 -0800

    üêõ Fix MKS Robin E3 NeoPixel pin default (#23350)

diff --git a/Marlin/src/pins/stm32f1/pins_MKS_ROBIN_E3_common.h b/Marlin/src/pins/stm32f1/pins_MKS_ROBIN_E3_common.h
index c30bb0ac9e..e02d1db786 100644
--- a/Marlin/src/pins/stm32f1/pins_MKS_ROBIN_E3_common.h
+++ b/Marlin/src/pins/stm32f1/pins_MKS_ROBIN_E3_common.h
@@ -57,25 +57,20 @@
 #define Y_STOP_PIN                          PA11
 #define Z_STOP_PIN                          PC6
 
 //
 // Z Probe
 //
 #ifndef Z_MIN_PROBE_PIN
   #define Z_MIN_PROBE_PIN                   PB1
 #endif
 
-// LED driving pin
-#ifndef NEOPIXEL_PIN
-  #define NEOPIXEL_PIN                      PA2
-#endif
-
 //
 // Steppers
 //
 #define X_STEP_PIN                          PC0
 #define X_DIR_PIN                           PB2
 #define X_ENABLE_PIN                        PC13
 
 #define Y_STEP_PIN                          PC2
 #define Y_DIR_PIN                           PB9
 #define Y_ENABLE_PIN                        PB12
@@ -238,20 +233,25 @@
     #define BOARD_ST7920_DELAY_1             125
   #endif
   #ifndef BOARD_ST7920_DELAY_2
     #define BOARD_ST7920_DELAY_2             125
   #endif
   #ifndef BOARD_ST7920_DELAY_3
     #define BOARD_ST7920_DELAY_3             125
   #endif
 #endif
 
+// LED driving pin
+#ifndef NEOPIXEL_PIN
+  #define NEOPIXEL_PIN                      PA2
+#endif
+
 //
 // SD Card
 //
 #define SDCARD_CONNECTION                ONBOARD
 #define SPI_DEVICE                             2
 #define ONBOARD_SPI_DEVICE                     2
 #define SDSS                           SD_SS_PIN
 #define ONBOARD_SD_CS_PIN              SD_SS_PIN
 #define SD_DETECT_PIN                       PC10  // EXP2_04_PIN
 #define NO_SD_HOST_DRIVE

commit 6ac0d4727cd4abe70002c32faf3d87c7e24bfad3
Author: Keith Bennett <13375512+thisiskeithb@users.noreply.github.com>
Date:   Sun Nov 21 11:25:06 2021 -0800

    ‚ú® BigTreeTech Mini 12864 V1.0 (#23130)
    
    Co-authored-by: Scott Lahteine <thinkyhead@users.noreply.github.com>

diff --git a/Marlin/src/pins/stm32f1/pins_MKS_ROBIN_E3_common.h b/Marlin/src/pins/stm32f1/pins_MKS_ROBIN_E3_common.h
index 025c65a38b..c30bb0ac9e 100644
--- a/Marlin/src/pins/stm32f1/pins_MKS_ROBIN_E3_common.h
+++ b/Marlin/src/pins/stm32f1/pins_MKS_ROBIN_E3_common.h
@@ -194,21 +194,21 @@
   // MKS MINI12864 and MKS LCD12864B; If using MKS LCD12864A (Need to remove RPK2 resistor)
   #if ENABLED(MKS_MINI_12864)
 
     #define LCD_BACKLIGHT_PIN               -1
     #define LCD_RESET_PIN                   -1
     #define DOGLCD_A0                EXP1_04_PIN
     #define DOGLCD_CS                EXP1_05_PIN
     #define DOGLCD_SCK               EXP2_09_PIN
     #define DOGLCD_MOSI              EXP2_05_PIN
 
-  #elif ENABLED(MKS_MINI_12864_V3)
+  #elif ENABLED(FYSETC_MINI_12864_2_1)
     #define DOGLCD_CS                EXP1_08_PIN
     #define DOGLCD_A0                EXP1_07_PIN
     #define LCD_PINS_DC                DOGLCD_A0
     #define LCD_BACKLIGHT_PIN               -1
     #define LCD_RESET_PIN            EXP1_06_PIN
     #define NEOPIXEL_PIN             EXP1_05_PIN
     #define DOGLCD_MOSI              EXP2_05_PIN
     #define DOGLCD_SCK               EXP2_09_PIN
     #define FORCE_SOFT_SPI
     #define SOFTWARE_SPI

commit 0db9f9a828c43f978e37b5140f7b9bb6ca630667
Author: Keith Bennett <13375512+thisiskeithb@users.noreply.github.com>
Date:   Mon Nov 1 23:15:29 2021 -0700

    üìå Default NeoPixel pin for MKS Robin E3/E3D (#23060)

diff --git a/Marlin/src/pins/stm32f1/pins_MKS_ROBIN_E3_common.h b/Marlin/src/pins/stm32f1/pins_MKS_ROBIN_E3_common.h
index a34099120e..025c65a38b 100644
--- a/Marlin/src/pins/stm32f1/pins_MKS_ROBIN_E3_common.h
+++ b/Marlin/src/pins/stm32f1/pins_MKS_ROBIN_E3_common.h
@@ -57,20 +57,25 @@
 #define Y_STOP_PIN                          PA11
 #define Z_STOP_PIN                          PC6
 
 //
 // Z Probe
 //
 #ifndef Z_MIN_PROBE_PIN
   #define Z_MIN_PROBE_PIN                   PB1
 #endif
 
+// LED driving pin
+#ifndef NEOPIXEL_PIN
+  #define NEOPIXEL_PIN                      PA2
+#endif
+
 //
 // Steppers
 //
 #define X_STEP_PIN                          PC0
 #define X_DIR_PIN                           PB2
 #define X_ENABLE_PIN                        PC13
 
 #define Y_STEP_PIN                          PC2
 #define Y_DIR_PIN                           PB9
 #define Y_ENABLE_PIN                        PB12

commit 767a15d468ab6859eec19600541ad21dff757d1a
Author: Keith Bennett <13375512+thisiskeithb@users.noreply.github.com>
Date:   Mon Nov 1 22:43:40 2021 -0700

    üîß Endstop / DIAG homing conflict warning (#23050)

diff --git a/Marlin/src/pins/stm32f1/pins_MKS_ROBIN_E3_common.h b/Marlin/src/pins/stm32f1/pins_MKS_ROBIN_E3_common.h
index a221ce94c5..a34099120e 100644
--- a/Marlin/src/pins/stm32f1/pins_MKS_ROBIN_E3_common.h
+++ b/Marlin/src/pins/stm32f1/pins_MKS_ROBIN_E3_common.h
@@ -20,24 +20,25 @@
  *
  */
 #pragma once
 
 /**
  * MKS Robin E3 & E3D (STM32F103RCT6) common board pin assignments
  */
 
 #include "env_validate.h"
 
-#define BOARD_NO_NATIVE_USB
-
 #define BOARD_WEBSITE_URL "github.com/makerbase-mks"
 
+#define BOARD_NO_NATIVE_USB
+#define USES_DIAG_JUMPERS
+
 //#define DISABLE_DEBUG
 #define DISABLE_JTAG
 
 //
 // EEPROM
 //
 #if EITHER(NO_EEPROM_SELECTED, FLASH_EEPROM_EMULATION)
   #define FLASH_EEPROM_EMULATION
   #define EEPROM_PAGE_SIZE     (0x800U)           // 2KB
   #define EEPROM_START_ADDRESS (0x8000000UL + (STM32_FLASH_SIZE) * 1024UL - (EEPROM_PAGE_SIZE) * 2UL)

commit a1c4aad1472bb418bc0c0bc52322032b68df3a1f
Author: Keith Bennett <13375512+thisiskeithb@users.noreply.github.com>
Date:   Thu Oct 28 03:26:05 2021 -0700

    üêõ Fix MKS Robin E3/E3D Z Stop/Probe pins (#23034)

diff --git a/Marlin/src/pins/stm32f1/pins_MKS_ROBIN_E3_common.h b/Marlin/src/pins/stm32f1/pins_MKS_ROBIN_E3_common.h
index dd1008ee3a..a221ce94c5 100644
--- a/Marlin/src/pins/stm32f1/pins_MKS_ROBIN_E3_common.h
+++ b/Marlin/src/pins/stm32f1/pins_MKS_ROBIN_E3_common.h
@@ -47,22 +47,28 @@
 //
 // Servos
 //
 #define SERVO0_PIN                          PA3
 
 //
 // Limit Switches
 //
 #define X_STOP_PIN                          PA12
 #define Y_STOP_PIN                          PA11
-#define Z_MIN_PIN                           PC6
-#define Z_MAX_PIN                           PB1
+#define Z_STOP_PIN                          PC6
+
+//
+// Z Probe
+//
+#ifndef Z_MIN_PROBE_PIN
+  #define Z_MIN_PROBE_PIN                   PB1
+#endif
 
 //
 // Steppers
 //
 #define X_STEP_PIN                          PC0
 #define X_DIR_PIN                           PB2
 #define X_ENABLE_PIN                        PC13
 
 #define Y_STEP_PIN                          PC2
 #define Y_DIR_PIN                           PB9

commit 9bb562f40a5570a63430bbf9392da0fdb85c5c8c
Author: VragVideo <91742261+VragVideo@users.noreply.github.com>
Date:   Sun Oct 3 06:12:51 2021 +0300

    ‚ú® WYH L12864 LCD (Alfawise Ex8) (#22863)

diff --git a/Marlin/src/pins/stm32f1/pins_MKS_ROBIN_E3_common.h b/Marlin/src/pins/stm32f1/pins_MKS_ROBIN_E3_common.h
index 489da08393..dd1008ee3a 100644
--- a/Marlin/src/pins/stm32f1/pins_MKS_ROBIN_E3_common.h
+++ b/Marlin/src/pins/stm32f1/pins_MKS_ROBIN_E3_common.h
@@ -214,21 +214,21 @@
         #define BTN_ENC_EN           LCD_PINS_D7  // Detect the presence of the encoder
       #endif
 
     #endif
 
   #endif // !MKS_MINI_12864
 
 #endif // HAS_WIRED_LCD
 
 // Alter timing for graphical display
-#if ENABLED(U8GLIB_ST7920)
+#if IS_U8GLIB_ST7920
   #ifndef BOARD_ST7920_DELAY_1
     #define BOARD_ST7920_DELAY_1             125
   #endif
   #ifndef BOARD_ST7920_DELAY_2
     #define BOARD_ST7920_DELAY_2             125
   #endif
   #ifndef BOARD_ST7920_DELAY_3
     #define BOARD_ST7920_DELAY_3             125
   #endif
 #endif

commit c881fab1280f338e32015e1556890d647ee967fb
Author: dotdash32 <dotdash32@gmail.com>
Date:   Sun Sep 5 17:21:25 2021 -0700

    üé® Use largest default ST9720 delays (#22713)
    
    Co-authored-by: Scott Lahteine <thinkyhead@users.noreply.github.com>

diff --git a/Marlin/src/pins/stm32f1/pins_MKS_ROBIN_E3_common.h b/Marlin/src/pins/stm32f1/pins_MKS_ROBIN_E3_common.h
index 39920122d3..489da08393 100644
--- a/Marlin/src/pins/stm32f1/pins_MKS_ROBIN_E3_common.h
+++ b/Marlin/src/pins/stm32f1/pins_MKS_ROBIN_E3_common.h
@@ -216,27 +216,27 @@
 
     #endif
 
   #endif // !MKS_MINI_12864
 
 #endif // HAS_WIRED_LCD
 
 // Alter timing for graphical display
 #if ENABLED(U8GLIB_ST7920)
   #ifndef BOARD_ST7920_DELAY_1
-    #define BOARD_ST7920_DELAY_1   DELAY_NS(125)
+    #define BOARD_ST7920_DELAY_1             125
   #endif
   #ifndef BOARD_ST7920_DELAY_2
-    #define BOARD_ST7920_DELAY_2   DELAY_NS(125)
+    #define BOARD_ST7920_DELAY_2             125
   #endif
   #ifndef BOARD_ST7920_DELAY_3
-    #define BOARD_ST7920_DELAY_3   DELAY_NS(125)
+    #define BOARD_ST7920_DELAY_3             125
   #endif
 #endif
 
 //
 // SD Card
 //
 #define SDCARD_CONNECTION                ONBOARD
 #define SPI_DEVICE                             2
 #define ONBOARD_SPI_DEVICE                     2
 #define SDSS                           SD_SS_PIN

commit 18d82c1988624c48b459352fa02a352b34d2eff7
Author: Thomas White <TomW1605@users.noreply.github.com>
Date:   Fri Sep 3 12:30:24 2021 +0800

    ‚ú® Homing submenu option (#22692)

diff --git a/Marlin/src/pins/stm32f1/pins_MKS_ROBIN_E3_common.h b/Marlin/src/pins/stm32f1/pins_MKS_ROBIN_E3_common.h
index 8c0ff76ae6..39920122d3 100644
--- a/Marlin/src/pins/stm32f1/pins_MKS_ROBIN_E3_common.h
+++ b/Marlin/src/pins/stm32f1/pins_MKS_ROBIN_E3_common.h
@@ -193,21 +193,21 @@
     #define DOGLCD_CS                EXP1_08_PIN
     #define DOGLCD_A0                EXP1_07_PIN
     #define LCD_PINS_DC                DOGLCD_A0
     #define LCD_BACKLIGHT_PIN               -1
     #define LCD_RESET_PIN            EXP1_06_PIN
     #define NEOPIXEL_PIN             EXP1_05_PIN
     #define DOGLCD_MOSI              EXP2_05_PIN
     #define DOGLCD_SCK               EXP2_09_PIN
     #define FORCE_SOFT_SPI
     #define SOFTWARE_SPI
-	//#define LCD_SCREEN_ROT_180
+    //#define LCD_SCREEN_ROT_180
 
   #else
 
     #define LCD_PINS_D4              EXP1_06_PIN
     #if IS_ULTIPANEL
       #define LCD_PINS_D5            EXP1_05_PIN
       #define LCD_PINS_D6            EXP1_04_PIN
       #define LCD_PINS_D7            EXP1_03_PIN
 
       #if !defined(BTN_ENC_EN) && ENABLED(REPRAP_DISCOUNT_FULL_GRAPHIC_SMART_CONTROLLER)

commit d818a019c5d80e8b2238f0ea8311ad53154be4ec
Author: Scott Lahteine <thinkyhead@users.noreply.github.com>
Date:   Sat Aug 28 15:27:52 2021 -0500

    üé® EXP headers, ST7920 delays (#22641)

diff --git a/Marlin/src/pins/stm32f1/pins_MKS_ROBIN_E3_common.h b/Marlin/src/pins/stm32f1/pins_MKS_ROBIN_E3_common.h
index 60d342c602..8c0ff76ae6 100644
--- a/Marlin/src/pins/stm32f1/pins_MKS_ROBIN_E3_common.h
+++ b/Marlin/src/pins/stm32f1/pins_MKS_ROBIN_E3_common.h
@@ -126,96 +126,127 @@
 //
 // Power Supply Control
 //
 #if ENABLED(MKS_PWC)
   #define PS_ON_PIN                         PA14  // PW_OFF
   #define KILL_PIN                          PB10  // PW_DET
   #define KILL_PIN_STATE                    HIGH
 #endif
 
 /**
- *                -----                                      -----                                     -----
- *  (BEEPER) PC1 | 1 2 | PC3 (BTN_ENC)          (MISO) PB14 | 1 2 | PB13 (SD_SCK)                  5V | 1 2 | GND
- *  (LCD_EN) PA4 | 3 4 | PA5 (LCD_RS)        (BTN_EN1) PB11 | 3 4 | PA15 (SD_SS)         (LCD_EN) PA4 | 3 4 | PA5  (LCD_RS)
- *  (LCD_D4) PA6 | 5 6   PA7 (LCD_D5)        (BTN_EN2)  PB0 | 5 6   PB15 (SD_MOSI)       (LCD_D4) PA6 | 5 6   PB0  (BTN_EN2)
- *  (LCD_D6) PC4 | 7 8 | PC5 (LCD_D7)      (SD_DETECT) PC10 | 7 8 | RESET                       RESET | 7 8 | PB11 (BTN_EN1)
- *           GND | 9 10| 5V                             GND | 9 10| NC                  (BTN_ENC) PC3 | 9 10| PC1  (BEEPER)
- *                -----                                      -----                                     -----
- *                EXP1                                       EXP2                                      EXP3
+ *                ------                                    ------                                  ------
+ *  (BEEPER) PC1 |10  9 | PC3 (BTN_ENC)        (MISO) PB14 |10  9 | PB13 (SD_SCK)    (BEEPER) PC1  |10  9 | PC3 (BTN_ENC)
+ *  (LCD_EN) PA4 | 8  7 | PA5 (LCD_RS)      (BTN_EN1) PB11 | 8  7 | PA15 (SD_SS)    (BTN_EN1) PB11 | 8  7 | RESET
+ *  (LCD_D4) PA6   6  5 | PA7 (LCD_D5)      (BTN_EN2)  PB0   6  5 | PB15 (SD_MOSI)  (BTN_EN2) PB0    6  5 | PA6  (LCD_D4)
+ *  (LCD_D6) PC4 | 4  3 | PC5 (LCD_D7)    (SD_DETECT) PC10 | 4  3 | RESET            (LCD_RS) PA5  | 4  3 | PA4  (LCD_EN)
+ *           GND | 2  1 | 5V                           GND | 2  1 | NC                        GND  | 2  1 | 5V
+ *                ------                                    ------                                  ------
+ *                 EXP1                                      EXP2                                "Ender-3 EXP1"
  */
+#define EXP1_03_PIN                         PC5
+#define EXP1_04_PIN                         PC4
+#define EXP1_05_PIN                         PA7
+#define EXP1_06_PIN                         PA6
+#define EXP1_07_PIN                         PA5
+#define EXP1_08_PIN                         PA4
+#define EXP1_09_PIN                         PC3
+#define EXP1_10_PIN                         PC1
+
+#define EXP2_03_PIN                         -1   // RESET
+#define EXP2_04_PIN                         PC10
+#define EXP2_05_PIN                         PB15
+#define EXP2_06_PIN                         PB0
+#define EXP2_07_PIN                         PA15
+#define EXP2_08_PIN                         PB11
+#define EXP2_09_PIN                         PB13
+#define EXP2_10_PIN                         PB14
+
+// "Ender-3 EXP1"
+#define E3_EXP1_03_PIN                      PA4
+#define E3_EXP1_04_PIN                      PA5
+#define E3_EXP1_05_PIN                      PA6
+#define E3_EXP1_06_PIN                      PB0
+#define E3_EXP1_07_PIN                      -1   // RESET
+#define E3_EXP1_08_PIN                      PB11
+#define E3_EXP1_09_PIN                      PC3
+#define E3_EXP1_10_PIN                      PC1
+
 #if HAS_WIRED_LCD
 
-  #define BEEPER_PIN                        PC1
-  #define BTN_ENC                           PC3
-  #define LCD_PINS_ENABLE                   PA4
-  #define LCD_PINS_RS                       PA5
-  #define BTN_EN1                           PB11
-  #define BTN_EN2                           PB0
+  #define BEEPER_PIN                 EXP1_10_PIN
+  #define BTN_ENC                    EXP1_09_PIN
+  #define LCD_PINS_ENABLE            EXP1_08_PIN
+  #define LCD_PINS_RS                EXP1_07_PIN
+  #define BTN_EN1                    EXP2_08_PIN
+  #define BTN_EN2                    EXP2_06_PIN
 
   // MKS MINI12864 and MKS LCD12864B; If using MKS LCD12864A (Need to remove RPK2 resistor)
   #if ENABLED(MKS_MINI_12864)
 
     #define LCD_BACKLIGHT_PIN               -1
     #define LCD_RESET_PIN                   -1
-    #define DOGLCD_A0                       PC4
-    #define DOGLCD_CS                       PA7
-    #define DOGLCD_SCK                      PB13
-    #define DOGLCD_MOSI                     PB15
+    #define DOGLCD_A0                EXP1_04_PIN
+    #define DOGLCD_CS                EXP1_05_PIN
+    #define DOGLCD_SCK               EXP2_09_PIN
+    #define DOGLCD_MOSI              EXP2_05_PIN
 
   #elif ENABLED(MKS_MINI_12864_V3)
-    #define DOGLCD_CS                       PA4
-    #define DOGLCD_A0                       PA5
+    #define DOGLCD_CS                EXP1_08_PIN
+    #define DOGLCD_A0                EXP1_07_PIN
     #define LCD_PINS_DC                DOGLCD_A0
     #define LCD_BACKLIGHT_PIN               -1
-    #define LCD_RESET_PIN                   PA6
-    #define NEOPIXEL_PIN                    PA7
-    #define DOGLCD_MOSI                     PB15
-    #define DOGLCD_SCK                      PB13
+    #define LCD_RESET_PIN            EXP1_06_PIN
+    #define NEOPIXEL_PIN             EXP1_05_PIN
+    #define DOGLCD_MOSI              EXP2_05_PIN
+    #define DOGLCD_SCK               EXP2_09_PIN
     #define FORCE_SOFT_SPI
     #define SOFTWARE_SPI
 	//#define LCD_SCREEN_ROT_180
 
   #else
 
-    #define LCD_PINS_D4                     PA6
+    #define LCD_PINS_D4              EXP1_06_PIN
     #if IS_ULTIPANEL
-      #define LCD_PINS_D5                   PA7
-      #define LCD_PINS_D6                   PC4
-      #define LCD_PINS_D7                   PC5
+      #define LCD_PINS_D5            EXP1_05_PIN
+      #define LCD_PINS_D6            EXP1_04_PIN
+      #define LCD_PINS_D7            EXP1_03_PIN
 
       #if !defined(BTN_ENC_EN) && ENABLED(REPRAP_DISCOUNT_FULL_GRAPHIC_SMART_CONTROLLER)
         #define BTN_ENC_EN           LCD_PINS_D7  // Detect the presence of the encoder
       #endif
 
     #endif
 
   #endif // !MKS_MINI_12864
 
 #endif // HAS_WIRED_LCD
 
+// Alter timing for graphical display
+#if ENABLED(U8GLIB_ST7920)
+  #ifndef BOARD_ST7920_DELAY_1
+    #define BOARD_ST7920_DELAY_1   DELAY_NS(125)
+  #endif
+  #ifndef BOARD_ST7920_DELAY_2
+    #define BOARD_ST7920_DELAY_2   DELAY_NS(125)
+  #endif
+  #ifndef BOARD_ST7920_DELAY_3
+    #define BOARD_ST7920_DELAY_3   DELAY_NS(125)
+  #endif
+#endif
+
 //
 // SD Card
 //
+#define SDCARD_CONNECTION                ONBOARD
 #define SPI_DEVICE                             2
 #define ONBOARD_SPI_DEVICE                     2
 #define SDSS                           SD_SS_PIN
-#define SDCARD_CONNECTION                ONBOARD
-#define SD_DETECT_PIN                       PC10
 #define ONBOARD_SD_CS_PIN              SD_SS_PIN
+#define SD_DETECT_PIN                       PC10  // EXP2_04_PIN
 #define NO_SD_HOST_DRIVE
 
 // TODO: This is the only way to set SPI for SD on STM32 (for now)
 #define ENABLE_SPI2
-#define SD_SCK_PIN                          PB13
-#define SD_MISO_PIN                         PB14
-#define SD_MOSI_PIN                         PB15
-#define SD_SS_PIN                           PA15
-
-#ifndef BOARD_ST7920_DELAY_1
-  #define BOARD_ST7920_DELAY_1     DELAY_NS(125)
-#endif
-#ifndef BOARD_ST7920_DELAY_2
-  #define BOARD_ST7920_DELAY_2     DELAY_NS(125)
-#endif
-#ifndef BOARD_ST7920_DELAY_3
-  #define BOARD_ST7920_DELAY_3     DELAY_NS(125)
-#endif
+#define SD_SCK_PIN                   EXP2_09_PIN
+#define SD_MISO_PIN                  EXP2_10_PIN
+#define SD_MOSI_PIN                  EXP2_05_PIN
+#define SD_SS_PIN                    EXP2_07_PIN

commit 4f35858c9ef4de8e291d8006041aca0969c9d825
Author: Scott Lahteine <thinkyhead@users.noreply.github.com>
Date:   Tue Aug 24 18:07:41 2021 -0500

    üé® EXP1/2 headers and pins cleanup (#22628)

diff --git a/Marlin/src/pins/stm32f1/pins_MKS_ROBIN_E3_common.h b/Marlin/src/pins/stm32f1/pins_MKS_ROBIN_E3_common.h
index c568e42df2..60d342c602 100644
--- a/Marlin/src/pins/stm32f1/pins_MKS_ROBIN_E3_common.h
+++ b/Marlin/src/pins/stm32f1/pins_MKS_ROBIN_E3_common.h
@@ -126,21 +126,21 @@
 //
 // Power Supply Control
 //
 #if ENABLED(MKS_PWC)
   #define PS_ON_PIN                         PA14  // PW_OFF
   #define KILL_PIN                          PB10  // PW_DET
   #define KILL_PIN_STATE                    HIGH
 #endif
 
 /**
- *                _____                                      _____                                     _____
+ *                -----                                      -----                                     -----
  *  (BEEPER) PC1 | 1 2 | PC3 (BTN_ENC)          (MISO) PB14 | 1 2 | PB13 (SD_SCK)                  5V | 1 2 | GND
  *  (LCD_EN) PA4 | 3 4 | PA5 (LCD_RS)        (BTN_EN1) PB11 | 3 4 | PA15 (SD_SS)         (LCD_EN) PA4 | 3 4 | PA5  (LCD_RS)
  *  (LCD_D4) PA6 | 5 6   PA7 (LCD_D5)        (BTN_EN2)  PB0 | 5 6   PB15 (SD_MOSI)       (LCD_D4) PA6 | 5 6   PB0  (BTN_EN2)
  *  (LCD_D6) PC4 | 7 8 | PC5 (LCD_D7)      (SD_DETECT) PC10 | 7 8 | RESET                       RESET | 7 8 | PB11 (BTN_EN1)
  *           GND | 9 10| 5V                             GND | 9 10| NC                  (BTN_ENC) PC3 | 9 10| PC1  (BEEPER)
  *                -----                                      -----                                     -----
  *                EXP1                                       EXP2                                      EXP3
  */
 #if HAS_WIRED_LCD
 

commit 2e3b13133159669ecb9682079f60972d0ff5b3c8
Author: Scott Lahteine <github@thinkyhead.com>
Date:   Sat Aug 21 15:07:52 2021 -0500

    üé® Tweak TMC software serial pins

diff --git a/Marlin/src/pins/stm32f1/pins_MKS_ROBIN_E3_common.h b/Marlin/src/pins/stm32f1/pins_MKS_ROBIN_E3_common.h
index 5a35932801..c568e42df2 100644
--- a/Marlin/src/pins/stm32f1/pins_MKS_ROBIN_E3_common.h
+++ b/Marlin/src/pins/stm32f1/pins_MKS_ROBIN_E3_common.h
@@ -85,23 +85,20 @@
    * TMC2208/TMC2209 stepper drivers
    *
    * Hardware serial communication ports.
    * If undefined software serial is used according to the pins below
    */
   //#define X_HARDWARE_SERIAL  MSerial1
   //#define Y_HARDWARE_SERIAL  MSerial1
   //#define Z_HARDWARE_SERIAL  MSerial1
   //#define E0_HARDWARE_SERIAL MSerial1
 
-  //
-  // Software serial
-  //
   #define X_SERIAL_TX_PIN                   PC7
   #define X_SERIAL_RX_PIN                   PC7
 
   #define Y_SERIAL_TX_PIN                   PD2
   #define Y_SERIAL_RX_PIN                   PD2
 
   #define Z_SERIAL_TX_PIN                   PC12
   #define Z_SERIAL_RX_PIN                   PC12
 
   #define E0_SERIAL_TX_PIN                  PC11

commit c161a46112debd280dc1ed6945d50f971ff505e6
Author: Scott Lahteine <thinkyhead@users.noreply.github.com>
Date:   Fri Aug 13 16:32:25 2021 -0500

    üé® Update MKSPWC, some other pins (#22557)

diff --git a/Marlin/src/pins/stm32f1/pins_MKS_ROBIN_E3_common.h b/Marlin/src/pins/stm32f1/pins_MKS_ROBIN_E3_common.h
index da7ba05795..5a35932801 100644
--- a/Marlin/src/pins/stm32f1/pins_MKS_ROBIN_E3_common.h
+++ b/Marlin/src/pins/stm32f1/pins_MKS_ROBIN_E3_common.h
@@ -122,28 +122,24 @@
 // Temperature Sensors
 //
 #define TEMP_BED_PIN                        PA1   // TB
 #define TEMP_0_PIN                          PA0   // TH1
 
 #define FIL_RUNOUT_PIN                      PB10  // MT_DET
 
 //
 // Power Supply Control
 //
-#if ENABLED(PSU_CONTROL)                          // MKSPWC
-  #ifndef PS_ON_PIN
-    #define PS_ON_PIN                       PA14  // PW_OFF
-  #endif
-  #ifndef KILL_PIN
-    #define KILL_PIN                        PB10  // PW_DET
-    #define KILL_PIN_STATE                  HIGH
-  #endif
+#if ENABLED(MKS_PWC)
+  #define PS_ON_PIN                         PA14  // PW_OFF
+  #define KILL_PIN                          PB10  // PW_DET
+  #define KILL_PIN_STATE                    HIGH
 #endif
 
 /**
  *                _____                                      _____                                     _____
  *  (BEEPER) PC1 | 1 2 | PC3 (BTN_ENC)          (MISO) PB14 | 1 2 | PB13 (SD_SCK)                  5V | 1 2 | GND
  *  (LCD_EN) PA4 | 3 4 | PA5 (LCD_RS)        (BTN_EN1) PB11 | 3 4 | PA15 (SD_SS)         (LCD_EN) PA4 | 3 4 | PA5  (LCD_RS)
  *  (LCD_D4) PA6 | 5 6   PA7 (LCD_D5)        (BTN_EN2)  PB0 | 5 6   PB15 (SD_MOSI)       (LCD_D4) PA6 | 5 6   PB0  (BTN_EN2)
  *  (LCD_D6) PC4 | 7 8 | PC5 (LCD_D7)      (SD_DETECT) PC10 | 7 8 | RESET                       RESET | 7 8 | PB11 (BTN_EN1)
  *           GND | 9 10| 5V                             GND | 9 10| NC                  (BTN_ENC) PC3 | 9 10| PC1  (BEEPER)
  *                -----                                      -----                                     -----

commit c1a533b45e21c43eda6fedb9679976747bca6845
Author: mks-viva <1224833100@qq.com>
Date:   Sat Aug 7 22:17:43 2021 -0500

    üìå MKS pins for PSU_CONTROL (#22528)

diff --git a/Marlin/src/pins/stm32f1/pins_MKS_ROBIN_E3_common.h b/Marlin/src/pins/stm32f1/pins_MKS_ROBIN_E3_common.h
index 44c35b9d04..da7ba05795 100644
--- a/Marlin/src/pins/stm32f1/pins_MKS_ROBIN_E3_common.h
+++ b/Marlin/src/pins/stm32f1/pins_MKS_ROBIN_E3_common.h
@@ -119,20 +119,33 @@
 #define HEATER_BED_PIN                      PC8
 
 //
 // Temperature Sensors
 //
 #define TEMP_BED_PIN                        PA1   // TB
 #define TEMP_0_PIN                          PA0   // TH1
 
 #define FIL_RUNOUT_PIN                      PB10  // MT_DET
 
+//
+// Power Supply Control
+//
+#if ENABLED(PSU_CONTROL)                          // MKSPWC
+  #ifndef PS_ON_PIN
+    #define PS_ON_PIN                       PA14  // PW_OFF
+  #endif
+  #ifndef KILL_PIN
+    #define KILL_PIN                        PB10  // PW_DET
+    #define KILL_PIN_STATE                  HIGH
+  #endif
+#endif
+
 /**
  *                _____                                      _____                                     _____
  *  (BEEPER) PC1 | 1 2 | PC3 (BTN_ENC)          (MISO) PB14 | 1 2 | PB13 (SD_SCK)                  5V | 1 2 | GND
  *  (LCD_EN) PA4 | 3 4 | PA5 (LCD_RS)        (BTN_EN1) PB11 | 3 4 | PA15 (SD_SS)         (LCD_EN) PA4 | 3 4 | PA5  (LCD_RS)
  *  (LCD_D4) PA6 | 5 6   PA7 (LCD_D5)        (BTN_EN2)  PB0 | 5 6   PB15 (SD_MOSI)       (LCD_D4) PA6 | 5 6   PB0  (BTN_EN2)
  *  (LCD_D6) PC4 | 7 8 | PC5 (LCD_D7)      (SD_DETECT) PC10 | 7 8 | RESET                       RESET | 7 8 | PB11 (BTN_EN1)
  *           GND | 9 10| 5V                             GND | 9 10| NC                  (BTN_ENC) PC3 | 9 10| PC1  (BEEPER)
  *                -----                                      -----                                     -----
  *                EXP1                                       EXP2                                      EXP3
  */
@@ -151,21 +164,21 @@
     #define LCD_BACKLIGHT_PIN               -1
     #define LCD_RESET_PIN                   -1
     #define DOGLCD_A0                       PC4
     #define DOGLCD_CS                       PA7
     #define DOGLCD_SCK                      PB13
     #define DOGLCD_MOSI                     PB15
 
   #elif ENABLED(MKS_MINI_12864_V3)
     #define DOGLCD_CS                       PA4
     #define DOGLCD_A0                       PA5
-    #define LCD_PINS_DC                     DOGLCD_A0
+    #define LCD_PINS_DC                DOGLCD_A0
     #define LCD_BACKLIGHT_PIN               -1
     #define LCD_RESET_PIN                   PA6
     #define NEOPIXEL_PIN                    PA7
     #define DOGLCD_MOSI                     PB15
     #define DOGLCD_SCK                      PB13
     #define FORCE_SOFT_SPI
     #define SOFTWARE_SPI
 	//#define LCD_SCREEN_ROT_180
 
   #else
@@ -182,22 +195,22 @@
 
     #endif
 
   #endif // !MKS_MINI_12864
 
 #endif // HAS_WIRED_LCD
 
 //
 // SD Card
 //
-#define SPI_DEVICE                          2
-#define ONBOARD_SPI_DEVICE                  2
+#define SPI_DEVICE                             2
+#define ONBOARD_SPI_DEVICE                     2
 #define SDSS                           SD_SS_PIN
 #define SDCARD_CONNECTION                ONBOARD
 #define SD_DETECT_PIN                       PC10
 #define ONBOARD_SD_CS_PIN              SD_SS_PIN
 #define NO_SD_HOST_DRIVE
 
 // TODO: This is the only way to set SPI for SD on STM32 (for now)
 #define ENABLE_SPI2
 #define SD_SCK_PIN                          PB13
 #define SD_MISO_PIN                         PB14

commit a70d0726caf0c3a235c1bf9047833d60b45189ed
Author: mks-viva <1224833100@qq.com>
Date:   Wed Jul 28 21:56:22 2021 -0500

    üì∫ MKS MINI12864 V3 for Robin E3P, etc. (#22453)

diff --git a/Marlin/src/pins/stm32f1/pins_MKS_ROBIN_E3_common.h b/Marlin/src/pins/stm32f1/pins_MKS_ROBIN_E3_common.h
index b5d02942f3..44c35b9d04 100644
--- a/Marlin/src/pins/stm32f1/pins_MKS_ROBIN_E3_common.h
+++ b/Marlin/src/pins/stm32f1/pins_MKS_ROBIN_E3_common.h
@@ -159,20 +159,21 @@
     #define DOGLCD_CS                       PA4
     #define DOGLCD_A0                       PA5
     #define LCD_PINS_DC                     DOGLCD_A0
     #define LCD_BACKLIGHT_PIN               -1
     #define LCD_RESET_PIN                   PA6
     #define NEOPIXEL_PIN                    PA7
     #define DOGLCD_MOSI                     PB15
     #define DOGLCD_SCK                      PB13
     #define FORCE_SOFT_SPI
     #define SOFTWARE_SPI
+	//#define LCD_SCREEN_ROT_180
 
   #else
 
     #define LCD_PINS_D4                     PA6
     #if IS_ULTIPANEL
       #define LCD_PINS_D5                   PA7
       #define LCD_PINS_D6                   PC4
       #define LCD_PINS_D7                   PC5
 
       #if !defined(BTN_ENC_EN) && ENABLED(REPRAP_DISCOUNT_FULL_GRAPHIC_SMART_CONTROLLER)

commit be1801703c4510dcd523de811e9dcff576b4caad
Author: Scott Lahteine <github@thinkyhead.com>
Date:   Sat Jul 17 03:10:54 2021 -0500

    üé® Add MMU2 enabled() accessor

diff --git a/Marlin/src/pins/stm32f1/pins_MKS_ROBIN_E3_common.h b/Marlin/src/pins/stm32f1/pins_MKS_ROBIN_E3_common.h
index bc47c9169f..b5d02942f3 100644
--- a/Marlin/src/pins/stm32f1/pins_MKS_ROBIN_E3_common.h
+++ b/Marlin/src/pins/stm32f1/pins_MKS_ROBIN_E3_common.h
@@ -159,21 +159,21 @@
     #define DOGLCD_CS                       PA4
     #define DOGLCD_A0                       PA5
     #define LCD_PINS_DC                     DOGLCD_A0
     #define LCD_BACKLIGHT_PIN               -1
     #define LCD_RESET_PIN                   PA6
     #define NEOPIXEL_PIN                    PA7
     #define DOGLCD_MOSI                     PB15
     #define DOGLCD_SCK                      PB13
     #define FORCE_SOFT_SPI
     #define SOFTWARE_SPI
-    
+
   #else
 
     #define LCD_PINS_D4                     PA6
     #if IS_ULTIPANEL
       #define LCD_PINS_D5                   PA7
       #define LCD_PINS_D6                   PC4
       #define LCD_PINS_D7                   PC5
 
       #if !defined(BTN_ENC_EN) && ENABLED(REPRAP_DISCOUNT_FULL_GRAPHIC_SMART_CONTROLLER)
         #define BTN_ENC_EN           LCD_PINS_D7  // Detect the presence of the encoder

commit 5d6317329786f5d01eb6734b4c5e664a2fe9e6ba
Author: mks-viva <1224833100@qq.com>
Date:   Thu Jul 15 20:57:34 2021 -0500

    ‚ú® MKS Mini12864 v3 for Robin E3/E3D (#22368)

diff --git a/Marlin/src/pins/stm32f1/pins_MKS_ROBIN_E3_common.h b/Marlin/src/pins/stm32f1/pins_MKS_ROBIN_E3_common.h
index 127dfb7c7a..bc47c9169f 100644
--- a/Marlin/src/pins/stm32f1/pins_MKS_ROBIN_E3_common.h
+++ b/Marlin/src/pins/stm32f1/pins_MKS_ROBIN_E3_common.h
@@ -149,30 +149,31 @@
   #if ENABLED(MKS_MINI_12864)
 
     #define LCD_BACKLIGHT_PIN               -1
     #define LCD_RESET_PIN                   -1
     #define DOGLCD_A0                       PC4
     #define DOGLCD_CS                       PA7
     #define DOGLCD_SCK                      PB13
     #define DOGLCD_MOSI                     PB15
 
   #elif ENABLED(MKS_MINI_12864_V3)
-    #define ENABLE_SPI3
     #define DOGLCD_CS                       PA4
     #define DOGLCD_A0                       PA5
     #define LCD_PINS_DC                     DOGLCD_A0
     #define LCD_BACKLIGHT_PIN               -1
     #define LCD_RESET_PIN                   PA6
     #define NEOPIXEL_PIN                    PA7
     #define DOGLCD_MOSI                     PB15
     #define DOGLCD_SCK                      PB13
-
+    #define FORCE_SOFT_SPI
+    #define SOFTWARE_SPI
+    
   #else
 
     #define LCD_PINS_D4                     PA6
     #if IS_ULTIPANEL
       #define LCD_PINS_D5                   PA7
       #define LCD_PINS_D6                   PC4
       #define LCD_PINS_D7                   PC5
 
       #if !defined(BTN_ENC_EN) && ENABLED(REPRAP_DISCOUNT_FULL_GRAPHIC_SMART_CONTROLLER)
         #define BTN_ENC_EN           LCD_PINS_D7  // Detect the presence of the encoder

commit 938d86d1c5512a39ac2527b497a0875d742d17e9
Author: mks-viva <1224833100@qq.com>
Date:   Fri Jul 9 17:59:36 2021 -0500

    ‚ú® MKS MINI12864 V3 for MKS Robin Nano V2/3 (#22285)

diff --git a/Marlin/src/pins/stm32f1/pins_MKS_ROBIN_E3_common.h b/Marlin/src/pins/stm32f1/pins_MKS_ROBIN_E3_common.h
index b482065666..127dfb7c7a 100644
--- a/Marlin/src/pins/stm32f1/pins_MKS_ROBIN_E3_common.h
+++ b/Marlin/src/pins/stm32f1/pins_MKS_ROBIN_E3_common.h
@@ -148,20 +148,31 @@
   // MKS MINI12864 and MKS LCD12864B; If using MKS LCD12864A (Need to remove RPK2 resistor)
   #if ENABLED(MKS_MINI_12864)
 
     #define LCD_BACKLIGHT_PIN               -1
     #define LCD_RESET_PIN                   -1
     #define DOGLCD_A0                       PC4
     #define DOGLCD_CS                       PA7
     #define DOGLCD_SCK                      PB13
     #define DOGLCD_MOSI                     PB15
 
+  #elif ENABLED(MKS_MINI_12864_V3)
+    #define ENABLE_SPI3
+    #define DOGLCD_CS                       PA4
+    #define DOGLCD_A0                       PA5
+    #define LCD_PINS_DC                     DOGLCD_A0
+    #define LCD_BACKLIGHT_PIN               -1
+    #define LCD_RESET_PIN                   PA6
+    #define NEOPIXEL_PIN                    PA7
+    #define DOGLCD_MOSI                     PB15
+    #define DOGLCD_SCK                      PB13
+
   #else
 
     #define LCD_PINS_D4                     PA6
     #if IS_ULTIPANEL
       #define LCD_PINS_D5                   PA7
       #define LCD_PINS_D6                   PC4
       #define LCD_PINS_D7                   PC5
 
       #if !defined(BTN_ENC_EN) && ENABLED(REPRAP_DISCOUNT_FULL_GRAPHIC_SMART_CONTROLLER)
         #define BTN_ENC_EN           LCD_PINS_D7  // Detect the presence of the encoder

commit ce5dece3b57ad2fe36347530a6de79a3848736f4
Author: Victor Oliveira <rhapsodyv@gmail.com>
Date:   Sun Jun 6 02:59:19 2021 -0300

    ‚ö∞Ô∏è Remove obsolete CUSTOM_SPI_PINS (#22058)

diff --git a/Marlin/src/pins/stm32f1/pins_MKS_ROBIN_E3_common.h b/Marlin/src/pins/stm32f1/pins_MKS_ROBIN_E3_common.h
index 6369fcd31b..b482065666 100644
--- a/Marlin/src/pins/stm32f1/pins_MKS_ROBIN_E3_common.h
+++ b/Marlin/src/pins/stm32f1/pins_MKS_ROBIN_E3_common.h
@@ -179,21 +179,20 @@
 #define SPI_DEVICE                          2
 #define ONBOARD_SPI_DEVICE                  2
 #define SDSS                           SD_SS_PIN
 #define SDCARD_CONNECTION                ONBOARD
 #define SD_DETECT_PIN                       PC10
 #define ONBOARD_SD_CS_PIN              SD_SS_PIN
 #define NO_SD_HOST_DRIVE
 
 // TODO: This is the only way to set SPI for SD on STM32 (for now)
 #define ENABLE_SPI2
-#define CUSTOM_SPI_PINS
 #define SD_SCK_PIN                          PB13
 #define SD_MISO_PIN                         PB14
 #define SD_MOSI_PIN                         PB15
 #define SD_SS_PIN                           PA15
 
 #ifndef BOARD_ST7920_DELAY_1
   #define BOARD_ST7920_DELAY_1     DELAY_NS(125)
 #endif
 #ifndef BOARD_ST7920_DELAY_2
   #define BOARD_ST7920_DELAY_2     DELAY_NS(125)

commit 6131d2c5a6285da849fbb8d3e592f89518b02b24
Author: ldursw <37294448+ldursw@users.noreply.github.com>
Date:   Fri Jun 4 00:38:10 2021 -0300

    üî® MKS Robin E3 for HAL/STM32 (#21927)

diff --git a/Marlin/src/pins/stm32f1/pins_MKS_ROBIN_E3_common.h b/Marlin/src/pins/stm32f1/pins_MKS_ROBIN_E3_common.h
index da7bdc79e5..6369fcd31b 100644
--- a/Marlin/src/pins/stm32f1/pins_MKS_ROBIN_E3_common.h
+++ b/Marlin/src/pins/stm32f1/pins_MKS_ROBIN_E3_common.h
@@ -169,22 +169,31 @@
 
     #endif
 
   #endif // !MKS_MINI_12864
 
 #endif // HAS_WIRED_LCD
 
 //
 // SD Card
 //
-#define SPI_DEVICE                             2
+#define SPI_DEVICE                          2
+#define ONBOARD_SPI_DEVICE                  2
+#define SDSS                           SD_SS_PIN
+#define SDCARD_CONNECTION                ONBOARD
 #define SD_DETECT_PIN                       PC10
+#define ONBOARD_SD_CS_PIN              SD_SS_PIN
+#define NO_SD_HOST_DRIVE
+
+// TODO: This is the only way to set SPI for SD on STM32 (for now)
+#define ENABLE_SPI2
+#define CUSTOM_SPI_PINS
 #define SD_SCK_PIN                          PB13
 #define SD_MISO_PIN                         PB14
 #define SD_MOSI_PIN                         PB15
 #define SD_SS_PIN                           PA15
 
 #ifndef BOARD_ST7920_DELAY_1
   #define BOARD_ST7920_DELAY_1     DELAY_NS(125)
 #endif
 #ifndef BOARD_ST7920_DELAY_2
   #define BOARD_ST7920_DELAY_2     DELAY_NS(125)

commit 3ea56ba4c72fb1e9c4bb4a896b8cf87361a48f4b
Author: Scott Lahteine <thinkyhead@users.noreply.github.com>
Date:   Fri Mar 5 04:30:52 2021 -0600

    Tweak tests, consolidate pins target validation (#21254)

diff --git a/Marlin/src/pins/stm32f1/pins_MKS_ROBIN_E3_common.h b/Marlin/src/pins/stm32f1/pins_MKS_ROBIN_E3_common.h
index c4a7e9f408..da7bdc79e5 100644
--- a/Marlin/src/pins/stm32f1/pins_MKS_ROBIN_E3_common.h
+++ b/Marlin/src/pins/stm32f1/pins_MKS_ROBIN_E3_common.h
@@ -18,23 +18,21 @@
  * You should have received a copy of the GNU General Public License
  * along with this program.  If not, see <https://www.gnu.org/licenses/>.
  *
  */
 #pragma once
 
 /**
  * MKS Robin E3 & E3D (STM32F103RCT6) common board pin assignments
  */
 
-#if NOT_TARGET(__STM32F1__)
-  #error "Oops! Select an STM32F1 board in 'Tools > Board.'"
-#endif
+#include "env_validate.h"
 
 #define BOARD_NO_NATIVE_USB
 
 #define BOARD_WEBSITE_URL "github.com/makerbase-mks"
 
 //#define DISABLE_DEBUG
 #define DISABLE_JTAG
 
 //
 // EEPROM

commit c840bbc970c2684c2c9c193ee967c03dd621d99a
Author: Victor Oliveira <rhapsodyv@gmail.com>
Date:   Fri Jan 1 17:31:15 2021 -0300

    Prefix SD SPI pins (SCK, MISO, MOSI, SS) (#20606)
    
    Co-authored-by: Scott Lahteine <thinkyhead@users.noreply.github.com>

diff --git a/Marlin/src/pins/stm32f1/pins_MKS_ROBIN_E3_common.h b/Marlin/src/pins/stm32f1/pins_MKS_ROBIN_E3_common.h
index 66d90e0194..c4a7e9f408 100644
--- a/Marlin/src/pins/stm32f1/pins_MKS_ROBIN_E3_common.h
+++ b/Marlin/src/pins/stm32f1/pins_MKS_ROBIN_E3_common.h
@@ -173,24 +173,24 @@
 
   #endif // !MKS_MINI_12864
 
 #endif // HAS_WIRED_LCD
 
 //
 // SD Card
 //
 #define SPI_DEVICE                             2
 #define SD_DETECT_PIN                       PC10
-#define SCK_PIN                             PB13
-#define MISO_PIN                            PB14
-#define MOSI_PIN                            PB15
-#define SS_PIN                              PA15
+#define SD_SCK_PIN                          PB13
+#define SD_MISO_PIN                         PB14
+#define SD_MOSI_PIN                         PB15
+#define SD_SS_PIN                           PA15
 
 #ifndef BOARD_ST7920_DELAY_1
   #define BOARD_ST7920_DELAY_1     DELAY_NS(125)
 #endif
 #ifndef BOARD_ST7920_DELAY_2
   #define BOARD_ST7920_DELAY_2     DELAY_NS(125)
 #endif
 #ifndef BOARD_ST7920_DELAY_3
   #define BOARD_ST7920_DELAY_3     DELAY_NS(125)
 #endif

commit c7ecfe28e7ee83e88c180d4f6a859969513c599f
Author: Scott Lahteine <thinkyhead@users.noreply.github.com>
Date:   Mon Dec 21 17:36:15 2020 -0600

    Clean up some pins

diff --git a/Marlin/src/pins/stm32f1/pins_MKS_ROBIN_E3_common.h b/Marlin/src/pins/stm32f1/pins_MKS_ROBIN_E3_common.h
index 1362d22086..66d90e0194 100644
--- a/Marlin/src/pins/stm32f1/pins_MKS_ROBIN_E3_common.h
+++ b/Marlin/src/pins/stm32f1/pins_MKS_ROBIN_E3_common.h
@@ -75,21 +75,21 @@
 #endif
 #ifndef Z_DIR_PIN
   #define Z_DIR_PIN                         PB6
 #endif
 #define Z_ENABLE_PIN                        PB8
 
 #define E0_STEP_PIN                         PB4
 #define E0_DIR_PIN                          PB3
 #define E0_ENABLE_PIN                       PB5
 
-#if HAS_TMC220x
+#if HAS_TMC_UART
   /**
    * TMC2208/TMC2209 stepper drivers
    *
    * Hardware serial communication ports.
    * If undefined software serial is used according to the pins below
    */
   //#define X_HARDWARE_SERIAL  MSerial1
   //#define Y_HARDWARE_SERIAL  MSerial1
   //#define Z_HARDWARE_SERIAL  MSerial1
   //#define E0_HARDWARE_SERIAL MSerial1

commit 8c59212ca46a3a9f721b2216bb538c0b42a3992f
Author: mks-viva <1224833100@qq.com>
Date:   Thu Nov 26 16:36:29 2020 +0800

    MKS Robin E3 / E3D v1.1 (#20216)

diff --git a/Marlin/src/pins/stm32f1/pins_MKS_ROBIN_E3_common.h b/Marlin/src/pins/stm32f1/pins_MKS_ROBIN_E3_common.h
index c2b7e52067..1362d22086 100644
--- a/Marlin/src/pins/stm32f1/pins_MKS_ROBIN_E3_common.h
+++ b/Marlin/src/pins/stm32f1/pins_MKS_ROBIN_E3_common.h
@@ -63,22 +63,26 @@
 // Steppers
 //
 #define X_STEP_PIN                          PC0
 #define X_DIR_PIN                           PB2
 #define X_ENABLE_PIN                        PC13
 
 #define Y_STEP_PIN                          PC2
 #define Y_DIR_PIN                           PB9
 #define Y_ENABLE_PIN                        PB12
 
-#define Z_STEP_PIN                          PB7
-#define Z_DIR_PIN                           PB6
+#ifndef Z_STEP_PIN
+  #define Z_STEP_PIN                        PB7
+#endif
+#ifndef Z_DIR_PIN
+  #define Z_DIR_PIN                         PB6
+#endif
 #define Z_ENABLE_PIN                        PB8
 
 #define E0_STEP_PIN                         PB4
 #define E0_DIR_PIN                          PB3
 #define E0_ENABLE_PIN                       PB5
 
 #if HAS_TMC220x
   /**
    * TMC2208/TMC2209 stepper drivers
    *
@@ -154,21 +158,21 @@
     #define DOGLCD_MOSI                     PB15
 
   #else
 
     #define LCD_PINS_D4                     PA6
     #if IS_ULTIPANEL
       #define LCD_PINS_D5                   PA7
       #define LCD_PINS_D6                   PC4
       #define LCD_PINS_D7                   PC5
 
-      #if ENABLED(REPRAP_DISCOUNT_FULL_GRAPHIC_SMART_CONTROLLER)
+      #if !defined(BTN_ENC_EN) && ENABLED(REPRAP_DISCOUNT_FULL_GRAPHIC_SMART_CONTROLLER)
         #define BTN_ENC_EN           LCD_PINS_D7  // Detect the presence of the encoder
       #endif
 
     #endif
 
   #endif // !MKS_MINI_12864
 
 #endif // HAS_WIRED_LCD
 
 //

commit 6851909f9031ab79fb5ab4492189edac85904496
Author: Gurmeet Athwal <gurmeet.athwal@gmail.com>
Date:   Sat Nov 21 13:17:04 2020 +0530

    BTN_ENC_EN for many boards (#19890)
    
    Enables CHECK_ENCODER_ACTIVE_SIGNAL for many more boards.
    
    Co-authored-by: Scott Lahteine <thinkyhead@users.noreply.github.com>
    Co-authored-by: Jason Smith <jason.inet@gmail.com>

diff --git a/Marlin/src/pins/stm32f1/pins_MKS_ROBIN_E3_common.h b/Marlin/src/pins/stm32f1/pins_MKS_ROBIN_E3_common.h
index 2dcd7780af..c2b7e52067 100644
--- a/Marlin/src/pins/stm32f1/pins_MKS_ROBIN_E3_common.h
+++ b/Marlin/src/pins/stm32f1/pins_MKS_ROBIN_E3_common.h
@@ -153,20 +153,25 @@
     #define DOGLCD_SCK                      PB13
     #define DOGLCD_MOSI                     PB15
 
   #else
 
     #define LCD_PINS_D4                     PA6
     #if IS_ULTIPANEL
       #define LCD_PINS_D5                   PA7
       #define LCD_PINS_D6                   PC4
       #define LCD_PINS_D7                   PC5
+
+      #if ENABLED(REPRAP_DISCOUNT_FULL_GRAPHIC_SMART_CONTROLLER)
+        #define BTN_ENC_EN           LCD_PINS_D7  // Detect the presence of the encoder
+      #endif
+
     #endif
 
   #endif // !MKS_MINI_12864
 
 #endif // HAS_WIRED_LCD
 
 //
 // SD Card
 //
 #define SPI_DEVICE                             2

commit a439892d7a50fba1de9c30ffe22e73600f54952f
Author: Jason Smith <jason.inet@gmail.com>
Date:   Fri Nov 6 22:48:17 2020 -0800

    Sanity-check illegal native USB (#20047)
    
    Co-authored-by: Scott Lahteine <thinkyhead@users.noreply.github.com>

diff --git a/Marlin/src/pins/stm32f1/pins_MKS_ROBIN_E3_common.h b/Marlin/src/pins/stm32f1/pins_MKS_ROBIN_E3_common.h
index ffcdc3cfdf..2dcd7780af 100644
--- a/Marlin/src/pins/stm32f1/pins_MKS_ROBIN_E3_common.h
+++ b/Marlin/src/pins/stm32f1/pins_MKS_ROBIN_E3_common.h
@@ -22,20 +22,22 @@
 #pragma once
 
 /**
  * MKS Robin E3 & E3D (STM32F103RCT6) common board pin assignments
  */
 
 #if NOT_TARGET(__STM32F1__)
   #error "Oops! Select an STM32F1 board in 'Tools > Board.'"
 #endif
 
+#define BOARD_NO_NATIVE_USB
+
 #define BOARD_WEBSITE_URL "github.com/makerbase-mks"
 
 //#define DISABLE_DEBUG
 #define DISABLE_JTAG
 
 //
 // EEPROM
 //
 #if EITHER(NO_EEPROM_SELECTED, FLASH_EEPROM_EMULATION)
   #define FLASH_EEPROM_EMULATION

commit 22bf2b49c64ad1e767a9fa9249c40e7ca33f032d
Author: Scott Lahteine <thinkyhead@users.noreply.github.com>
Date:   Sun Nov 1 04:40:59 2020 -0600

    Clean up SPI and ST7920 defines (#19956)

diff --git a/Marlin/src/pins/stm32f1/pins_MKS_ROBIN_E3_common.h b/Marlin/src/pins/stm32f1/pins_MKS_ROBIN_E3_common.h
index af2908545b..ffcdc3cfdf 100644
--- a/Marlin/src/pins/stm32f1/pins_MKS_ROBIN_E3_common.h
+++ b/Marlin/src/pins/stm32f1/pins_MKS_ROBIN_E3_common.h
@@ -160,21 +160,21 @@
       #define LCD_PINS_D7                   PC5
     #endif
 
   #endif // !MKS_MINI_12864
 
 #endif // HAS_WIRED_LCD
 
 //
 // SD Card
 //
-#define ENABLE_SPI2
+#define SPI_DEVICE                             2
 #define SD_DETECT_PIN                       PC10
 #define SCK_PIN                             PB13
 #define MISO_PIN                            PB14
 #define MOSI_PIN                            PB15
 #define SS_PIN                              PA15
 
 #ifndef BOARD_ST7920_DELAY_1
   #define BOARD_ST7920_DELAY_1     DELAY_NS(125)
 #endif
 #ifndef BOARD_ST7920_DELAY_2

commit f6ffbe548c81abfeecc996c8f2bffd27cabe0014
Author: Scott Lahteine <thinkyhead@users.noreply.github.com>
Date:   Thu Oct 15 03:00:27 2020 -0500

    TFT Presets, Generic options, Sanity checks (#19723)

diff --git a/Marlin/src/pins/stm32f1/pins_MKS_ROBIN_E3_common.h b/Marlin/src/pins/stm32f1/pins_MKS_ROBIN_E3_common.h
index 015e29bdbe..af2908545b 100644
--- a/Marlin/src/pins/stm32f1/pins_MKS_ROBIN_E3_common.h
+++ b/Marlin/src/pins/stm32f1/pins_MKS_ROBIN_E3_common.h
@@ -147,21 +147,21 @@
     #define LCD_BACKLIGHT_PIN               -1
     #define LCD_RESET_PIN                   -1
     #define DOGLCD_A0                       PC4
     #define DOGLCD_CS                       PA7
     #define DOGLCD_SCK                      PB13
     #define DOGLCD_MOSI                     PB15
 
   #else
 
     #define LCD_PINS_D4                     PA6
-    #if ENABLED(ULTIPANEL)
+    #if IS_ULTIPANEL
       #define LCD_PINS_D5                   PA7
       #define LCD_PINS_D6                   PC4
       #define LCD_PINS_D7                   PC5
     #endif
 
   #endif // !MKS_MINI_12864
 
 #endif // HAS_WIRED_LCD
 
 //

commit c2c6a679ea4bdf48ce1800a8831fcec36c09ce53
Author: Scott Lahteine <thinkyhead@users.noreply.github.com>
Date:   Mon Sep 28 01:13:27 2020 -0500

    Rename LCD conditionals (#19533)

diff --git a/Marlin/src/pins/stm32f1/pins_MKS_ROBIN_E3_common.h b/Marlin/src/pins/stm32f1/pins_MKS_ROBIN_E3_common.h
index bbacbf5585..015e29bdbe 100644
--- a/Marlin/src/pins/stm32f1/pins_MKS_ROBIN_E3_common.h
+++ b/Marlin/src/pins/stm32f1/pins_MKS_ROBIN_E3_common.h
@@ -125,21 +125,21 @@
 /**
  *                _____                                      _____                                     _____
  *  (BEEPER) PC1 | 1 2 | PC3 (BTN_ENC)          (MISO) PB14 | 1 2 | PB13 (SD_SCK)                  5V | 1 2 | GND
  *  (LCD_EN) PA4 | 3 4 | PA5 (LCD_RS)        (BTN_EN1) PB11 | 3 4 | PA15 (SD_SS)         (LCD_EN) PA4 | 3 4 | PA5  (LCD_RS)
  *  (LCD_D4) PA6 | 5 6   PA7 (LCD_D5)        (BTN_EN2)  PB0 | 5 6   PB15 (SD_MOSI)       (LCD_D4) PA6 | 5 6   PB0  (BTN_EN2)
  *  (LCD_D6) PC4 | 7 8 | PC5 (LCD_D7)      (SD_DETECT) PC10 | 7 8 | RESET                       RESET | 7 8 | PB11 (BTN_EN1)
  *           GND | 9 10| 5V                             GND | 9 10| NC                  (BTN_ENC) PC3 | 9 10| PC1  (BEEPER)
  *                -----                                      -----                                     -----
  *                EXP1                                       EXP2                                      EXP3
  */
-#if HAS_SPI_LCD
+#if HAS_WIRED_LCD
 
   #define BEEPER_PIN                        PC1
   #define BTN_ENC                           PC3
   #define LCD_PINS_ENABLE                   PA4
   #define LCD_PINS_RS                       PA5
   #define BTN_EN1                           PB11
   #define BTN_EN2                           PB0
 
   // MKS MINI12864 and MKS LCD12864B; If using MKS LCD12864A (Need to remove RPK2 resistor)
   #if ENABLED(MKS_MINI_12864)
@@ -155,21 +155,21 @@
 
     #define LCD_PINS_D4                     PA6
     #if ENABLED(ULTIPANEL)
       #define LCD_PINS_D5                   PA7
       #define LCD_PINS_D6                   PC4
       #define LCD_PINS_D7                   PC5
     #endif
 
   #endif // !MKS_MINI_12864
 
-#endif // HAS_SPI_LCD
+#endif // HAS_WIRED_LCD
 
 //
 // SD Card
 //
 #define ENABLE_SPI2
 #define SD_DETECT_PIN                       PC10
 #define SCK_PIN                             PB13
 #define MISO_PIN                            PB14
 #define MOSI_PIN                            PB15
 #define SS_PIN                              PA15

commit 4b928b2da8ae26bd4a949debe470a914e23545ca
Author: Scott Lahteine <thinkyhead@users.noreply.github.com>
Date:   Wed Sep 23 19:45:33 2020 -0500

    HAL and serial cleanup
    
    Co-Authored-By: Jason Smith <20053467+sjasonsmith@users.noreply.github.com>

diff --git a/Marlin/src/pins/stm32f1/pins_MKS_ROBIN_E3_common.h b/Marlin/src/pins/stm32f1/pins_MKS_ROBIN_E3_common.h
index f6a3b555c3..bbacbf5585 100644
--- a/Marlin/src/pins/stm32f1/pins_MKS_ROBIN_E3_common.h
+++ b/Marlin/src/pins/stm32f1/pins_MKS_ROBIN_E3_common.h
@@ -76,24 +76,24 @@
 #define E0_DIR_PIN                          PB3
 #define E0_ENABLE_PIN                       PB5
 
 #if HAS_TMC220x
   /**
    * TMC2208/TMC2209 stepper drivers
    *
    * Hardware serial communication ports.
    * If undefined software serial is used according to the pins below
    */
-  //#define X_HARDWARE_SERIAL  Serial1
-  //#define Y_HARDWARE_SERIAL  Serial1
-  //#define Z_HARDWARE_SERIAL  Serial1
-  //#define E0_HARDWARE_SERIAL Serial1
+  //#define X_HARDWARE_SERIAL  MSerial1
+  //#define Y_HARDWARE_SERIAL  MSerial1
+  //#define Z_HARDWARE_SERIAL  MSerial1
+  //#define E0_HARDWARE_SERIAL MSerial1
 
   //
   // Software serial
   //
   #define X_SERIAL_TX_PIN                   PC7
   #define X_SERIAL_RX_PIN                   PC7
 
   #define Y_SERIAL_TX_PIN                   PD2
   #define Y_SERIAL_RX_PIN                   PD2
 

commit 90bc1993b6811623dd9d0de00251e0c63415cb49
Author: Victor Oliveira <rhapsodyv@gmail.com>
Date:   Wed Sep 23 17:06:36 2020 -0300

    Include pins.h in dependencies script (#19468)

diff --git a/Marlin/src/pins/stm32f1/pins_MKS_ROBIN_E3_common.h b/Marlin/src/pins/stm32f1/pins_MKS_ROBIN_E3_common.h
index 9461a828af..f6a3b555c3 100644
--- a/Marlin/src/pins/stm32f1/pins_MKS_ROBIN_E3_common.h
+++ b/Marlin/src/pins/stm32f1/pins_MKS_ROBIN_E3_common.h
@@ -18,21 +18,21 @@
  * You should have received a copy of the GNU General Public License
  * along with this program.  If not, see <https://www.gnu.org/licenses/>.
  *
  */
 #pragma once
 
 /**
  * MKS Robin E3 & E3D (STM32F103RCT6) common board pin assignments
  */
 
-#ifndef __STM32F1__
+#if NOT_TARGET(__STM32F1__)
   #error "Oops! Select an STM32F1 board in 'Tools > Board.'"
 #endif
 
 #define BOARD_WEBSITE_URL "github.com/makerbase-mks"
 
 //#define DISABLE_DEBUG
 #define DISABLE_JTAG
 
 //
 // EEPROM

commit 486731162faae9f374d0038a2e87f3b2204ae78e
Author: Victor Oliveira <rhapsodyv@gmail.com>
Date:   Sun Sep 6 19:29:43 2020 -0300

    Fix STM32F1 SPI device init, MKS_LCD12864 (#19271)

diff --git a/Marlin/src/pins/stm32f1/pins_MKS_ROBIN_E3_common.h b/Marlin/src/pins/stm32f1/pins_MKS_ROBIN_E3_common.h
index 1346e8099a..9461a828af 100644
--- a/Marlin/src/pins/stm32f1/pins_MKS_ROBIN_E3_common.h
+++ b/Marlin/src/pins/stm32f1/pins_MKS_ROBIN_E3_common.h
@@ -26,21 +26,20 @@
  */
 
 #ifndef __STM32F1__
   #error "Oops! Select an STM32F1 board in 'Tools > Board.'"
 #endif
 
 #define BOARD_WEBSITE_URL "github.com/makerbase-mks"
 
 //#define DISABLE_DEBUG
 #define DISABLE_JTAG
-#define ENABLE_SPI2
 
 //
 // EEPROM
 //
 #if EITHER(NO_EEPROM_SELECTED, FLASH_EEPROM_EMULATION)
   #define FLASH_EEPROM_EMULATION
   #define EEPROM_PAGE_SIZE     (0x800U)           // 2KB
   #define EEPROM_START_ADDRESS (0x8000000UL + (STM32_FLASH_SIZE) * 1024UL - (EEPROM_PAGE_SIZE) * 2UL)
   #define MARLIN_EEPROM_SIZE    EEPROM_PAGE_SIZE  // 2KB
 #endif
@@ -145,22 +144,20 @@
   // MKS MINI12864 and MKS LCD12864B; If using MKS LCD12864A (Need to remove RPK2 resistor)
   #if ENABLED(MKS_MINI_12864)
 
     #define LCD_BACKLIGHT_PIN               -1
     #define LCD_RESET_PIN                   -1
     #define DOGLCD_A0                       PC4
     #define DOGLCD_CS                       PA7
     #define DOGLCD_SCK                      PB13
     #define DOGLCD_MOSI                     PB15
 
-    #undef SHOW_BOOTSCREEN
-
   #else
 
     #define LCD_PINS_D4                     PA6
     #if ENABLED(ULTIPANEL)
       #define LCD_PINS_D5                   PA7
       #define LCD_PINS_D6                   PC4
       #define LCD_PINS_D7                   PC5
     #endif
 
   #endif // !MKS_MINI_12864

commit a9f7e855d8c030d0d9f34f950a66824b576548b5
Author: Scott Lahteine <thinkyhead@users.noreply.github.com>
Date:   Sat Aug 22 01:22:14 2020 -0500

    Reformat pins files

diff --git a/Marlin/src/pins/stm32f1/pins_MKS_ROBIN_E3_common.h b/Marlin/src/pins/stm32f1/pins_MKS_ROBIN_E3_common.h
index 0f55de8245..1346e8099a 100644
--- a/Marlin/src/pins/stm32f1/pins_MKS_ROBIN_E3_common.h
+++ b/Marlin/src/pins/stm32f1/pins_MKS_ROBIN_E3_common.h
@@ -98,21 +98,21 @@
   #define Y_SERIAL_TX_PIN                   PD2
   #define Y_SERIAL_RX_PIN                   PD2
 
   #define Z_SERIAL_TX_PIN                   PC12
   #define Z_SERIAL_RX_PIN                   PC12
 
   #define E0_SERIAL_TX_PIN                  PC11
   #define E0_SERIAL_RX_PIN                  PC11
 
   // Reduce baud rate to improve software serial reliability
-  #define TMC_BAUD_RATE 19200
+  #define TMC_BAUD_RATE                    19200
 #endif
 
 //
 // Heaters 0,1 / Fans / Bed
 //
 #define HEATER_0_PIN                        PC9
 #define FAN_PIN                             PA8
 #define HEATER_BED_PIN                      PC8
 
 //

commit 42fbd527f3bcc317ae6851aca5a45bdbf979de55
Author: Diego von Deschwanden <68632259+Diegovd@users.noreply.github.com>
Date:   Thu Jul 23 05:20:14 2020 +0200

    Fix links to secure sites (#18745)

diff --git a/Marlin/src/pins/stm32f1/pins_MKS_ROBIN_E3_common.h b/Marlin/src/pins/stm32f1/pins_MKS_ROBIN_E3_common.h
index 155db5a223..0f55de8245 100644
--- a/Marlin/src/pins/stm32f1/pins_MKS_ROBIN_E3_common.h
+++ b/Marlin/src/pins/stm32f1/pins_MKS_ROBIN_E3_common.h
@@ -9,21 +9,21 @@
  * it under the terms of the GNU General Public License as published by
  * the Free Software Foundation, either version 3 of the License, or
  * (at your option) any later version.
  *
  * This program is distributed in the hope that it will be useful,
  * but WITHOUT ANY WARRANTY; without even the implied warranty of
  * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
  * GNU General Public License for more details.
  *
  * You should have received a copy of the GNU General Public License
- * along with this program.  If not, see <http://www.gnu.org/licenses/>.
+ * along with this program.  If not, see <https://www.gnu.org/licenses/>.
  *
  */
 #pragma once
 
 /**
  * MKS Robin E3 & E3D (STM32F103RCT6) common board pin assignments
  */
 
 #ifndef __STM32F1__
   #error "Oops! Select an STM32F1 board in 'Tools > Board.'"

commit f4e15967e8887b5e0010af73e64a947af0edc40e
Author: Scott Lahteine <github@thinkyhead.com>
Date:   Sun Jun 28 00:12:22 2020 -0500

    Tweak pins formatting

diff --git a/Marlin/src/pins/stm32f1/pins_MKS_ROBIN_E3_common.h b/Marlin/src/pins/stm32f1/pins_MKS_ROBIN_E3_common.h
index 6d09b09aab..155db5a223 100644
--- a/Marlin/src/pins/stm32f1/pins_MKS_ROBIN_E3_common.h
+++ b/Marlin/src/pins/stm32f1/pins_MKS_ROBIN_E3_common.h
@@ -33,21 +33,21 @@
 
 //#define DISABLE_DEBUG
 #define DISABLE_JTAG
 #define ENABLE_SPI2
 
 //
 // EEPROM
 //
 #if EITHER(NO_EEPROM_SELECTED, FLASH_EEPROM_EMULATION)
   #define FLASH_EEPROM_EMULATION
-  #define EEPROM_PAGE_SIZE     (0x800U) // 2KB
+  #define EEPROM_PAGE_SIZE     (0x800U)           // 2KB
   #define EEPROM_START_ADDRESS (0x8000000UL + (STM32_FLASH_SIZE) * 1024UL - (EEPROM_PAGE_SIZE) * 2UL)
   #define MARLIN_EEPROM_SIZE    EEPROM_PAGE_SIZE  // 2KB
 #endif
 
 //
 // Servos
 //
 #define SERVO0_PIN                          PA3
 
 //

commit c3d2ffc09c8a15398894bb2050397b9653878923
Author: Scott Lahteine <github@thinkyhead.com>
Date:   Tue Jun 23 20:37:19 2020 -0500

    Board-based ST7920 delays

diff --git a/Marlin/src/pins/stm32f1/pins_MKS_ROBIN_E3_common.h b/Marlin/src/pins/stm32f1/pins_MKS_ROBIN_E3_common.h
index b575b2483f..6d09b09aab 100644
--- a/Marlin/src/pins/stm32f1/pins_MKS_ROBIN_E3_common.h
+++ b/Marlin/src/pins/stm32f1/pins_MKS_ROBIN_E3_common.h
@@ -170,19 +170,19 @@
 //
 // SD Card
 //
 #define ENABLE_SPI2
 #define SD_DETECT_PIN                       PC10
 #define SCK_PIN                             PB13
 #define MISO_PIN                            PB14
 #define MOSI_PIN                            PB15
 #define SS_PIN                              PA15
 
-#ifndef ST7920_DELAY_1
-  #define ST7920_DELAY_1           DELAY_NS(125)
+#ifndef BOARD_ST7920_DELAY_1
+  #define BOARD_ST7920_DELAY_1     DELAY_NS(125)
 #endif
-#ifndef ST7920_DELAY_2
-  #define ST7920_DELAY_2           DELAY_NS(125)
+#ifndef BOARD_ST7920_DELAY_2
+  #define BOARD_ST7920_DELAY_2     DELAY_NS(125)
 #endif
-#ifndef ST7920_DELAY_3
-  #define ST7920_DELAY_3           DELAY_NS(125)
+#ifndef BOARD_ST7920_DELAY_3
+  #define BOARD_ST7920_DELAY_3     DELAY_NS(125)
 #endif

commit 819e48972d9cb321275a37fcfccaf2a990f4f222
Author: Jason Smith <jason.inet@gmail.com>
Date:   Mon Jun 22 13:27:01 2020 -0700

    Improve U8G+SPI delay override (#18386)
    
    Co-authored-by: Scott Lahteine <github@thinkyhead.com>

diff --git a/Marlin/src/pins/stm32f1/pins_MKS_ROBIN_E3_common.h b/Marlin/src/pins/stm32f1/pins_MKS_ROBIN_E3_common.h
index 25d954f0f0..b575b2483f 100644
--- a/Marlin/src/pins/stm32f1/pins_MKS_ROBIN_E3_common.h
+++ b/Marlin/src/pins/stm32f1/pins_MKS_ROBIN_E3_common.h
@@ -35,21 +35,21 @@
 #define DISABLE_JTAG
 #define ENABLE_SPI2
 
 //
 // EEPROM
 //
 #if EITHER(NO_EEPROM_SELECTED, FLASH_EEPROM_EMULATION)
   #define FLASH_EEPROM_EMULATION
   #define EEPROM_PAGE_SIZE     (0x800U) // 2KB
   #define EEPROM_START_ADDRESS (0x8000000UL + (STM32_FLASH_SIZE) * 1024UL - (EEPROM_PAGE_SIZE) * 2UL)
-  #define MARLIN_EEPROM_SIZE   EEPROM_PAGE_SIZE  // 2KB
+  #define MARLIN_EEPROM_SIZE    EEPROM_PAGE_SIZE  // 2KB
 #endif
 
 //
 // Servos
 //
 #define SERVO0_PIN                          PA3
 
 //
 // Limit Switches
 //

commit 8225d66b554c7f51e955fe0026a06daf7eed4ea1
Author: thisiskeithb <13375512+thisiskeithb@users.noreply.github.com>
Date:   Fri Jun 19 16:32:05 2020 -0700

    Consolidate MKS Robin / SKR Mini E3 pins (#18354)

diff --git a/Marlin/src/pins/stm32f1/pins_MKS_ROBIN_E3_common.h b/Marlin/src/pins/stm32f1/pins_MKS_ROBIN_E3_common.h
new file mode 100644
index 0000000000..25d954f0f0
--- /dev/null
+++ b/Marlin/src/pins/stm32f1/pins_MKS_ROBIN_E3_common.h
@@ -0,0 +1,188 @@
+/**
+ * Marlin 3D Printer Firmware
+ * Copyright (c) 2020 MarlinFirmware [https://github.com/MarlinFirmware/Marlin]
+ *
+ * Based on Sprinter and grbl.
+ * Copyright (c) 2011 Camiel Gubbels / Erik van der Zalm
+ *
+ * This program is free software: you can redistribute it and/or modify
+ * it under the terms of the GNU General Public License as published by
+ * the Free Software Foundation, either version 3 of the License, or
+ * (at your option) any later version.
+ *
+ * This program is distributed in the hope that it will be useful,
+ * but WITHOUT ANY WARRANTY; without even the implied warranty of
+ * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
+ * GNU General Public License for more details.
+ *
+ * You should have received a copy of the GNU General Public License
+ * along with this program.  If not, see <http://www.gnu.org/licenses/>.
+ *
+ */
+#pragma once
+
+/**
+ * MKS Robin E3 & E3D (STM32F103RCT6) common board pin assignments
+ */
+
+#ifndef __STM32F1__
+  #error "Oops! Select an STM32F1 board in 'Tools > Board.'"
+#endif
+
+#define BOARD_WEBSITE_URL "github.com/makerbase-mks"
+
+//#define DISABLE_DEBUG
+#define DISABLE_JTAG
+#define ENABLE_SPI2
+
+//
+// EEPROM
+//
+#if EITHER(NO_EEPROM_SELECTED, FLASH_EEPROM_EMULATION)
+  #define FLASH_EEPROM_EMULATION
+  #define EEPROM_PAGE_SIZE     (0x800U) // 2KB
+  #define EEPROM_START_ADDRESS (0x8000000UL + (STM32_FLASH_SIZE) * 1024UL - (EEPROM_PAGE_SIZE) * 2UL)
+  #define MARLIN_EEPROM_SIZE   EEPROM_PAGE_SIZE  // 2KB
+#endif
+
+//
+// Servos
+//
+#define SERVO0_PIN                          PA3
+
+//
+// Limit Switches
+//
+#define X_STOP_PIN                          PA12
+#define Y_STOP_PIN                          PA11
+#define Z_MIN_PIN                           PC6
+#define Z_MAX_PIN                           PB1
+
+//
+// Steppers
+//
+#define X_STEP_PIN                          PC0
+#define X_DIR_PIN                           PB2
+#define X_ENABLE_PIN                        PC13
+
+#define Y_STEP_PIN                          PC2
+#define Y_DIR_PIN                           PB9
+#define Y_ENABLE_PIN                        PB12
+
+#define Z_STEP_PIN                          PB7
+#define Z_DIR_PIN                           PB6
+#define Z_ENABLE_PIN                        PB8
+
+#define E0_STEP_PIN                         PB4
+#define E0_DIR_PIN                          PB3
+#define E0_ENABLE_PIN                       PB5
+
+#if HAS_TMC220x
+  /**
+   * TMC2208/TMC2209 stepper drivers
+   *
+   * Hardware serial communication ports.
+   * If undefined software serial is used according to the pins below
+   */
+  //#define X_HARDWARE_SERIAL  Serial1
+  //#define Y_HARDWARE_SERIAL  Serial1
+  //#define Z_HARDWARE_SERIAL  Serial1
+  //#define E0_HARDWARE_SERIAL Serial1
+
+  //
+  // Software serial
+  //
+  #define X_SERIAL_TX_PIN                   PC7
+  #define X_SERIAL_RX_PIN                   PC7
+
+  #define Y_SERIAL_TX_PIN                   PD2
+  #define Y_SERIAL_RX_PIN                   PD2
+
+  #define Z_SERIAL_TX_PIN                   PC12
+  #define Z_SERIAL_RX_PIN                   PC12
+
+  #define E0_SERIAL_TX_PIN                  PC11
+  #define E0_SERIAL_RX_PIN                  PC11
+
+  // Reduce baud rate to improve software serial reliability
+  #define TMC_BAUD_RATE 19200
+#endif
+
+//
+// Heaters 0,1 / Fans / Bed
+//
+#define HEATER_0_PIN                        PC9
+#define FAN_PIN                             PA8
+#define HEATER_BED_PIN                      PC8
+
+//
+// Temperature Sensors
+//
+#define TEMP_BED_PIN                        PA1   // TB
+#define TEMP_0_PIN                          PA0   // TH1
+
+#define FIL_RUNOUT_PIN                      PB10  // MT_DET
+
+/**
+ *                _____                                      _____                                     _____
+ *  (BEEPER) PC1 | 1 2 | PC3 (BTN_ENC)          (MISO) PB14 | 1 2 | PB13 (SD_SCK)                  5V | 1 2 | GND
+ *  (LCD_EN) PA4 | 3 4 | PA5 (LCD_RS)        (BTN_EN1) PB11 | 3 4 | PA15 (SD_SS)         (LCD_EN) PA4 | 3 4 | PA5  (LCD_RS)
+ *  (LCD_D4) PA6 | 5 6   PA7 (LCD_D5)        (BTN_EN2)  PB0 | 5 6   PB15 (SD_MOSI)       (LCD_D4) PA6 | 5 6   PB0  (BTN_EN2)
+ *  (LCD_D6) PC4 | 7 8 | PC5 (LCD_D7)      (SD_DETECT) PC10 | 7 8 | RESET                       RESET | 7 8 | PB11 (BTN_EN1)
+ *           GND | 9 10| 5V                             GND | 9 10| NC                  (BTN_ENC) PC3 | 9 10| PC1  (BEEPER)
+ *                -----                                      -----                                     -----
+ *                EXP1                                       EXP2                                      EXP3
+ */
+#if HAS_SPI_LCD
+
+  #define BEEPER_PIN                        PC1
+  #define BTN_ENC                           PC3
+  #define LCD_PINS_ENABLE                   PA4
+  #define LCD_PINS_RS                       PA5
+  #define BTN_EN1                           PB11
+  #define BTN_EN2                           PB0
+
+  // MKS MINI12864 and MKS LCD12864B; If using MKS LCD12864A (Need to remove RPK2 resistor)
+  #if ENABLED(MKS_MINI_12864)
+
+    #define LCD_BACKLIGHT_PIN               -1
+    #define LCD_RESET_PIN                   -1
+    #define DOGLCD_A0                       PC4
+    #define DOGLCD_CS                       PA7
+    #define DOGLCD_SCK                      PB13
+    #define DOGLCD_MOSI                     PB15
+
+    #undef SHOW_BOOTSCREEN
+
+  #else
+
+    #define LCD_PINS_D4                     PA6
+    #if ENABLED(ULTIPANEL)
+      #define LCD_PINS_D5                   PA7
+      #define LCD_PINS_D6                   PC4
+      #define LCD_PINS_D7                   PC5
+    #endif
+
+  #endif // !MKS_MINI_12864
+
+#endif // HAS_SPI_LCD
+
+//
+// SD Card
+//
+#define ENABLE_SPI2
+#define SD_DETECT_PIN                       PC10
+#define SCK_PIN                             PB13
+#define MISO_PIN                            PB14
+#define MOSI_PIN                            PB15
+#define SS_PIN                              PA15
+
+#ifndef ST7920_DELAY_1
+  #define ST7920_DELAY_1           DELAY_NS(125)
+#endif
+#ifndef ST7920_DELAY_2
+  #define ST7920_DELAY_2           DELAY_NS(125)
+#endif
+#ifndef ST7920_DELAY_3
+  #define ST7920_DELAY_3           DELAY_NS(125)
+#endif
