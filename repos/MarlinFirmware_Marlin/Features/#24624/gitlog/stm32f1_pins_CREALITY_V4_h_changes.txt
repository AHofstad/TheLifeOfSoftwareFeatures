commit 556616c4f0c350006328246dd0ec6c810e2e0f88
Author: Scott Lahteine <thinkyhead@users.noreply.github.com>
Date:   Sun May 12 14:33:48 2024 -0500

    üßë‚Äçüíª Controller warning as macro

diff --git a/Marlin/src/pins/stm32f1/pins_CREALITY_V4.h b/Marlin/src/pins/stm32f1/pins_CREALITY_V4.h
index aa836d275b..9ae858f2d0 100644
--- a/Marlin/src/pins/stm32f1/pins_CREALITY_V4.h
+++ b/Marlin/src/pins/stm32f1/pins_CREALITY_V4.h
@@ -253,9 +253,7 @@
 
 #elif ENABLED(FYSETC_MINI_12864_2_1)
 
-  #ifndef NO_CONTROLLER_CUSTOM_WIRING_WARNING
-    #error "CAUTION! FYSETC_MINI_12864_2_1 and clones require wiring modifications. See 'pins_CREALITY_V4.h' for details. Define NO_CONTROLLER_CUSTOM_WIRING_WARNING to suppress this warning."
-  #endif
+  CONTROLLER_WARNING("CREALITY_V4", "FYSETC_MINI_12864_2_1 and clones")
 
   #if SD_CONNECTION_IS(LCD)
     #error "The LCD SD Card is not connected with this configuration."

commit aa7d5714867df05348ca63ad113ea9cf7ccc3271
Author: Scott Lahteine <thinkyhead@users.noreply.github.com>
Date:   Mon Jan 22 17:32:01 2024 -0600

    ‚ôªÔ∏è LCD pins migration precursor (#26719)
    
    Preliminary changes for #25650

diff --git a/Marlin/src/pins/stm32f1/pins_CREALITY_V4.h b/Marlin/src/pins/stm32f1/pins_CREALITY_V4.h
index bd6ba086f7..aa836d275b 100644
--- a/Marlin/src/pins/stm32f1/pins_CREALITY_V4.h
+++ b/Marlin/src/pins/stm32f1/pins_CREALITY_V4.h
@@ -169,6 +169,18 @@
 #define ONBOARD_SDIO
 #define NO_SD_HOST_DRIVE                          // This board's SD is only seen by the printer
 
+/**    Debug port
+ *       -----
+ *       | 1 | VCC
+ *       | 2 | PA13
+ *       | 3 | PA14
+ *       | 4 | GND
+ *       -----
+ */
+
+#define DEBUG_02_PIN                        PA13
+#define DEBUG_03_PIN                        PA14
+
 #if ANY(RET6_12864_LCD, HAS_DWIN_E3V2, IS_DWIN_MARLINUI)
 
   /**

commit 204de723f1c08f83e281f0629b60822b334097ed
Author: Keith Bennett <13375512+thisiskeithb@users.noreply.github.com>
Date:   Sun Jan 21 04:01:25 2024 -0800

    ‚ú® BIQU MicroProbe (#26527)

diff --git a/Marlin/src/pins/stm32f1/pins_CREALITY_V4.h b/Marlin/src/pins/stm32f1/pins_CREALITY_V4.h
index 96b3007ca6..bd6ba086f7 100644
--- a/Marlin/src/pins/stm32f1/pins_CREALITY_V4.h
+++ b/Marlin/src/pins/stm32f1/pins_CREALITY_V4.h
@@ -92,6 +92,13 @@
   #define Z_MIN_PROBE_PIN                   PB1   // BLTouch IN
 #endif
 
+//
+// Probe enable
+//
+#if ENABLED(PROBE_ENABLE_DISABLE) && !defined(PROBE_ENABLE_PIN)
+  #define PROBE_ENABLE_PIN            SERVO0_PIN
+#endif
+
 //
 // Filament Runout Sensor
 //

commit 2691167afe02fbbe74b0fdca2c28a49fac635741
Author: Scott Lahteine <thinkyhead@users.noreply.github.com>
Date:   Fri Jun 2 14:26:02 2023 -0500

    üßë‚Äçüíª Dump BOTH and EITHER macros (#25908)

diff --git a/Marlin/src/pins/stm32f1/pins_CREALITY_V4.h b/Marlin/src/pins/stm32f1/pins_CREALITY_V4.h
index 3d0a1885af..96b3007ca6 100644
--- a/Marlin/src/pins/stm32f1/pins_CREALITY_V4.h
+++ b/Marlin/src/pins/stm32f1/pins_CREALITY_V4.h
@@ -183,7 +183,7 @@
   #define EXP3_07_PIN                       PB12
   #define EXP3_08_PIN                       PB15
 
-#elif EITHER(VET6_12864_LCD, DWIN_VET6_CREALITY_LCD)
+#elif ANY(VET6_12864_LCD, DWIN_VET6_CREALITY_LCD)
 
   /**
    *    VET6 12864 LCD
@@ -204,7 +204,7 @@
   #define EXP3_07_PIN                       PA4
   #define EXP3_08_PIN                       PA7
 
-#elif EITHER(CR10_STOCKDISPLAY, FYSETC_MINI_12864_2_1)
+#elif ANY(CR10_STOCKDISPLAY, FYSETC_MINI_12864_2_1)
   #error "Define RET6_12864_LCD or VET6_12864_LCD to select pins for the LCD with the Creality V4 controller."
 #endif
 

commit 8fb9b5804e1ff91c4f5d94493db8924a063b0659
Author: Muhammad Arslan <55940958+arslan437@users.noreply.github.com>
Date:   Thu May 11 18:18:24 2023 +0500

    ‚ú® Blackpill-based custom board (#25152)
    
    Co-authored-by: striker <striker@gmail.com>

diff --git a/Marlin/src/pins/stm32f1/pins_CREALITY_V4.h b/Marlin/src/pins/stm32f1/pins_CREALITY_V4.h
index 6cb4d48d58..3d0a1885af 100644
--- a/Marlin/src/pins/stm32f1/pins_CREALITY_V4.h
+++ b/Marlin/src/pins/stm32f1/pins_CREALITY_V4.h
@@ -299,11 +299,3 @@
 #define UART4_RX_PIN                        PC11  // default uses sdcard SDIO_D3
 #define UART5_TX_PIN                        PC12  // default uses sdcard SDIO_CK
 #define UART5_RX_PIN                        PD2   // default uses sdcard SDIO_CMD
-
-// SDIO pins
-#define SDIO_D0_PIN                         PC8
-#define SDIO_D1_PIN                         PC9
-#define SDIO_D2_PIN                         PC10
-#define SDIO_D3_PIN                         PC11
-#define SDIO_CK_PIN                         PC12
-#define SDIO_CMD_PIN                        PD2

commit 9902097d916e42977e7a4992e2e5773d5e5e9731
Author: ellensp <530024+ellensp@users.noreply.github.com>
Date:   Mon Apr 24 11:11:02 2023 +1200

    üî® Gather GD32, suppress redundant #error (#25665)
    
    Co-authored-by: Scott Lahteine <thinkyhead@users.noreply.github.com>

diff --git a/Marlin/src/pins/stm32f1/pins_CREALITY_V4.h b/Marlin/src/pins/stm32f1/pins_CREALITY_V4.h
index fd96799372..6cb4d48d58 100644
--- a/Marlin/src/pins/stm32f1/pins_CREALITY_V4.h
+++ b/Marlin/src/pins/stm32f1/pins_CREALITY_V4.h
@@ -27,7 +27,7 @@
 
 #include "env_validate.h"
 
-#if HAS_MULTI_HOTEND || E_STEPPERS > 1
+#if !E_ERROR && (HAS_MULTI_HOTEND || E_STEPPERS > 1)
   #error "Creality v4 only supports 1 hotend / E stepper."
 #endif
 

commit 921591d2b899000e3181a098a069392ac0ac4b42
Author: Scott Lahteine <thinkyhead@users.noreply.github.com>
Date:   Sat Apr 22 23:15:31 2023 -0500

    üßë‚Äçüíª SDIO_SUPPORT => ONBOARD_SDIO

diff --git a/Marlin/src/pins/stm32f1/pins_CREALITY_V4.h b/Marlin/src/pins/stm32f1/pins_CREALITY_V4.h
index c028deaa99..fd96799372 100644
--- a/Marlin/src/pins/stm32f1/pins_CREALITY_V4.h
+++ b/Marlin/src/pins/stm32f1/pins_CREALITY_V4.h
@@ -159,7 +159,7 @@
 //
 #define SD_DETECT_PIN                       PC7
 #define SDCARD_CONNECTION ONBOARD
-#define SDIO_SUPPORT
+#define ONBOARD_SDIO
 #define NO_SD_HOST_DRIVE                          // This board's SD is only seen by the printer
 
 #if ANY(RET6_12864_LCD, HAS_DWIN_E3V2, IS_DWIN_MARLINUI)

commit cd5dc7203ca6340017a4f686a456f5d71792f272
Author: Scott Lahteine <thinkyhead@users.noreply.github.com>
Date:   Sat Apr 8 14:02:14 2023 -0500

    ‚ôªÔ∏è LCD_PINS_ENABLE => LCD_PINS_EN

diff --git a/Marlin/src/pins/stm32f1/pins_CREALITY_V4.h b/Marlin/src/pins/stm32f1/pins_CREALITY_V4.h
index 00de57ff58..c028deaa99 100644
--- a/Marlin/src/pins/stm32f1/pins_CREALITY_V4.h
+++ b/Marlin/src/pins/stm32f1/pins_CREALITY_V4.h
@@ -211,7 +211,7 @@
 #if ENABLED(CR10_STOCKDISPLAY)
 
   #define LCD_PINS_RS                EXP3_07_PIN
-  #define LCD_PINS_ENABLE            EXP3_08_PIN
+  #define LCD_PINS_EN                EXP3_08_PIN
   #define LCD_PINS_D4                EXP3_06_PIN
 
   #define BTN_ENC                    EXP3_02_PIN

commit 5b1f087c5b79fa7797aca5acc22a72570a36b64a
Author: Scott Lahteine <thinkyhead@users.noreply.github.com>
Date:   Thu Apr 6 17:24:32 2023 -0500

    üìù Update Ender # labels

diff --git a/Marlin/src/pins/stm32f1/pins_CREALITY_V4.h b/Marlin/src/pins/stm32f1/pins_CREALITY_V4.h
index e71fec0181..00de57ff58 100644
--- a/Marlin/src/pins/stm32f1/pins_CREALITY_V4.h
+++ b/Marlin/src/pins/stm32f1/pins_CREALITY_V4.h
@@ -35,7 +35,7 @@
   #define BOARD_INFO_NAME      "Creality V4"
 #endif
 #ifndef DEFAULT_MACHINE_NAME
-  #define DEFAULT_MACHINE_NAME "Ender 3 V2"
+  #define DEFAULT_MACHINE_NAME "Ender-3 V2"
 #endif
 
 #define BOARD_NO_NATIVE_USB

commit 2e4bf0ab9b2b4db545665bf976d2e0738c237b80
Author: Scott Lahteine <thinkyhead@users.noreply.github.com>
Date:   Sat Mar 25 18:20:14 2023 -0500

    üé® Rename FAN_PIN to FAN0_PIN (#25568)

diff --git a/Marlin/src/pins/stm32f1/pins_CREALITY_V4.h b/Marlin/src/pins/stm32f1/pins_CREALITY_V4.h
index 7c4df3520c..e71fec0181 100644
--- a/Marlin/src/pins/stm32f1/pins_CREALITY_V4.h
+++ b/Marlin/src/pins/stm32f1/pins_CREALITY_V4.h
@@ -149,8 +149,8 @@
 #ifndef HEATER_BED_PIN
   #define HEATER_BED_PIN                    PA2   // HOT BED
 #endif
-#ifndef FAN_PIN
-  #define FAN_PIN                           PA0   // FAN
+#ifndef FAN0_PIN
+  #define FAN0_PIN                          PA0   // FAN
 #endif
 #define FAN_SOFT_PWM_REQUIRED
 

commit c914761327077cb0e715171bd0fd5db741eafeb9
Author: Michael Hill <mhill@hillsoftware.com>
Date:   Sat Mar 18 01:56:07 2023 -0400

    ‚ú® Sovol v1.3.1 (Sovol SV06) (#25267)

diff --git a/Marlin/src/pins/stm32f1/pins_CREALITY_V4.h b/Marlin/src/pins/stm32f1/pins_CREALITY_V4.h
index f633ee0983..7c4df3520c 100644
--- a/Marlin/src/pins/stm32f1/pins_CREALITY_V4.h
+++ b/Marlin/src/pins/stm32f1/pins_CREALITY_V4.h
@@ -53,6 +53,7 @@
 #if NO_EEPROM_SELECTED
   #define IIC_BL24CXX_EEPROM                      // EEPROM on I2C-0
   //#define SDCARD_EEPROM_EMULATION
+  #undef NO_EEPROM_SELECTED
 #endif
 
 #if ENABLED(IIC_BL24CXX_EEPROM)

commit 42d30ed102308f0c5cb04b70dc55f9f37012a157
Author: ellensp <530024+ellensp@users.noreply.github.com>
Date:   Thu Oct 20 15:23:22 2022 +1300

    üîß Some STM32 UART Sanity Checks (#24795)

diff --git a/Marlin/src/pins/stm32f1/pins_CREALITY_V4.h b/Marlin/src/pins/stm32f1/pins_CREALITY_V4.h
index 11384799a3..f633ee0983 100644
--- a/Marlin/src/pins/stm32f1/pins_CREALITY_V4.h
+++ b/Marlin/src/pins/stm32f1/pins_CREALITY_V4.h
@@ -173,14 +173,14 @@
    *   GND | 9 10 | 5V
    *        ------
    */
-  #define EXP3_01_PIN                     PC6
-  #define EXP3_02_PIN                     PB2
-  #define EXP3_03_PIN                     PB10
-  #define EXP3_04_PIN                     PB11
-  #define EXP3_05_PIN                     PB14
-  #define EXP3_06_PIN                     PB13
-  #define EXP3_07_PIN                     PB12
-  #define EXP3_08_PIN                     PB15
+  #define EXP3_01_PIN                       PC6
+  #define EXP3_02_PIN                       PB2
+  #define EXP3_03_PIN                       PB10
+  #define EXP3_04_PIN                       PB11
+  #define EXP3_05_PIN                       PB14
+  #define EXP3_06_PIN                       PB13
+  #define EXP3_07_PIN                       PB12
+  #define EXP3_08_PIN                       PB15
 
 #elif EITHER(VET6_12864_LCD, DWIN_VET6_CREALITY_LCD)
 
@@ -194,14 +194,14 @@
    *   GND | 9 10 | 5V
    *        ------
    */
-  #define EXP3_01_PIN                     -1
-  #define EXP3_02_PIN                     PC5
-  #define EXP3_03_PIN                     PB10
-  #define EXP3_04_PIN                     -1
-  #define EXP3_05_PIN                     PA6
-  #define EXP3_06_PIN                     PA5
-  #define EXP3_07_PIN                     PA4
-  #define EXP3_08_PIN                     PA7
+  #define EXP3_01_PIN                       -1
+  #define EXP3_02_PIN                       PC5
+  #define EXP3_03_PIN                       PB10
+  #define EXP3_04_PIN                       -1
+  #define EXP3_05_PIN                       PA6
+  #define EXP3_06_PIN                       PA5
+  #define EXP3_07_PIN                       PA4
+  #define EXP3_08_PIN                       PA7
 
 #elif EITHER(CR10_STOCKDISPLAY, FYSETC_MINI_12864_2_1)
   #error "Define RET6_12864_LCD or VET6_12864_LCD to select pins for the LCD with the Creality V4 controller."
@@ -283,3 +283,26 @@
   #define NEOPIXEL_PIN                      PA13
 
 #endif
+
+// Pins for documentation and sanity checks only.
+// Changing these will not change the pin they are on.
+
+// Hardware UART pins
+#define UART1_TX_PIN                        PA9   // default uses CH340 RX
+#define UART1_RX_PIN                        PA10  // default uses CH340 TX
+#define UART2_TX_PIN                        PA2   // default uses HEATER_BED_PIN
+#define UART2_RX_PIN                        PA3   // not connected
+#define UART3_TX_PIN                        PB10  // default uses LCD connector
+#define UART3_RX_PIN                        PB11  // default uses LCD connector
+#define UART4_TX_PIN                        PC10  // default uses sdcard SDIO_D2
+#define UART4_RX_PIN                        PC11  // default uses sdcard SDIO_D3
+#define UART5_TX_PIN                        PC12  // default uses sdcard SDIO_CK
+#define UART5_RX_PIN                        PD2   // default uses sdcard SDIO_CMD
+
+// SDIO pins
+#define SDIO_D0_PIN                         PC8
+#define SDIO_D1_PIN                         PC9
+#define SDIO_D2_PIN                         PC10
+#define SDIO_D3_PIN                         PC11
+#define SDIO_CK_PIN                         PC12
+#define SDIO_CMD_PIN                        PD2

commit 6cc11b76fd499162e644468bc278eda7b3471041
Author: Adam <54421854+aamott@users.noreply.github.com>
Date:   Sat Oct 1 10:49:12 2022 -0600

    ü©π Fix Switching Toolhead compile (#24814)

diff --git a/Marlin/src/pins/stm32f1/pins_CREALITY_V4.h b/Marlin/src/pins/stm32f1/pins_CREALITY_V4.h
index ea2cc52f03..11384799a3 100644
--- a/Marlin/src/pins/stm32f1/pins_CREALITY_V4.h
+++ b/Marlin/src/pins/stm32f1/pins_CREALITY_V4.h
@@ -234,7 +234,7 @@
 #elif ENABLED(FYSETC_MINI_12864_2_1)
 
   #ifndef NO_CONTROLLER_CUSTOM_WIRING_WARNING
-    #error "CAUTION! FYSETC_MINI_12864_2_1 and clones require wiring modifications. See 'pins_CREALITY_V4.h' for details. Define NO_CONTROLLER_CUSTOM_WIRING_WARNING to suppress this warning"
+    #error "CAUTION! FYSETC_MINI_12864_2_1 and clones require wiring modifications. See 'pins_CREALITY_V4.h' for details. Define NO_CONTROLLER_CUSTOM_WIRING_WARNING to suppress this warning."
   #endif
 
   #if SD_CONNECTION_IS(LCD)

commit 1b3941c0d2064f5417b33b491db28930e8412e86
Author: Plynix / Ben Hartiwch <77836725+Plyn1x@users.noreply.github.com>
Date:   Wed Sep 28 16:46:50 2022 +0200

    ‚ú® Creality v5.2.1 board (#24760)

diff --git a/Marlin/src/pins/stm32f1/pins_CREALITY_V4.h b/Marlin/src/pins/stm32f1/pins_CREALITY_V4.h
index 56caa7d35e..ea2cc52f03 100644
--- a/Marlin/src/pins/stm32f1/pins_CREALITY_V4.h
+++ b/Marlin/src/pins/stm32f1/pins_CREALITY_V4.h
@@ -161,94 +161,74 @@
 #define SDIO_SUPPORT
 #define NO_SD_HOST_DRIVE                          // This board's SD is only seen by the printer
 
-#if EITHER(CR10_STOCKDISPLAY, FYSETC_MINI_12864_2_1)
-
-  #if ENABLED(RET6_12864_LCD)
-
-    /**
-     *    RET6 12864 LCD
-     *        ------
-     *  PC6  | 1  2 | PB2
-     *  PB10 | 3  4 | PB11
-     *  PB14   5  6 | PB13
-     *  PB12 | 7  8 | PB15
-     *   GND | 9 10 | 5V
-     *        ------
-     *         EXP1
-     */
-    #define EXP1_01_PIN                     PC6
-    #define EXP1_02_PIN                     PB2
-    #define EXP1_03_PIN                     PB10
-    #define EXP1_04_PIN                     PB11
-    #define EXP1_05_PIN                     PB14
-    #define EXP1_06_PIN                     PB13
-    #define EXP1_07_PIN                     PB12
-    #define EXP1_08_PIN                     PB15
-
-  #elif ENABLED(VET6_12864_LCD)
-
-    /**
-     *    VET6 12864 LCD
-     *        ------
-     *  ?    | 1  2 | PC5
-     *  PB10 | 3  4 | ?
-     *  PA6    5  6 | PA5
-     *  PA4  | 7  8 | PA7
-     *   GND | 9 10 | 5V
-     *        ------
-     *         EXP1
-     */
-    #define EXP1_01_PIN                     -1
-    #define EXP1_02_PIN                     PC5
-    #define EXP1_03_PIN                     PB10
-    #define EXP1_04_PIN                     -1
-    #define EXP1_05_PIN                     PA6
-    #define EXP1_06_PIN                     PA5
-    #define EXP1_07_PIN                     PA4
-    #define EXP1_08_PIN                     PA7
+#if ANY(RET6_12864_LCD, HAS_DWIN_E3V2, IS_DWIN_MARLINUI)
 
-  #else
-    #error "Define RET6_12864_LCD or VET6_12864_LCD to select pins for the LCD with the Creality V4 controller."
-  #endif
+  /**
+   *    RET6 12864 LCD
+   *        ------
+   *  PC6  | 1  2 | PB2
+   *  PB10 | 3  4 | PB11
+   *  PB14   5  6 | PB13
+   *  PB12 | 7  8 | PB15
+   *   GND | 9 10 | 5V
+   *        ------
+   */
+  #define EXP3_01_PIN                     PC6
+  #define EXP3_02_PIN                     PB2
+  #define EXP3_03_PIN                     PB10
+  #define EXP3_04_PIN                     PB11
+  #define EXP3_05_PIN                     PB14
+  #define EXP3_06_PIN                     PB13
+  #define EXP3_07_PIN                     PB12
+  #define EXP3_08_PIN                     PB15
+
+#elif EITHER(VET6_12864_LCD, DWIN_VET6_CREALITY_LCD)
+
+  /**
+   *    VET6 12864 LCD
+   *        ------
+   *  ?    | 1  2 | PC5
+   *  PB10 | 3  4 | ?
+   *  PA6    5  6 | PA5
+   *  PA4  | 7  8 | PA7
+   *   GND | 9 10 | 5V
+   *        ------
+   */
+  #define EXP3_01_PIN                     -1
+  #define EXP3_02_PIN                     PC5
+  #define EXP3_03_PIN                     PB10
+  #define EXP3_04_PIN                     -1
+  #define EXP3_05_PIN                     PA6
+  #define EXP3_06_PIN                     PA5
+  #define EXP3_07_PIN                     PA4
+  #define EXP3_08_PIN                     PA7
+
+#elif EITHER(CR10_STOCKDISPLAY, FYSETC_MINI_12864_2_1)
+  #error "Define RET6_12864_LCD or VET6_12864_LCD to select pins for the LCD with the Creality V4 controller."
 #endif
 
 #if ENABLED(CR10_STOCKDISPLAY)
 
-  #define LCD_PINS_RS                EXP1_07_PIN
-  #define LCD_PINS_ENABLE            EXP1_08_PIN
-  #define LCD_PINS_D4                EXP1_06_PIN
+  #define LCD_PINS_RS                EXP3_07_PIN
+  #define LCD_PINS_ENABLE            EXP3_08_PIN
+  #define LCD_PINS_D4                EXP3_06_PIN
 
-  #define BTN_ENC                    EXP1_02_PIN
-  #define BTN_EN1                    EXP1_03_PIN
-  #define BTN_EN2                    EXP1_05_PIN
+  #define BTN_ENC                    EXP3_02_PIN
+  #define BTN_EN1                    EXP3_03_PIN
+  #define BTN_EN2                    EXP3_05_PIN
 
   #ifndef HAS_PIN_27_BOARD
-    #define BEEPER_PIN               EXP1_01_PIN
+    #define BEEPER_PIN               EXP3_01_PIN
   #endif
 
 #elif ANY(HAS_DWIN_E3V2, IS_DWIN_MARLINUI, DWIN_VET6_CREALITY_LCD)
 
-  #if HAS_DWIN_E3V2 || IS_DWIN_MARLINUI
-    // RET6 DWIN ENCODER LCD
-    #define EXP1_05_PIN                     PB14
-    #define EXP1_06_PIN                     PB13
-    #define EXP1_07_PIN                     PB12
-    #define EXP1_08_PIN                     PB15
-    //#define LCD_LED_PIN                   PB2
-  #else
-    // VET6 DWIN ENCODER LCD
-    #define EXP1_05_PIN                     PA6
-    #define EXP1_06_PIN                     PA5
-    #define EXP1_07_PIN                     PA4
-    #define EXP1_08_PIN                     PA7
-  #endif
-
-  #define BTN_ENC                    EXP1_05_PIN
-  #define BTN_EN1                    EXP1_08_PIN
-  #define BTN_EN2                    EXP1_07_PIN
+  #define BTN_ENC                    EXP3_05_PIN
+  #define BTN_EN1                    EXP3_08_PIN
+  #define BTN_EN2                    EXP3_07_PIN
 
   #ifndef BEEPER_PIN
-    #define BEEPER_PIN               EXP1_06_PIN
+    #define BEEPER_PIN               EXP3_06_PIN
   #endif
 
 #elif ENABLED(FYSETC_MINI_12864_2_1)
@@ -257,8 +237,8 @@
     #error "CAUTION! FYSETC_MINI_12864_2_1 and clones require wiring modifications. See 'pins_CREALITY_V4.h' for details. Define NO_CONTROLLER_CUSTOM_WIRING_WARNING to suppress this warning"
   #endif
 
-  #if SD_CONNECTION_IS(LCD) 
-    #error "The LCD sdcard is not connected with this configuration"
+  #if SD_CONNECTION_IS(LCD)
+    #error "The LCD SD Card is not connected with this configuration."
   #endif
 
   /**
@@ -283,20 +263,20 @@
    *              Debug port                               EXP2
    *
    * Needs custom cable. Connect EN2-EN2, LCD_CS-LCD_CS and so on.
-   * Debug port is just above EXP1, You need to add pins
+   * Debug port is just above EXP1. You need to add pins.
    *
    */
 
-  #define BTN_ENC                    EXP1_02_PIN
-  #define BTN_EN1                    EXP1_01_PIN
-  #define BTN_EN2                    EXP1_06_PIN
+  #define BTN_ENC                    EXP3_02_PIN
+  #define BTN_EN1                    EXP3_01_PIN
+  #define BTN_EN2                    EXP3_06_PIN
   #define BEEPER_PIN                        -1
 
-  #define DOGLCD_CS                  EXP1_03_PIN
-  #define DOGLCD_A0                  EXP1_05_PIN
-  #define DOGLCD_SCK                 EXP1_07_PIN
-  #define DOGLCD_MOSI                EXP1_08_PIN
-  #define LCD_RESET_PIN              EXP1_04_PIN
+  #define DOGLCD_CS                  EXP3_03_PIN
+  #define DOGLCD_A0                  EXP3_05_PIN
+  #define DOGLCD_SCK                 EXP3_07_PIN
+  #define DOGLCD_MOSI                EXP3_08_PIN
+  #define LCD_RESET_PIN              EXP3_04_PIN
 
   #define FORCE_SOFT_SPI
   #define LCD_BACKLIGHT_PIN                 -1

commit 4f299bf8672aa3f244b32672963b6e7fb68486c5
Author: ellensp <530024+ellensp@users.noreply.github.com>
Date:   Fri Sep 23 05:20:17 2022 +1200

    üì∫ FYSETC Mini 12864 2.1 pins for Creality V4 (#24624)

diff --git a/Marlin/src/pins/stm32f1/pins_CREALITY_V4.h b/Marlin/src/pins/stm32f1/pins_CREALITY_V4.h
index 5a3e7337ad..56caa7d35e 100644
--- a/Marlin/src/pins/stm32f1/pins_CREALITY_V4.h
+++ b/Marlin/src/pins/stm32f1/pins_CREALITY_V4.h
@@ -161,7 +161,7 @@
 #define SDIO_SUPPORT
 #define NO_SD_HOST_DRIVE                          // This board's SD is only seen by the printer
 
-#if ENABLED(CR10_STOCKDISPLAY)
+#if EITHER(CR10_STOCKDISPLAY, FYSETC_MINI_12864_2_1)
 
   #if ENABLED(RET6_12864_LCD)
 
@@ -169,7 +169,7 @@
      *    RET6 12864 LCD
      *        ------
      *  PC6  | 1  2 | PB2
-     *  PB10 | 3  4 | PE8
+     *  PB10 | 3  4 | PB11
      *  PB14   5  6 | PB13
      *  PB12 | 7  8 | PB15
      *   GND | 9 10 | 5V
@@ -179,16 +179,12 @@
     #define EXP1_01_PIN                     PC6
     #define EXP1_02_PIN                     PB2
     #define EXP1_03_PIN                     PB10
-    #define EXP1_04_PIN                     PE8
+    #define EXP1_04_PIN                     PB11
     #define EXP1_05_PIN                     PB14
     #define EXP1_06_PIN                     PB13
     #define EXP1_07_PIN                     PB12
     #define EXP1_08_PIN                     PB15
 
-    #ifndef HAS_PIN_27_BOARD
-      #define BEEPER_PIN             EXP1_01_PIN
-    #endif
-
   #elif ENABLED(VET6_12864_LCD)
 
     /**
@@ -212,8 +208,11 @@
     #define EXP1_08_PIN                     PA7
 
   #else
-    #error "Define RET6_12864_LCD or VET6_12864_LCD to select pins for CR10_STOCKDISPLAY with the Creality V4 controller."
+    #error "Define RET6_12864_LCD or VET6_12864_LCD to select pins for the LCD with the Creality V4 controller."
   #endif
+#endif
+
+#if ENABLED(CR10_STOCKDISPLAY)
 
   #define LCD_PINS_RS                EXP1_07_PIN
   #define LCD_PINS_ENABLE            EXP1_08_PIN
@@ -223,6 +222,10 @@
   #define BTN_EN1                    EXP1_03_PIN
   #define BTN_EN2                    EXP1_05_PIN
 
+  #ifndef HAS_PIN_27_BOARD
+    #define BEEPER_PIN               EXP1_01_PIN
+  #endif
+
 #elif ANY(HAS_DWIN_E3V2, IS_DWIN_MARLINUI, DWIN_VET6_CREALITY_LCD)
 
   #if HAS_DWIN_E3V2 || IS_DWIN_MARLINUI
@@ -248,4 +251,55 @@
     #define BEEPER_PIN               EXP1_06_PIN
   #endif
 
+#elif ENABLED(FYSETC_MINI_12864_2_1)
+
+  #ifndef NO_CONTROLLER_CUSTOM_WIRING_WARNING
+    #error "CAUTION! FYSETC_MINI_12864_2_1 and clones require wiring modifications. See 'pins_CREALITY_V4.h' for details. Define NO_CONTROLLER_CUSTOM_WIRING_WARNING to suppress this warning"
+  #endif
+
+  #if SD_CONNECTION_IS(LCD) 
+    #error "The LCD sdcard is not connected with this configuration"
+  #endif
+
+  /**
+   *
+   *                 Board (RET6 12864 LCD)              Display
+   *                 ------                               ------
+   *  (EN1)    PC6  | 1  2 | PB2  (BTN_ENC)           5V |10  9 | GND
+   *  (LCD_CS) PB10 | 3  4 | PB11 (LCD RESET)         -- | 8  7 | --
+   *  (LCD_A0) PB14   5  6 | PB13 (EN2)           (DIN)  | 6  5   (LCD RESET)
+   *  (LCD_SCK)PB12 | 7  8 | PB15 (MOSI)        (LCD_A0) | 4  3 | (LCD_CS)
+   *            GND | 9 10 | 5V                (BTN_ENC) | 2  1 | --
+   *                 ------                               ------
+   *                  EXP1                                 EXP1
+   *
+   *                                                      ------
+   *                -----                             -- |10  9 | --
+   *                | 1 | VCC                    (RESET) | 8  7 | --
+   *                | 2 | PA13 (DIN)             (MOSI)  | 6  5   (EN2)
+   *                | 3 | PA14                        -- | 4  3 | (EN1)
+   *                | 4 | GND                   (LCD_SCK)| 2  1 | --
+   *                -----                                 ------
+   *              Debug port                               EXP2
+   *
+   * Needs custom cable. Connect EN2-EN2, LCD_CS-LCD_CS and so on.
+   * Debug port is just above EXP1, You need to add pins
+   *
+   */
+
+  #define BTN_ENC                    EXP1_02_PIN
+  #define BTN_EN1                    EXP1_01_PIN
+  #define BTN_EN2                    EXP1_06_PIN
+  #define BEEPER_PIN                        -1
+
+  #define DOGLCD_CS                  EXP1_03_PIN
+  #define DOGLCD_A0                  EXP1_05_PIN
+  #define DOGLCD_SCK                 EXP1_07_PIN
+  #define DOGLCD_MOSI                EXP1_08_PIN
+  #define LCD_RESET_PIN              EXP1_04_PIN
+
+  #define FORCE_SOFT_SPI
+  #define LCD_BACKLIGHT_PIN                 -1
+  #define NEOPIXEL_PIN                      PA13
+
 #endif

commit 2419a167ee7e0c488969ee656f9c6d3e8c65f02a
Author: Scott Lahteine <thinkyhead@users.noreply.github.com>
Date:   Wed Jul 20 16:26:33 2022 -0500

    EXP header pin numbers redux (#24525)
    
    Followup to 504fec98

diff --git a/Marlin/src/pins/stm32f1/pins_CREALITY_V4.h b/Marlin/src/pins/stm32f1/pins_CREALITY_V4.h
index 3df8ad2a8e..5a3e7337ad 100644
--- a/Marlin/src/pins/stm32f1/pins_CREALITY_V4.h
+++ b/Marlin/src/pins/stm32f1/pins_CREALITY_V4.h
@@ -176,17 +176,17 @@
      *        ------
      *         EXP1
      */
-    #define EXP1_03_PIN                     PB15
-    #define EXP1_04_PIN                     PB12
-    #define EXP1_05_PIN                     PB13
-    #define EXP1_06_PIN                     PB14
-    #define EXP1_07_PIN                     PE8
-    #define EXP1_08_PIN                     PB10
-    #define EXP1_09_PIN                     PB2
-    #define EXP1_10_PIN                     PC6
+    #define EXP1_01_PIN                     PC6
+    #define EXP1_02_PIN                     PB2
+    #define EXP1_03_PIN                     PB10
+    #define EXP1_04_PIN                     PE8
+    #define EXP1_05_PIN                     PB14
+    #define EXP1_06_PIN                     PB13
+    #define EXP1_07_PIN                     PB12
+    #define EXP1_08_PIN                     PB15
 
     #ifndef HAS_PIN_27_BOARD
-      #define BEEPER_PIN             EXP1_10_PIN
+      #define BEEPER_PIN             EXP1_01_PIN
     #endif
 
   #elif ENABLED(VET6_12864_LCD)
@@ -202,50 +202,50 @@
      *        ------
      *         EXP1
      */
-    #define EXP1_03_PIN                     PA7
-    #define EXP1_04_PIN                     PA4
-    #define EXP1_05_PIN                     PA5
-    #define EXP1_06_PIN                     PA6
-    #define EXP1_07_PIN                     -1
-    #define EXP1_08_PIN                     PB10
-    #define EXP1_09_PIN                     PC5
-    #define EXP1_10_PIN                     -1
+    #define EXP1_01_PIN                     -1
+    #define EXP1_02_PIN                     PC5
+    #define EXP1_03_PIN                     PB10
+    #define EXP1_04_PIN                     -1
+    #define EXP1_05_PIN                     PA6
+    #define EXP1_06_PIN                     PA5
+    #define EXP1_07_PIN                     PA4
+    #define EXP1_08_PIN                     PA7
 
   #else
     #error "Define RET6_12864_LCD or VET6_12864_LCD to select pins for CR10_STOCKDISPLAY with the Creality V4 controller."
   #endif
 
-  #define LCD_PINS_RS                EXP1_04_PIN
-  #define LCD_PINS_ENABLE            EXP1_03_PIN
-  #define LCD_PINS_D4                EXP1_05_PIN
+  #define LCD_PINS_RS                EXP1_07_PIN
+  #define LCD_PINS_ENABLE            EXP1_08_PIN
+  #define LCD_PINS_D4                EXP1_06_PIN
 
-  #define BTN_ENC                    EXP1_09_PIN
-  #define BTN_EN1                    EXP1_08_PIN
-  #define BTN_EN2                    EXP1_06_PIN
+  #define BTN_ENC                    EXP1_02_PIN
+  #define BTN_EN1                    EXP1_03_PIN
+  #define BTN_EN2                    EXP1_05_PIN
 
 #elif ANY(HAS_DWIN_E3V2, IS_DWIN_MARLINUI, DWIN_VET6_CREALITY_LCD)
 
   #if HAS_DWIN_E3V2 || IS_DWIN_MARLINUI
     // RET6 DWIN ENCODER LCD
-    #define EXP1_03_PIN                     PB15
-    #define EXP1_04_PIN                     PB12
-    #define EXP1_05_PIN                     PB13
-    #define EXP1_06_PIN                     PB14
+    #define EXP1_05_PIN                     PB14
+    #define EXP1_06_PIN                     PB13
+    #define EXP1_07_PIN                     PB12
+    #define EXP1_08_PIN                     PB15
     //#define LCD_LED_PIN                   PB2
   #else
     // VET6 DWIN ENCODER LCD
-    #define EXP1_03_PIN                     PA7
-    #define EXP1_04_PIN                     PA4
-    #define EXP1_05_PIN                     PA5
-    #define EXP1_06_PIN                     PA6
+    #define EXP1_05_PIN                     PA6
+    #define EXP1_06_PIN                     PA5
+    #define EXP1_07_PIN                     PA4
+    #define EXP1_08_PIN                     PA7
   #endif
 
-  #define BTN_ENC                    EXP1_06_PIN
-  #define BTN_EN1                    EXP1_03_PIN
-  #define BTN_EN2                    EXP1_04_PIN
+  #define BTN_ENC                    EXP1_05_PIN
+  #define BTN_EN1                    EXP1_08_PIN
+  #define BTN_EN2                    EXP1_07_PIN
 
   #ifndef BEEPER_PIN
-    #define BEEPER_PIN               EXP1_05_PIN
+    #define BEEPER_PIN               EXP1_06_PIN
   #endif
 
 #endif

commit 504fec98237a1042819eba145ae39ad14cc49a1e
Author: Scott Lahteine <thinkyhead@users.noreply.github.com>
Date:   Sat Jul 16 16:26:36 2022 -0500

    üö∏ Renumber EXP pins to match schematics/RRF/Klipper

diff --git a/Marlin/src/pins/stm32f1/pins_CREALITY_V4.h b/Marlin/src/pins/stm32f1/pins_CREALITY_V4.h
index 7e3979b87e..3df8ad2a8e 100644
--- a/Marlin/src/pins/stm32f1/pins_CREALITY_V4.h
+++ b/Marlin/src/pins/stm32f1/pins_CREALITY_V4.h
@@ -168,11 +168,11 @@
     /**
      *    RET6 12864 LCD
      *        ------
-     *  PC6  |10  9 | PB2
-     *  PB10 | 8  7 | PE8
-     *  PB14   6  5 | PB13
-     *  PB12 | 4  3 | PB15
-     *   GND | 2  1 | 5V
+     *  PC6  | 1  2 | PB2
+     *  PB10 | 3  4 | PE8
+     *  PB14   5  6 | PB13
+     *  PB12 | 7  8 | PB15
+     *   GND | 9 10 | 5V
      *        ------
      *         EXP1
      */
@@ -194,11 +194,11 @@
     /**
      *    VET6 12864 LCD
      *        ------
-     *  ?    |10  9 | PC5
-     *  PB10 | 8  7 | ?
-     *  PA6    6  5 | PA5
-     *  PA4  | 4  3 | PA7
-     *   GND | 2  1 | 5V
+     *  ?    | 1  2 | PC5
+     *  PB10 | 3  4 | ?
+     *  PA6    5  6 | PA5
+     *  PA4  | 7  8 | PA7
+     *   GND | 9 10 | 5V
      *        ------
      *         EXP1
      */

commit a61fab7302c56f87827eccb47ec67025ccd2b645
Author: Victor Oliveira <rhapsodyv@gmail.com>
Date:   Thu Jul 14 03:30:00 2022 -0300

    ‚ú® Creality3D v4.2.5 / CR200B (#24491)

diff --git a/Marlin/src/pins/stm32f1/pins_CREALITY_V4.h b/Marlin/src/pins/stm32f1/pins_CREALITY_V4.h
index cb11c3e53b..7e3979b87e 100644
--- a/Marlin/src/pins/stm32f1/pins_CREALITY_V4.h
+++ b/Marlin/src/pins/stm32f1/pins_CREALITY_V4.h
@@ -77,8 +77,12 @@
 //
 // Limit Switches
 //
-#define X_STOP_PIN                          PA5
-#define Y_STOP_PIN                          PA6
+#ifndef X_STOP_PIN
+  #define X_STOP_PIN                        PA5
+#endif
+#ifndef Y_STOP_PIN
+  #define Y_STOP_PIN                        PA6
+#endif
 #ifndef Z_STOP_PIN
   #define Z_STOP_PIN                        PA7
 #endif
@@ -153,7 +157,7 @@
 // SD Card
 //
 #define SD_DETECT_PIN                       PC7
-#define SDCARD_CONNECTION                ONBOARD
+#define SDCARD_CONNECTION ONBOARD
 #define SDIO_SUPPORT
 #define NO_SD_HOST_DRIVE                          // This board's SD is only seen by the printer
 
@@ -161,53 +165,87 @@
 
   #if ENABLED(RET6_12864_LCD)
 
-    // RET6 12864 LCD
-    #define LCD_PINS_RS                     PB12
-    #define LCD_PINS_ENABLE                 PB15
-    #define LCD_PINS_D4                     PB13
-
-    #define BTN_ENC                         PB2
-    #define BTN_EN1                         PB10
-    #define BTN_EN2                         PB14
+    /**
+     *    RET6 12864 LCD
+     *        ------
+     *  PC6  |10  9 | PB2
+     *  PB10 | 8  7 | PE8
+     *  PB14   6  5 | PB13
+     *  PB12 | 4  3 | PB15
+     *   GND | 2  1 | 5V
+     *        ------
+     *         EXP1
+     */
+    #define EXP1_03_PIN                     PB15
+    #define EXP1_04_PIN                     PB12
+    #define EXP1_05_PIN                     PB13
+    #define EXP1_06_PIN                     PB14
+    #define EXP1_07_PIN                     PE8
+    #define EXP1_08_PIN                     PB10
+    #define EXP1_09_PIN                     PB2
+    #define EXP1_10_PIN                     PC6
 
     #ifndef HAS_PIN_27_BOARD
-      #define BEEPER_PIN                    PC6
+      #define BEEPER_PIN             EXP1_10_PIN
     #endif
 
   #elif ENABLED(VET6_12864_LCD)
 
-    // VET6 12864 LCD
-    #define LCD_PINS_RS                     PA4
-    #define LCD_PINS_ENABLE                 PA7
-    #define LCD_PINS_D4                     PA5
-
-    #define BTN_ENC                         PC5
-    #define BTN_EN1                         PB10
-    #define BTN_EN2                         PA6
+    /**
+     *    VET6 12864 LCD
+     *        ------
+     *  ?    |10  9 | PC5
+     *  PB10 | 8  7 | ?
+     *  PA6    6  5 | PA5
+     *  PA4  | 4  3 | PA7
+     *   GND | 2  1 | 5V
+     *        ------
+     *         EXP1
+     */
+    #define EXP1_03_PIN                     PA7
+    #define EXP1_04_PIN                     PA4
+    #define EXP1_05_PIN                     PA5
+    #define EXP1_06_PIN                     PA6
+    #define EXP1_07_PIN                     -1
+    #define EXP1_08_PIN                     PB10
+    #define EXP1_09_PIN                     PC5
+    #define EXP1_10_PIN                     -1
 
   #else
     #error "Define RET6_12864_LCD or VET6_12864_LCD to select pins for CR10_STOCKDISPLAY with the Creality V4 controller."
   #endif
 
-#elif HAS_DWIN_E3V2 || IS_DWIN_MARLINUI
+  #define LCD_PINS_RS                EXP1_04_PIN
+  #define LCD_PINS_ENABLE            EXP1_03_PIN
+  #define LCD_PINS_D4                EXP1_05_PIN
 
-  // RET6 DWIN ENCODER LCD
-  #define BTN_ENC                           PB14
-  #define BTN_EN1                           PB15
-  #define BTN_EN2                           PB12
+  #define BTN_ENC                    EXP1_09_PIN
+  #define BTN_EN1                    EXP1_08_PIN
+  #define BTN_EN2                    EXP1_06_PIN
 
-  //#define LCD_LED_PIN                     PB2
-  #ifndef BEEPER_PIN
-    #define BEEPER_PIN                      PB13
-  #endif
+#elif ANY(HAS_DWIN_E3V2, IS_DWIN_MARLINUI, DWIN_VET6_CREALITY_LCD)
 
-#elif ENABLED(DWIN_VET6_CREALITY_LCD)
+  #if HAS_DWIN_E3V2 || IS_DWIN_MARLINUI
+    // RET6 DWIN ENCODER LCD
+    #define EXP1_03_PIN                     PB15
+    #define EXP1_04_PIN                     PB12
+    #define EXP1_05_PIN                     PB13
+    #define EXP1_06_PIN                     PB14
+    //#define LCD_LED_PIN                   PB2
+  #else
+    // VET6 DWIN ENCODER LCD
+    #define EXP1_03_PIN                     PA7
+    #define EXP1_04_PIN                     PA4
+    #define EXP1_05_PIN                     PA5
+    #define EXP1_06_PIN                     PA6
+  #endif
 
-  // VET6 DWIN ENCODER LCD
-  #define BTN_ENC                           PA6
-  #define BTN_EN1                           PA7
-  #define BTN_EN2                           PA4
+  #define BTN_ENC                    EXP1_06_PIN
+  #define BTN_EN1                    EXP1_03_PIN
+  #define BTN_EN2                    EXP1_04_PIN
 
-  #define BEEPER_PIN                        PA5
+  #ifndef BEEPER_PIN
+    #define BEEPER_PIN               EXP1_05_PIN
+  #endif
 
 #endif

commit d99185be24e035d6370c8f36851e09917d7fe342
Author: Keith Bennett <13375512+thisiskeithb@users.noreply.github.com>
Date:   Sun May 22 14:32:16 2022 -0700

    üé® Fix/adjust warnings (#24225)

diff --git a/Marlin/src/pins/stm32f1/pins_CREALITY_V4.h b/Marlin/src/pins/stm32f1/pins_CREALITY_V4.h
index 5552d19ab9..cb11c3e53b 100644
--- a/Marlin/src/pins/stm32f1/pins_CREALITY_V4.h
+++ b/Marlin/src/pins/stm32f1/pins_CREALITY_V4.h
@@ -28,7 +28,7 @@
 #include "env_validate.h"
 
 #if HAS_MULTI_HOTEND || E_STEPPERS > 1
-  #error "Creality V4 only supports one hotend / E-stepper. Comment out this line to continue."
+  #error "Creality v4 only supports 1 hotend / E stepper."
 #endif
 
 #ifndef BOARD_INFO_NAME

commit 38f4d8abfcc89d188674ec3b809102995efc9436
Author: Scott Lahteine <github@thinkyhead.com>
Date:   Thu May 12 20:09:25 2022 -0500

    ‚ú® Add BOARD_CREALITY_V24S1_301F4
    
    Co-Authored-By: Miguel Risco-Castillo <mriscoc@users.noreply.github.com>

diff --git a/Marlin/src/pins/stm32f1/pins_CREALITY_V4.h b/Marlin/src/pins/stm32f1/pins_CREALITY_V4.h
index 1b95032b36..5552d19ab9 100644
--- a/Marlin/src/pins/stm32f1/pins_CREALITY_V4.h
+++ b/Marlin/src/pins/stm32f1/pins_CREALITY_V4.h
@@ -43,7 +43,9 @@
 //
 // Release PB4 (Y_ENABLE_PIN) from JTAG NRST role
 //
-#define DISABLE_DEBUG
+#ifndef DISABLE_DEBUG
+  #define DISABLE_DEBUG
+#endif
 
 //
 // EEPROM

commit 64ebb78892026e22996dca50af1480232f915dac
Author: InsanityAutomation <38436470+InsanityAutomation@users.noreply.github.com>
Date:   Thu May 12 06:38:05 2022 -0400

    ‚ú® Creality CR-10 SmartPro (#24151)
    
    Co-authored-by: Scott Lahteine <github@thinkyhead.com>

diff --git a/Marlin/src/pins/stm32f1/pins_CREALITY_V4.h b/Marlin/src/pins/stm32f1/pins_CREALITY_V4.h
index b2534beab6..1b95032b36 100644
--- a/Marlin/src/pins/stm32f1/pins_CREALITY_V4.h
+++ b/Marlin/src/pins/stm32f1/pins_CREALITY_V4.h
@@ -40,6 +40,11 @@
 
 #define BOARD_NO_NATIVE_USB
 
+//
+// Release PB4 (Y_ENABLE_PIN) from JTAG NRST role
+//
+#define DISABLE_DEBUG
+
 //
 // EEPROM
 //
@@ -122,11 +127,6 @@
 #endif
 #define E0_ENABLE_PIN               X_ENABLE_PIN
 
-//
-// Release PB4 (Y_ENABLE_PIN) from JTAG NRST role
-//
-#define DISABLE_DEBUG
-
 //
 // Temperature Sensors
 //

commit 3cea0a00b102096318f44d3ba8ede29d7f14ab8b
Author: Keith Bennett <13375512+thisiskeithb@users.noreply.github.com>
Date:   Thu May 5 00:38:48 2022 -0700

    üêõ Some EEPROM size fixes (#24113)
    
    Co-authored-by: Scott Lahteine <github@thinkyhead.com>

diff --git a/Marlin/src/pins/stm32f1/pins_CREALITY_V4.h b/Marlin/src/pins/stm32f1/pins_CREALITY_V4.h
index d6d4966241..b2534beab6 100644
--- a/Marlin/src/pins/stm32f1/pins_CREALITY_V4.h
+++ b/Marlin/src/pins/stm32f1/pins_CREALITY_V4.h
@@ -51,9 +51,9 @@
 #if ENABLED(IIC_BL24CXX_EEPROM)
   #define IIC_EEPROM_SDA                    PA11
   #define IIC_EEPROM_SCL                    PA12
-  #define MARLIN_EEPROM_SIZE               0x800  // 2Kb (24C16)
+  #define MARLIN_EEPROM_SIZE               0x800  // 2K (24C16)
 #elif ENABLED(SDCARD_EEPROM_EMULATION)
-  #define MARLIN_EEPROM_SIZE               0x800  // 2Kb
+  #define MARLIN_EEPROM_SIZE               0x800  // 2K
 #endif
 
 //

commit d99d0c8a10b2d0ee540e115b15eef24a71028863
Author: Bruno Henrique de Paula <bruno.henriquy@gmail.com>
Date:   Fri Feb 4 18:57:43 2022 -0300

    üìå Distinct BOARD_CREALITY_V422 (#23674)

diff --git a/Marlin/src/pins/stm32f1/pins_CREALITY_V4.h b/Marlin/src/pins/stm32f1/pins_CREALITY_V4.h
index 6122206d6a..d6d4966241 100644
--- a/Marlin/src/pins/stm32f1/pins_CREALITY_V4.h
+++ b/Marlin/src/pins/stm32f1/pins_CREALITY_V4.h
@@ -22,7 +22,7 @@
 #pragma once
 
 /**
- * Creality 4.2.x (STM32F103RET6) board pin assignments
+ * Creality 4.2.x (STM32F103RE / STM32F103RC) board pin assignments
  */
 
 #include "env_validate.h"

commit 1636325b722f9618a9b65719d39c464bc7a3465d
Author: ellensp <530024+ellensp@users.noreply.github.com>
Date:   Sat Feb 5 05:24:38 2022 +1300

    üêõ Creality v4 cleanup, pin correction (#23666)

diff --git a/Marlin/src/pins/stm32f1/pins_CREALITY_V4.h b/Marlin/src/pins/stm32f1/pins_CREALITY_V4.h
index 3ed6888c38..6122206d6a 100644
--- a/Marlin/src/pins/stm32f1/pins_CREALITY_V4.h
+++ b/Marlin/src/pins/stm32f1/pins_CREALITY_V4.h
@@ -152,8 +152,6 @@
 //
 #define SD_DETECT_PIN                       PC7
 #define SDCARD_CONNECTION                ONBOARD
-#define ONBOARD_SPI_DEVICE                     1
-#define ONBOARD_SD_CS_PIN                   PA4   // SDSS
 #define SDIO_SUPPORT
 #define NO_SD_HOST_DRIVE                          // This board's SD is only seen by the printer
 

commit 91c7db027f3cecabc2708bcd3ec9254c70b38e8b
Author: Scott Lahteine <thinkyhead@users.noreply.github.com>
Date:   Tue Jan 25 18:33:30 2022 -0600

    ‚ú® BOARD_CREALITY_V24S1_301 (#23620)
    
    Co-Authored-By: Miguel Risco-Castillo <mriscoc@users.noreply.github.com>

diff --git a/Marlin/src/pins/stm32f1/pins_CREALITY_V4.h b/Marlin/src/pins/stm32f1/pins_CREALITY_V4.h
index dea20642b1..3ed6888c38 100644
--- a/Marlin/src/pins/stm32f1/pins_CREALITY_V4.h
+++ b/Marlin/src/pins/stm32f1/pins_CREALITY_V4.h
@@ -72,7 +72,9 @@
 //
 #define X_STOP_PIN                          PA5
 #define Y_STOP_PIN                          PA6
-#define Z_STOP_PIN                          PA7
+#ifndef Z_STOP_PIN
+  #define Z_STOP_PIN                        PA7
+#endif
 
 #ifndef Z_MIN_PROBE_PIN
   #define Z_MIN_PROBE_PIN                   PB1   // BLTouch IN

commit fd595aa01bcd139352055f4dca771c193aa35d14
Author: Scott Lahteine <github@thinkyhead.com>
Date:   Wed Jan 19 02:20:32 2022 -0600

    üé® Misc. style and cleanup

diff --git a/Marlin/src/pins/stm32f1/pins_CREALITY_V4.h b/Marlin/src/pins/stm32f1/pins_CREALITY_V4.h
index cb7e784751..dea20642b1 100644
--- a/Marlin/src/pins/stm32f1/pins_CREALITY_V4.h
+++ b/Marlin/src/pins/stm32f1/pins_CREALITY_V4.h
@@ -187,7 +187,7 @@
     #error "Define RET6_12864_LCD or VET6_12864_LCD to select pins for CR10_STOCKDISPLAY with the Creality V4 controller."
   #endif
 
-#elif EITHER(HAS_DWIN_E3V2, IS_DWIN_MARLINUI)
+#elif HAS_DWIN_E3V2 || IS_DWIN_MARLINUI
 
   // RET6 DWIN ENCODER LCD
   #define BTN_ENC                           PB14

commit 88a6e5b691d61eb93d573e4e79aea3bf5e0b4501
Author: Scott Lahteine <thinkyhead@users.noreply.github.com>
Date:   Wed Dec 29 04:17:41 2021 -0600

    ü©∫ Assert FAN_SOFT_PWM where required (#23383)

diff --git a/Marlin/src/pins/stm32f1/pins_CREALITY_V4.h b/Marlin/src/pins/stm32f1/pins_CREALITY_V4.h
index bf2a55fc7b..cb7e784751 100644
--- a/Marlin/src/pins/stm32f1/pins_CREALITY_V4.h
+++ b/Marlin/src/pins/stm32f1/pins_CREALITY_V4.h
@@ -143,9 +143,7 @@
 #ifndef FAN_PIN
   #define FAN_PIN                           PA0   // FAN
 #endif
-#if PIN_EXISTS(FAN)
-  #define FAN_SOFT_PWM
-#endif
+#define FAN_SOFT_PWM_REQUIRED
 
 //
 // SD Card

commit aa2c6387e95bdab955499627e3890561842f0a6a
Author: Scott Lahteine <github@thinkyhead.com>
Date:   Tue Oct 26 21:54:43 2021 -0500

    üé® Apply HAS_MULTI_HOTEND conditional

diff --git a/Marlin/src/pins/stm32f1/pins_CREALITY_V4.h b/Marlin/src/pins/stm32f1/pins_CREALITY_V4.h
index ea58b5b3a9..bf2a55fc7b 100644
--- a/Marlin/src/pins/stm32f1/pins_CREALITY_V4.h
+++ b/Marlin/src/pins/stm32f1/pins_CREALITY_V4.h
@@ -27,7 +27,7 @@
 
 #include "env_validate.h"
 
-#if HOTENDS > 1 || E_STEPPERS > 1
+#if HAS_MULTI_HOTEND || E_STEPPERS > 1
   #error "Creality V4 only supports one hotend / E-stepper. Comment out this line to continue."
 #endif
 

commit d79ea20dcd139ae0073051fd15405fef5b40dbf4
Author: InsanityAutomation <38436470+InsanityAutomation@users.noreply.github.com>
Date:   Mon Oct 25 01:39:48 2021 -0400

    ‚ú® Creality v2.4.S1 (Ender 7) board  (#23010)

diff --git a/Marlin/src/pins/stm32f1/pins_CREALITY_V4.h b/Marlin/src/pins/stm32f1/pins_CREALITY_V4.h
index c60d4dc2ba..ea58b5b3a9 100644
--- a/Marlin/src/pins/stm32f1/pins_CREALITY_V4.h
+++ b/Marlin/src/pins/stm32f1/pins_CREALITY_V4.h
@@ -134,9 +134,12 @@
 //
 // Heaters / Fans
 //
-#define HEATER_0_PIN                        PA1   // HEATER1
-#define HEATER_BED_PIN                      PA2   // HOT BED
-
+#ifndef HEATER_0_PIN
+  #define HEATER_0_PIN                      PA1   // HEATER1
+#endif
+#ifndef HEATER_BED_PIN
+  #define HEATER_BED_PIN                    PA2   // HOT BED
+#endif
 #ifndef FAN_PIN
   #define FAN_PIN                           PA0   // FAN
 #endif

commit 29d3996a55d00059437f6c1194bac5eec5b7b2e2
Author: Scott Lahteine <thinkyhead@users.noreply.github.com>
Date:   Sun Sep 12 19:37:33 2021 -0500

    üìå Creality 4.3.1 board variants (#22704)
    
    Co-authored-by: Chico <jjjm6000@gmail.com>

diff --git a/Marlin/src/pins/stm32f1/pins_CREALITY_V4.h b/Marlin/src/pins/stm32f1/pins_CREALITY_V4.h
index 2aa48b7499..c60d4dc2ba 100644
--- a/Marlin/src/pins/stm32f1/pins_CREALITY_V4.h
+++ b/Marlin/src/pins/stm32f1/pins_CREALITY_V4.h
@@ -88,37 +88,37 @@
 //
 // Steppers
 //
-#define X_ENABLE_PIN                        PC3
 #ifndef X_STEP_PIN
   #define X_STEP_PIN                        PC2
 #endif
 #ifndef X_DIR_PIN
   #define X_DIR_PIN                         PB9
 #endif
+#define X_ENABLE_PIN                        PC3   // Shared
 
-#define Y_ENABLE_PIN                        PC3
 #ifndef Y_STEP_PIN
   #define Y_STEP_PIN                        PB8
 #endif
 #ifndef Y_DIR_PIN
   #define Y_DIR_PIN                         PB7
 #endif
+#define Y_ENABLE_PIN                X_ENABLE_PIN
 
-#define Z_ENABLE_PIN                        PC3
 #ifndef Z_STEP_PIN
   #define Z_STEP_PIN                        PB6
 #endif
 #ifndef Z_DIR_PIN
   #define Z_DIR_PIN                         PB5
 #endif
+#define Z_ENABLE_PIN                X_ENABLE_PIN
 
-#define E0_ENABLE_PIN                       PC3
 #ifndef E0_STEP_PIN
   #define E0_STEP_PIN                       PB4
 #endif
 #ifndef E0_DIR_PIN
   #define E0_DIR_PIN                        PB3
 #endif
+#define E0_ENABLE_PIN               X_ENABLE_PIN
 
 //
 // Release PB4 (Y_ENABLE_PIN) from JTAG NRST role

commit 43a9c71ef7a1c9e9e294707017d372d344c774ce
Author: Jyers <76993396+Jyers@users.noreply.github.com>
Date:   Mon Sep 6 21:06:27 2021 -0700

    ‚ú® Ender-3 V2 with Jyers UI (#22422)

diff --git a/Marlin/src/pins/stm32f1/pins_CREALITY_V4.h b/Marlin/src/pins/stm32f1/pins_CREALITY_V4.h
index 65d3fe731d..2aa48b7499 100644
--- a/Marlin/src/pins/stm32f1/pins_CREALITY_V4.h
+++ b/Marlin/src/pins/stm32f1/pins_CREALITY_V4.h
@@ -186,7 +186,7 @@
     #error "Define RET6_12864_LCD or VET6_12864_LCD to select pins for CR10_STOCKDISPLAY with the Creality V4 controller."
   #endif
 
-#elif EITHER(DWIN_CREALITY_LCD, IS_DWIN_MARLINUI)
+#elif EITHER(HAS_DWIN_E3V2, IS_DWIN_MARLINUI)
 
   // RET6 DWIN ENCODER LCD
   #define BTN_ENC                           PB14

commit e33e101850797f4d3edecd4eb18e9ae63c89ef13
Author: Scott Lahteine <thinkyhead@users.noreply.github.com>
Date:   Sun Aug 29 20:54:51 2021 -0500

    üé® Tweak pins, comment formatting

diff --git a/Marlin/src/pins/stm32f1/pins_CREALITY_V4.h b/Marlin/src/pins/stm32f1/pins_CREALITY_V4.h
index 056fdf4c29..65d3fe731d 100644
--- a/Marlin/src/pins/stm32f1/pins_CREALITY_V4.h
+++ b/Marlin/src/pins/stm32f1/pins_CREALITY_V4.h
@@ -154,35 +154,37 @@
 #define SDIO_SUPPORT
 #define NO_SD_HOST_DRIVE                          // This board's SD is only seen by the printer
 
-#if ENABLED(CR10_STOCKDISPLAY) && NONE(RET6_12864_LCD, VET6_12864_LCD)
-  #error "Define RET6_12864_LCD or VET6_12864_LCD to select pins for CR10_STOCKDISPLAY with the Creality V4 controller."
-#endif
+#if ENABLED(CR10_STOCKDISPLAY)
 
-#if ENABLED(RET6_12864_LCD)
+  #if ENABLED(RET6_12864_LCD)
 
-  // RET6 12864 LCD
-  #define LCD_PINS_RS                       PB12
-  #define LCD_PINS_ENABLE                   PB15
-  #define LCD_PINS_D4                       PB13
+    // RET6 12864 LCD
+    #define LCD_PINS_RS                     PB12
+    #define LCD_PINS_ENABLE                 PB15
+    #define LCD_PINS_D4                     PB13
 
-  #define BTN_ENC                           PB2
-  #define BTN_EN1                           PB10
-  #define BTN_EN2                           PB14
+    #define BTN_ENC                         PB2
+    #define BTN_EN1                         PB10
+    #define BTN_EN2                         PB14
 
-  #ifndef HAS_PIN_27_BOARD
-    #define BEEPER_PIN                      PC6
-  #endif
+    #ifndef HAS_PIN_27_BOARD
+      #define BEEPER_PIN                    PC6
+    #endif
 
-#elif ENABLED(VET6_12864_LCD)
+  #elif ENABLED(VET6_12864_LCD)
 
-  // VET6 12864 LCD
-  #define LCD_PINS_RS                       PA4
-  #define LCD_PINS_ENABLE                   PA7
-  #define LCD_PINS_D4                       PA5
+    // VET6 12864 LCD
+    #define LCD_PINS_RS                     PA4
+    #define LCD_PINS_ENABLE                 PA7
+    #define LCD_PINS_D4                     PA5
 
-  #define BTN_ENC                           PC5
-  #define BTN_EN1                           PB10
-  #define BTN_EN2                           PA6
+    #define BTN_ENC                         PC5
+    #define BTN_EN1                         PB10
+    #define BTN_EN2                         PA6
+
+  #else
+    #error "Define RET6_12864_LCD or VET6_12864_LCD to select pins for CR10_STOCKDISPLAY with the Creality V4 controller."
+  #endif
 
 #elif EITHER(DWIN_CREALITY_LCD, IS_DWIN_MARLINUI)
 

commit 4f35858c9ef4de8e291d8006041aca0969c9d825
Author: Scott Lahteine <thinkyhead@users.noreply.github.com>
Date:   Tue Aug 24 18:07:41 2021 -0500

    üé® EXP1/2 headers and pins cleanup (#22628)

diff --git a/Marlin/src/pins/stm32f1/pins_CREALITY_V4.h b/Marlin/src/pins/stm32f1/pins_CREALITY_V4.h
index 0437156c0c..056fdf4c29 100644
--- a/Marlin/src/pins/stm32f1/pins_CREALITY_V4.h
+++ b/Marlin/src/pins/stm32f1/pins_CREALITY_V4.h
@@ -194,7 +194,6 @@
   //#define LCD_LED_PIN                     PB2
   #ifndef BEEPER_PIN
     #define BEEPER_PIN                      PB13
-    //#undef SPEAKER
   #endif
 
 #elif ENABLED(DWIN_VET6_CREALITY_LCD)

commit 7d416bd055e3ccddf765208b2937dcc1fcd4ea8b
Author: Scott Lahteine <thinkyhead@users.noreply.github.com>
Date:   Sun Aug 22 05:25:07 2021 -0500

    ‚ú® MarlinUI for Ender 3 v2 DWIN LCD (#22594)
    
    Co-Authored-By: Taylor Talkington <taylor.talkington@gmail.com>

diff --git a/Marlin/src/pins/stm32f1/pins_CREALITY_V4.h b/Marlin/src/pins/stm32f1/pins_CREALITY_V4.h
index 6b3c4ed8fa..0437156c0c 100644
--- a/Marlin/src/pins/stm32f1/pins_CREALITY_V4.h
+++ b/Marlin/src/pins/stm32f1/pins_CREALITY_V4.h
@@ -184,7 +184,7 @@
   #define BTN_EN1                           PB10
   #define BTN_EN2                           PA6
 
-#elif ENABLED(DWIN_CREALITY_LCD)
+#elif EITHER(DWIN_CREALITY_LCD, IS_DWIN_MARLINUI)
 
   // RET6 DWIN ENCODER LCD
   #define BTN_ENC                           PB14
@@ -194,7 +194,7 @@
   //#define LCD_LED_PIN                     PB2
   #ifndef BEEPER_PIN
     #define BEEPER_PIN                      PB13
-    #undef SPEAKER
+    //#undef SPEAKER
   #endif
 
 #elif ENABLED(DWIN_VET6_CREALITY_LCD)

commit 9bf5cddb46259335753513846bb30c38ef4273b7
Author: Scott Lahteine <thinkyhead@users.noreply.github.com>
Date:   Sat Jun 12 16:28:30 2021 -0500

    ü©π Use `#pragma once` in pins files

diff --git a/Marlin/src/pins/stm32f1/pins_CREALITY_V4.h b/Marlin/src/pins/stm32f1/pins_CREALITY_V4.h
index 421e339058..6b3c4ed8fa 100644
--- a/Marlin/src/pins/stm32f1/pins_CREALITY_V4.h
+++ b/Marlin/src/pins/stm32f1/pins_CREALITY_V4.h
@@ -19,6 +19,7 @@
  * along with this program.  If not, see <https://www.gnu.org/licenses/>.
  *
  */
+#pragma once
 
 /**
  * Creality 4.2.x (STM32F103RET6) board pin assignments

commit 78de32e5529fdc140a61fbe9ccca338b4fe0abc0
Author: Ken Sanislo <ksanislo@users.noreply.github.com>
Date:   Sun May 2 00:09:23 2021 -0700

    Allow Creality V4 SERVO0 and PROBE pin overrides (#21770)

diff --git a/Marlin/src/pins/stm32f1/pins_CREALITY_V4.h b/Marlin/src/pins/stm32f1/pins_CREALITY_V4.h
index 733e24cfac..421e339058 100644
--- a/Marlin/src/pins/stm32f1/pins_CREALITY_V4.h
+++ b/Marlin/src/pins/stm32f1/pins_CREALITY_V4.h
@@ -58,10 +58,12 @@
 //
 // Servos
 //
-#ifndef HAS_PIN_27_BOARD
-  #define SERVO0_PIN                        PB0   // BLTouch OUT
-#else
-  #define SERVO0_PIN                        PC6
+#ifndef SERVO0_PIN
+  #ifndef HAS_PIN_27_BOARD
+    #define SERVO0_PIN                      PB0   // BLTouch OUT
+  #else
+    #define SERVO0_PIN                      PC6
+  #endif
 #endif
 
 //
@@ -71,7 +73,9 @@
 #define Y_STOP_PIN                          PA6
 #define Z_STOP_PIN                          PA7
 
-#define Z_MIN_PROBE_PIN                     PB1   // BLTouch IN
+#ifndef Z_MIN_PROBE_PIN
+  #define Z_MIN_PROBE_PIN                   PB1   // BLTouch IN
+#endif
 
 //
 // Filament Runout Sensor

commit 3ea56ba4c72fb1e9c4bb4a896b8cf87361a48f4b
Author: Scott Lahteine <thinkyhead@users.noreply.github.com>
Date:   Fri Mar 5 04:30:52 2021 -0600

    Tweak tests, consolidate pins target validation (#21254)

diff --git a/Marlin/src/pins/stm32f1/pins_CREALITY_V4.h b/Marlin/src/pins/stm32f1/pins_CREALITY_V4.h
index 88806bdb18..733e24cfac 100644
--- a/Marlin/src/pins/stm32f1/pins_CREALITY_V4.h
+++ b/Marlin/src/pins/stm32f1/pins_CREALITY_V4.h
@@ -24,9 +24,9 @@
  * Creality 4.2.x (STM32F103RET6) board pin assignments
  */
 
-#if NOT_TARGET(__STM32F1__)
-  #error "Oops! Select an STM32F1 board in 'Tools > Board.'"
-#elif HOTENDS > 1 || E_STEPPERS > 1
+#include "env_validate.h"
+
+#if HOTENDS > 1 || E_STEPPERS > 1
   #error "Creality V4 only supports one hotend / E-stepper. Comment out this line to continue."
 #endif
 

commit 01215f5015d04ac37c6ec230323772737a983948
Author: Scott Lahteine <thinkyhead@users.noreply.github.com>
Date:   Fri Feb 12 03:52:21 2021 -0600

    Ender 3 V2 DWIN cleanup (#21061)

diff --git a/Marlin/src/pins/stm32f1/pins_CREALITY_V4.h b/Marlin/src/pins/stm32f1/pins_CREALITY_V4.h
index 8b5b8562a2..88806bdb18 100644
--- a/Marlin/src/pins/stm32f1/pins_CREALITY_V4.h
+++ b/Marlin/src/pins/stm32f1/pins_CREALITY_V4.h
@@ -132,8 +132,12 @@
 #define HEATER_0_PIN                        PA1   // HEATER1
 #define HEATER_BED_PIN                      PA2   // HOT BED
 
-#define FAN_PIN                             PA0   // FAN
-#define FAN_SOFT_PWM
+#ifndef FAN_PIN
+  #define FAN_PIN                           PA0   // FAN
+#endif
+#if PIN_EXISTS(FAN)
+  #define FAN_SOFT_PWM
+#endif
 
 //
 // SD Card

commit 69999f962a7783f0a79c4fc87b62caaf07d93187
Author: Scott Lahteine <thinkyhead@users.noreply.github.com>
Date:   Mon Dec 14 21:27:05 2020 -0600

    Please install the EditorConfig plugin

diff --git a/Marlin/src/pins/stm32f1/pins_CREALITY_V4.h b/Marlin/src/pins/stm32f1/pins_CREALITY_V4.h
index 69371f0f73..8b5b8562a2 100644
--- a/Marlin/src/pins/stm32f1/pins_CREALITY_V4.h
+++ b/Marlin/src/pins/stm32f1/pins_CREALITY_V4.h
@@ -60,7 +60,7 @@
 //
 #ifndef HAS_PIN_27_BOARD
   #define SERVO0_PIN                        PB0   // BLTouch OUT
-#else 
+#else
   #define SERVO0_PIN                        PC6
 #endif
 

commit 2eab92093500784a31175112e64887455b76d274
Author: ellensp <ellensp@hotmail.com>
Date:   Sun Dec 13 07:59:17 2020 +1300

    Add HAS_PIN_27_BOARD for CREALITY_V4 (#20446)
    
    Co-authored-by: ellensp <ellensp@hotmsil.com>

diff --git a/Marlin/src/pins/stm32f1/pins_CREALITY_V4.h b/Marlin/src/pins/stm32f1/pins_CREALITY_V4.h
index 44be73029d..69371f0f73 100644
--- a/Marlin/src/pins/stm32f1/pins_CREALITY_V4.h
+++ b/Marlin/src/pins/stm32f1/pins_CREALITY_V4.h
@@ -48,17 +48,21 @@
 #endif
 
 #if ENABLED(IIC_BL24CXX_EEPROM)
-  #define IIC_EEPROM_SDA                  PA11
-  #define IIC_EEPROM_SCL                  PA12
-  #define MARLIN_EEPROM_SIZE             0x800  // 2Kb (24C16)
+  #define IIC_EEPROM_SDA                    PA11
+  #define IIC_EEPROM_SCL                    PA12
+  #define MARLIN_EEPROM_SIZE               0x800  // 2Kb (24C16)
 #elif ENABLED(SDCARD_EEPROM_EMULATION)
-  #define MARLIN_EEPROM_SIZE             0x800  // 2Kb
+  #define MARLIN_EEPROM_SIZE               0x800  // 2Kb
 #endif
 
 //
 // Servos
 //
-#define SERVO0_PIN                          PB0   // BLTouch OUT
+#ifndef HAS_PIN_27_BOARD
+  #define SERVO0_PIN                        PB0   // BLTouch OUT
+#else 
+  #define SERVO0_PIN                        PC6
+#endif
 
 //
 // Limit Switches
@@ -156,7 +160,9 @@
   #define BTN_EN1                           PB10
   #define BTN_EN2                           PB14
 
-  #define BEEPER_PIN                        PC6
+  #ifndef HAS_PIN_27_BOARD
+    #define BEEPER_PIN                      PC6
+  #endif
 
 #elif ENABLED(VET6_12864_LCD)
 

commit 885b0d2ec5f431d07aced632746eec5e7e371b6d
Author: Scott Lahteine <github@thinkyhead.com>
Date:   Tue Dec 8 20:17:55 2020 -0600

    Style, spacing, typo cleanup for recent changes

diff --git a/Marlin/src/pins/stm32f1/pins_CREALITY_V4.h b/Marlin/src/pins/stm32f1/pins_CREALITY_V4.h
index a7c06cb99d..44be73029d 100644
--- a/Marlin/src/pins/stm32f1/pins_CREALITY_V4.h
+++ b/Marlin/src/pins/stm32f1/pins_CREALITY_V4.h
@@ -1,9 +1,9 @@
 /**
  * Marlin 3D Printer Firmware
- * Copyright (C) 2016 MarlinFirmware [https://github.com/MarlinFirmware/Marlin]
+ * Copyright (c) 2020 MarlinFirmware [https://github.com/MarlinFirmware/Marlin]
  *
  * Based on Sprinter and grbl.
- * Copyright (C) 2011 Camiel Gubbels / Erik van der Zalm
+ * Copyright (c) 2011 Camiel Gubbels / Erik van der Zalm
  *
  * This program is free software: you can redistribute it and/or modify
  * it under the terms of the GNU General Public License as published by

commit 9e68c9a214e3eed1eafff46851f446d275475dd0
Author: Scott Lahteine <github@thinkyhead.com>
Date:   Sat Dec 5 18:18:28 2020 -0600

    Creality 4.5.2 format and fix

diff --git a/Marlin/src/pins/stm32f1/pins_CREALITY_V4.h b/Marlin/src/pins/stm32f1/pins_CREALITY_V4.h
index c66bca8540..a7c06cb99d 100644
--- a/Marlin/src/pins/stm32f1/pins_CREALITY_V4.h
+++ b/Marlin/src/pins/stm32f1/pins_CREALITY_V4.h
@@ -27,7 +27,7 @@
 #if NOT_TARGET(__STM32F1__)
   #error "Oops! Select an STM32F1 board in 'Tools > Board.'"
 #elif HOTENDS > 1 || E_STEPPERS > 1
-  #error "Creality_V4 only supports one hotend / E-stepper. Comment out this line to continue."
+  #error "Creality V4 only supports one hotend / E-stepper. Comment out this line to continue."
 #endif
 
 #ifndef BOARD_INFO_NAME

commit e8ed880e6256704630009e1ae911bf476e09fd1a
Author: InsanityAutomation <38436470+InsanityAutomation@users.noreply.github.com>
Date:   Sat Dec 5 15:23:58 2020 -0600

    Add Creality 4.5.2 board (#20378)
    
    Co-authored-by: Jason Smith <jason.inet@gmail.com>

diff --git a/Marlin/src/pins/stm32f1/pins_CREALITY_V4.h b/Marlin/src/pins/stm32f1/pins_CREALITY_V4.h
index 28ff16d4e4..c66bca8540 100644
--- a/Marlin/src/pins/stm32f1/pins_CREALITY_V4.h
+++ b/Marlin/src/pins/stm32f1/pins_CREALITY_V4.h
@@ -21,13 +21,13 @@
  */
 
 /**
- * CREALITY (STM32F103) board pin assignments
+ * Creality 4.2.x (STM32F103RET6) board pin assignments
  */
 
 #if NOT_TARGET(__STM32F1__)
   #error "Oops! Select an STM32F1 board in 'Tools > Board.'"
 #elif HOTENDS > 1 || E_STEPPERS > 1
-  #error "Creality V4 only supports one hotend / E-stepper. Comment out this line to continue."
+  #error "Creality_V4 only supports one hotend / E-stepper. Comment out this line to continue."
 #endif
 
 #ifndef BOARD_INFO_NAME

commit a4d6908d556afd77cf66ef7a8adc7c34fee81674
Author: Jason Smith <jason.inet@gmail.com>
Date:   Wed Dec 2 03:23:34 2020 -0800

    Permit SD EEPROM emulation on E3V2 (#20353)

diff --git a/Marlin/src/pins/stm32f1/pins_CREALITY_V4.h b/Marlin/src/pins/stm32f1/pins_CREALITY_V4.h
index f0c1611cb8..28ff16d4e4 100644
--- a/Marlin/src/pins/stm32f1/pins_CREALITY_V4.h
+++ b/Marlin/src/pins/stm32f1/pins_CREALITY_V4.h
@@ -43,30 +43,16 @@
 // EEPROM
 //
 #if NO_EEPROM_SELECTED
-  // FLASH
-  //#define FLASH_EEPROM_EMULATION
-
-  // I2C
-  #define IIC_BL24CXX_EEPROM                      // EEPROM on I2C-0 used only for display settings
-  #if ENABLED(IIC_BL24CXX_EEPROM)
-    #define IIC_EEPROM_SDA                  PA11
-    #define IIC_EEPROM_SCL                  PA12
-    #define MARLIN_EEPROM_SIZE             0x800  // 2Kb (24C16)
-  #else
-    #define SDCARD_EEPROM_EMULATION               // SD EEPROM until all EEPROM is BL24CXX
-    #define MARLIN_EEPROM_SIZE             0x800  // 2Kb
-  #endif
-
-  // SPI
-  //#define SPI_EEPROM                            // EEPROM on SPI-0
-  //#define SPI_CHAN_EEPROM1  ?
-  //#define SPI_EEPROM1_CS    ?
-
-  // 2K EEPROM
-  //#define SPI_EEPROM2_CS    ?
+  #define IIC_BL24CXX_EEPROM                      // EEPROM on I2C-0
+  //#define SDCARD_EEPROM_EMULATION
+#endif
 
-  // 32Mb FLASH
-  //#define SPI_FLASH_CS      ?
+#if ENABLED(IIC_BL24CXX_EEPROM)
+  #define IIC_EEPROM_SDA                  PA11
+  #define IIC_EEPROM_SCL                  PA12
+  #define MARLIN_EEPROM_SIZE             0x800  // 2Kb (24C16)
+#elif ENABLED(SDCARD_EEPROM_EMULATION)
+  #define MARLIN_EEPROM_SIZE             0x800  // 2Kb
 #endif
 
 //

commit 4f4843a84578dfb27176fbea855faa407453e706
Author: Scott Lahteine <thinkyhead@users.noreply.github.com>
Date:   Thu Nov 26 01:08:12 2020 -0600

    Tweak some pin errors

diff --git a/Marlin/src/pins/stm32f1/pins_CREALITY_V4.h b/Marlin/src/pins/stm32f1/pins_CREALITY_V4.h
index c6f2dd8b80..f0c1611cb8 100644
--- a/Marlin/src/pins/stm32f1/pins_CREALITY_V4.h
+++ b/Marlin/src/pins/stm32f1/pins_CREALITY_V4.h
@@ -27,7 +27,7 @@
 #if NOT_TARGET(__STM32F1__)
   #error "Oops! Select an STM32F1 board in 'Tools > Board.'"
 #elif HOTENDS > 1 || E_STEPPERS > 1
-  #error "CREALITY supports up to 1 hotends / E-steppers. Comment out this line to continue."
+  #error "Creality V4 only supports one hotend / E-stepper. Comment out this line to continue."
 #endif
 
 #ifndef BOARD_INFO_NAME

commit a439892d7a50fba1de9c30ffe22e73600f54952f
Author: Jason Smith <jason.inet@gmail.com>
Date:   Fri Nov 6 22:48:17 2020 -0800

    Sanity-check illegal native USB (#20047)
    
    Co-authored-by: Scott Lahteine <thinkyhead@users.noreply.github.com>

diff --git a/Marlin/src/pins/stm32f1/pins_CREALITY_V4.h b/Marlin/src/pins/stm32f1/pins_CREALITY_V4.h
index eb910dd846..c6f2dd8b80 100644
--- a/Marlin/src/pins/stm32f1/pins_CREALITY_V4.h
+++ b/Marlin/src/pins/stm32f1/pins_CREALITY_V4.h
@@ -26,9 +26,7 @@
 
 #if NOT_TARGET(__STM32F1__)
   #error "Oops! Select an STM32F1 board in 'Tools > Board.'"
-#endif
-
-#if HOTENDS > 1 || E_STEPPERS > 1
+#elif HOTENDS > 1 || E_STEPPERS > 1
   #error "CREALITY supports up to 1 hotends / E-steppers. Comment out this line to continue."
 #endif
 
@@ -39,6 +37,8 @@
   #define DEFAULT_MACHINE_NAME "Ender 3 V2"
 #endif
 
+#define BOARD_NO_NATIVE_USB
+
 //
 // EEPROM
 //

commit 023cb54fae55b6d05a028257036c52cd2e3b89b1
Author: Jason Smith <jason.inet@gmail.com>
Date:   Wed Sep 23 13:07:34 2020 -0700

    MKS Robin Mini uses ONBOARD_SPI_DEVICE (#19460)

diff --git a/Marlin/src/pins/stm32f1/pins_CREALITY_V4.h b/Marlin/src/pins/stm32f1/pins_CREALITY_V4.h
index c1f1e315df..eb910dd846 100644
--- a/Marlin/src/pins/stm32f1/pins_CREALITY_V4.h
+++ b/Marlin/src/pins/stm32f1/pins_CREALITY_V4.h
@@ -150,7 +150,7 @@
 //
 #define SD_DETECT_PIN                       PC7
 #define SDCARD_CONNECTION                ONBOARD
-#define ON_BOARD_SPI_DEVICE                    1
+#define ONBOARD_SPI_DEVICE                     1
 #define ONBOARD_SD_CS_PIN                   PA4   // SDSS
 #define SDIO_SUPPORT
 #define NO_SD_HOST_DRIVE                          // This board's SD is only seen by the printer

commit 90bc1993b6811623dd9d0de00251e0c63415cb49
Author: Victor Oliveira <rhapsodyv@gmail.com>
Date:   Wed Sep 23 17:06:36 2020 -0300

    Include pins.h in dependencies script (#19468)

diff --git a/Marlin/src/pins/stm32f1/pins_CREALITY_V4.h b/Marlin/src/pins/stm32f1/pins_CREALITY_V4.h
index f122a2b7c2..c1f1e315df 100644
--- a/Marlin/src/pins/stm32f1/pins_CREALITY_V4.h
+++ b/Marlin/src/pins/stm32f1/pins_CREALITY_V4.h
@@ -24,7 +24,7 @@
  * CREALITY (STM32F103) board pin assignments
  */
 
-#ifndef __STM32F1__
+#if NOT_TARGET(__STM32F1__)
   #error "Oops! Select an STM32F1 board in 'Tools > Board.'"
 #endif
 

commit 9b78138600da8a069fd0bda5919b37be96b07d48
Author: Scott Lahteine <thinkyhead@users.noreply.github.com>
Date:   Wed Sep 9 17:56:01 2020 -0500

    General cleanup

diff --git a/Marlin/src/pins/stm32f1/pins_CREALITY_V4.h b/Marlin/src/pins/stm32f1/pins_CREALITY_V4.h
index 090f3ee3f8..f122a2b7c2 100644
--- a/Marlin/src/pins/stm32f1/pins_CREALITY_V4.h
+++ b/Marlin/src/pins/stm32f1/pins_CREALITY_V4.h
@@ -161,7 +161,7 @@
 
 #if ENABLED(RET6_12864_LCD)
 
-  /* RET6 12864 LCD */
+  // RET6 12864 LCD
   #define LCD_PINS_RS                       PB12
   #define LCD_PINS_ENABLE                   PB15
   #define LCD_PINS_D4                       PB13
@@ -174,7 +174,7 @@
 
 #elif ENABLED(VET6_12864_LCD)
 
-  /* VET6 12864 LCD */
+  // VET6 12864 LCD
   #define LCD_PINS_RS                       PA4
   #define LCD_PINS_ENABLE                   PA7
   #define LCD_PINS_D4                       PA5
@@ -185,7 +185,7 @@
 
 #elif ENABLED(DWIN_CREALITY_LCD)
 
-  /* RET6 DWIN ENCODER LCD */
+  // RET6 DWIN ENCODER LCD
   #define BTN_ENC                           PB14
   #define BTN_EN1                           PB15
   #define BTN_EN2                           PB12
@@ -198,7 +198,7 @@
 
 #elif ENABLED(DWIN_VET6_CREALITY_LCD)
 
-  /* VET6 DWIN ENCODER LCD */
+  // VET6 DWIN ENCODER LCD
   #define BTN_ENC                           PA6
   #define BTN_EN1                           PA7
   #define BTN_EN2                           PA4

commit 3002e1cd60c2cd724c046c50371b3c833eb21a6d
Author: Scott Lahteine <github@thinkyhead.com>
Date:   Fri Sep 4 14:15:06 2020 -0500

    Fix Creality V4 SD Detect

diff --git a/Marlin/src/pins/stm32f1/pins_CREALITY_V4.h b/Marlin/src/pins/stm32f1/pins_CREALITY_V4.h
index ded0ba405b..090f3ee3f8 100644
--- a/Marlin/src/pins/stm32f1/pins_CREALITY_V4.h
+++ b/Marlin/src/pins/stm32f1/pins_CREALITY_V4.h
@@ -153,6 +153,7 @@
 #define ON_BOARD_SPI_DEVICE                    1
 #define ONBOARD_SD_CS_PIN                   PA4   // SDSS
 #define SDIO_SUPPORT
+#define NO_SD_HOST_DRIVE                          // This board's SD is only seen by the printer
 
 #if ENABLED(CR10_STOCKDISPLAY) && NONE(RET6_12864_LCD, VET6_12864_LCD)
   #error "Define RET6_12864_LCD or VET6_12864_LCD to select pins for CR10_STOCKDISPLAY with the Creality V4 controller."

commit 21070c0aaf433ddc2ff00d9959a8704a8185e884
Author: Scott Lahteine <thinkyhead@users.noreply.github.com>
Date:   Thu Aug 27 14:01:56 2020 -0500

    Fix Creality V4 probe pin

diff --git a/Marlin/src/pins/stm32f1/pins_CREALITY_V4.h b/Marlin/src/pins/stm32f1/pins_CREALITY_V4.h
index 9ee8aa7423..ded0ba405b 100644
--- a/Marlin/src/pins/stm32f1/pins_CREALITY_V4.h
+++ b/Marlin/src/pins/stm32f1/pins_CREALITY_V4.h
@@ -81,7 +81,7 @@
 #define Y_STOP_PIN                          PA6
 #define Z_STOP_PIN                          PA7
 
-#define Z_PROBE_PIN                         PB1   // BLTouch IN
+#define Z_MIN_PROBE_PIN                     PB1   // BLTouch IN
 
 //
 // Filament Runout Sensor

commit a9f7e855d8c030d0d9f34f950a66824b576548b5
Author: Scott Lahteine <thinkyhead@users.noreply.github.com>
Date:   Sat Aug 22 01:22:14 2020 -0500

    Reformat pins files

diff --git a/Marlin/src/pins/stm32f1/pins_CREALITY_V4.h b/Marlin/src/pins/stm32f1/pins_CREALITY_V4.h
index f42d786695..9ee8aa7423 100644
--- a/Marlin/src/pins/stm32f1/pins_CREALITY_V4.h
+++ b/Marlin/src/pins/stm32f1/pins_CREALITY_V4.h
@@ -51,10 +51,10 @@
   #if ENABLED(IIC_BL24CXX_EEPROM)
     #define IIC_EEPROM_SDA                  PA11
     #define IIC_EEPROM_SCL                  PA12
-    #define MARLIN_EEPROM_SIZE 0x800              // 2Kb (24C16)
+    #define MARLIN_EEPROM_SIZE             0x800  // 2Kb (24C16)
   #else
     #define SDCARD_EEPROM_EMULATION               // SD EEPROM until all EEPROM is BL24CXX
-    #define MARLIN_EEPROM_SIZE 0x800              // 2Kb
+    #define MARLIN_EEPROM_SIZE             0x800  // 2Kb
   #endif
 
   // SPI
@@ -150,7 +150,7 @@
 //
 #define SD_DETECT_PIN                       PC7
 #define SDCARD_CONNECTION                ONBOARD
-#define ON_BOARD_SPI_DEVICE 1
+#define ON_BOARD_SPI_DEVICE                    1
 #define ONBOARD_SD_CS_PIN                   PA4   // SDSS
 #define SDIO_SUPPORT
 

commit 04909a201002cee986ad2d86b910f13196f0088d
Author: ellensp <ellensp@hotmail.com>
Date:   Sat Aug 22 14:56:18 2020 +1200

    Creality3D v4.2.7 (#19088)

diff --git a/Marlin/src/pins/stm32f1/pins_CREALITY_V4.h b/Marlin/src/pins/stm32f1/pins_CREALITY_V4.h
index 5aab757129..f42d786695 100644
--- a/Marlin/src/pins/stm32f1/pins_CREALITY_V4.h
+++ b/Marlin/src/pins/stm32f1/pins_CREALITY_V4.h
@@ -32,8 +32,12 @@
   #error "CREALITY supports up to 1 hotends / E-steppers. Comment out this line to continue."
 #endif
 
-#define BOARD_INFO_NAME      "CREALITY V4"
-#define DEFAULT_MACHINE_NAME "Ender 3 V2"
+#ifndef BOARD_INFO_NAME
+  #define BOARD_INFO_NAME      "Creality V4"
+#endif
+#ifndef DEFAULT_MACHINE_NAME
+  #define DEFAULT_MACHINE_NAME "Ender 3 V2"
+#endif
 
 //
 // EEPROM
@@ -90,20 +94,36 @@
 // Steppers
 //
 #define X_ENABLE_PIN                        PC3
-#define X_STEP_PIN                          PC2
-#define X_DIR_PIN                           PB9
+#ifndef X_STEP_PIN
+  #define X_STEP_PIN                        PC2
+#endif
+#ifndef X_DIR_PIN
+  #define X_DIR_PIN                         PB9
+#endif
 
 #define Y_ENABLE_PIN                        PC3
-#define Y_STEP_PIN                          PB8
-#define Y_DIR_PIN                           PB7
+#ifndef Y_STEP_PIN
+  #define Y_STEP_PIN                        PB8
+#endif
+#ifndef Y_DIR_PIN
+  #define Y_DIR_PIN                         PB7
+#endif
 
 #define Z_ENABLE_PIN                        PC3
-#define Z_STEP_PIN                          PB6
-#define Z_DIR_PIN                           PB5
+#ifndef Z_STEP_PIN
+  #define Z_STEP_PIN                        PB6
+#endif
+#ifndef Z_DIR_PIN
+  #define Z_DIR_PIN                         PB5
+#endif
 
 #define E0_ENABLE_PIN                       PC3
-#define E0_STEP_PIN                         PB4
-#define E0_DIR_PIN                          PB3
+#ifndef E0_STEP_PIN
+  #define E0_STEP_PIN                       PB4
+#endif
+#ifndef E0_DIR_PIN
+  #define E0_DIR_PIN                        PB3
+#endif
 
 //
 // Release PB4 (Y_ENABLE_PIN) from JTAG NRST role

commit 2cbc84855bfd2d1ccb6d2861573fd612b3e86d0a
Author: Scott Lahteine <thinkyhead@users.noreply.github.com>
Date:   Wed Aug 19 01:49:38 2020 -0500

    Creality DWIN simple beeper

diff --git a/Marlin/src/pins/stm32f1/pins_CREALITY_V4.h b/Marlin/src/pins/stm32f1/pins_CREALITY_V4.h
index c36b4561b0..5aab757129 100644
--- a/Marlin/src/pins/stm32f1/pins_CREALITY_V4.h
+++ b/Marlin/src/pins/stm32f1/pins_CREALITY_V4.h
@@ -170,7 +170,10 @@
   #define BTN_EN2                           PB12
 
   //#define LCD_LED_PIN                     PB2
-  #define BEEPER_PIN                        PB13
+  #ifndef BEEPER_PIN
+    #define BEEPER_PIN                      PB13
+    #undef SPEAKER
+  #endif
 
 #elif ENABLED(DWIN_VET6_CREALITY_LCD)
 

commit 19818a95a2bd10fe98431023a502229cbfa82f3a
Author: ellensp <ellensp@hotmail.com>
Date:   Sun Aug 16 15:57:07 2020 +1200

    Checks for CR10_STOCKDISPLAY with Creality v4  (#19019)

diff --git a/Marlin/src/pins/stm32f1/pins_CREALITY_V4.h b/Marlin/src/pins/stm32f1/pins_CREALITY_V4.h
index ed281eb00c..c36b4561b0 100644
--- a/Marlin/src/pins/stm32f1/pins_CREALITY_V4.h
+++ b/Marlin/src/pins/stm32f1/pins_CREALITY_V4.h
@@ -134,6 +134,10 @@
 #define ONBOARD_SD_CS_PIN                   PA4   // SDSS
 #define SDIO_SUPPORT
 
+#if ENABLED(CR10_STOCKDISPLAY) && NONE(RET6_12864_LCD, VET6_12864_LCD)
+  #error "Define RET6_12864_LCD or VET6_12864_LCD to select pins for CR10_STOCKDISPLAY with the Creality V4 controller."
+#endif
+
 #if ENABLED(RET6_12864_LCD)
 
   /* RET6 12864 LCD */
@@ -146,6 +150,7 @@
   #define BTN_EN2                           PB14
 
   #define BEEPER_PIN                        PC6
+
 #elif ENABLED(VET6_12864_LCD)
 
   /* VET6 12864 LCD */

commit 87ff532a419f3053c1745160a8c370c83f4ab548
Author: fleek <flee7100@gmail.com>
Date:   Fri Jul 24 16:58:46 2020 +0800

    Filament Runout pin for Creality v4.2.2 board (#18763)

diff --git a/Marlin/src/pins/stm32f1/pins_CREALITY_V4.h b/Marlin/src/pins/stm32f1/pins_CREALITY_V4.h
index 8a413945b7..ed281eb00c 100644
--- a/Marlin/src/pins/stm32f1/pins_CREALITY_V4.h
+++ b/Marlin/src/pins/stm32f1/pins_CREALITY_V4.h
@@ -79,6 +79,13 @@
 
 #define Z_PROBE_PIN                         PB1   // BLTouch IN
 
+//
+// Filament Runout Sensor
+//
+#ifndef FIL_RUNOUT_PIN
+  #define FIL_RUNOUT_PIN                    PA4   // "Pulled-high"
+#endif
+
 //
 // Steppers
 //

commit 451f48231d922d473bae27d2f8992857f0bc3fe2
Author: Scott Lahteine <thinkyhead@users.noreply.github.com>
Date:   Fri Jul 24 03:09:14 2020 -0500

    Ender 3 V2 BL24C16 EEPROM support (#18758)

diff --git a/Marlin/src/pins/stm32f1/pins_CREALITY_V4.h b/Marlin/src/pins/stm32f1/pins_CREALITY_V4.h
index cf7594f784..8a413945b7 100644
--- a/Marlin/src/pins/stm32f1/pins_CREALITY_V4.h
+++ b/Marlin/src/pins/stm32f1/pins_CREALITY_V4.h
@@ -47,12 +47,12 @@
   #if ENABLED(IIC_BL24CXX_EEPROM)
     #define IIC_EEPROM_SDA                  PA11
     #define IIC_EEPROM_SCL                  PA12
-    //#define MARLIN_EEPROM_SIZE 0x4000           // 16Kb (24c16)
+    #define MARLIN_EEPROM_SIZE 0x800              // 2Kb (24C16)
+  #else
+    #define SDCARD_EEPROM_EMULATION               // SD EEPROM until all EEPROM is BL24CXX
+    #define MARLIN_EEPROM_SIZE 0x800              // 2Kb
   #endif
 
-  #define SDCARD_EEPROM_EMULATION                 // SD EEPROM until all EEPROM is BL24CXX
-  #define MARLIN_EEPROM_SIZE 0x1000               // 4Kb
-
   // SPI
   //#define SPI_EEPROM                            // EEPROM on SPI-0
   //#define SPI_CHAN_EEPROM1  ?

commit 42fbd527f3bcc317ae6851aca5a45bdbf979de55
Author: Diego von Deschwanden <68632259+Diegovd@users.noreply.github.com>
Date:   Thu Jul 23 05:20:14 2020 +0200

    Fix links to secure sites (#18745)

diff --git a/Marlin/src/pins/stm32f1/pins_CREALITY_V4.h b/Marlin/src/pins/stm32f1/pins_CREALITY_V4.h
index 4c9aa16270..cf7594f784 100644
--- a/Marlin/src/pins/stm32f1/pins_CREALITY_V4.h
+++ b/Marlin/src/pins/stm32f1/pins_CREALITY_V4.h
@@ -16,7 +16,7 @@
  * GNU General Public License for more details.
  *
  * You should have received a copy of the GNU General Public License
- * along with this program.  If not, see <http://www.gnu.org/licenses/>.
+ * along with this program.  If not, see <https://www.gnu.org/licenses/>.
  *
  */
 

commit e34684a9c7fac4b122e866e24f1599ad2dffd17d
Author: Scott Lahteine <github@thinkyhead.com>
Date:   Thu Jul 16 22:36:49 2020 -0500

    Smaller SD EEPROM file on Ender 3 V2

diff --git a/Marlin/src/pins/stm32f1/pins_CREALITY_V4.h b/Marlin/src/pins/stm32f1/pins_CREALITY_V4.h
index 6153ddbe68..4c9aa16270 100644
--- a/Marlin/src/pins/stm32f1/pins_CREALITY_V4.h
+++ b/Marlin/src/pins/stm32f1/pins_CREALITY_V4.h
@@ -47,10 +47,11 @@
   #if ENABLED(IIC_BL24CXX_EEPROM)
     #define IIC_EEPROM_SDA                  PA11
     #define IIC_EEPROM_SCL                  PA12
-    #define MARLIN_EEPROM_SIZE 0x4000             // 16Kb (24c16)
+    //#define MARLIN_EEPROM_SIZE 0x4000           // 16Kb (24c16)
   #endif
 
   #define SDCARD_EEPROM_EMULATION                 // SD EEPROM until all EEPROM is BL24CXX
+  #define MARLIN_EEPROM_SIZE 0x1000               // 4Kb
 
   // SPI
   //#define SPI_EEPROM                            // EEPROM on SPI-0

commit b8807128893a0ccb2b4633e27a91024dad36ed4f
Author: Scott Lahteine <github@thinkyhead.com>
Date:   Thu Jul 16 21:02:52 2020 -0500

    Fix material_preset reference issue

diff --git a/Marlin/src/pins/stm32f1/pins_CREALITY_V4.h b/Marlin/src/pins/stm32f1/pins_CREALITY_V4.h
index 2a7a212501..6153ddbe68 100644
--- a/Marlin/src/pins/stm32f1/pins_CREALITY_V4.h
+++ b/Marlin/src/pins/stm32f1/pins_CREALITY_V4.h
@@ -43,15 +43,15 @@
   //#define FLASH_EEPROM_EMULATION
 
   // I2C
-  //#define IIC_BL24CXX_EEPROM                    // EEPROM on I2C-0
+  #define IIC_BL24CXX_EEPROM                      // EEPROM on I2C-0 used only for display settings
   #if ENABLED(IIC_BL24CXX_EEPROM)
     #define IIC_EEPROM_SDA                  PA11
     #define IIC_EEPROM_SCL                  PA12
     #define MARLIN_EEPROM_SIZE 0x4000             // 16Kb (24c16)
-  #else
-    #define SDCARD_EEPROM_EMULATION               // SD EEPROM was in the original build, so...
   #endif
 
+  #define SDCARD_EEPROM_EMULATION                 // SD EEPROM until all EEPROM is BL24CXX
+
   // SPI
   //#define SPI_EEPROM                            // EEPROM on SPI-0
   //#define SPI_CHAN_EEPROM1  ?

commit 7a0af01e692ddcf2ee55800a035c2276c40bee7c
Author: Scott Lahteine <github@thinkyhead.com>
Date:   Mon Jul 13 15:57:26 2020 -0500

    Creality V4 cleanup

diff --git a/Marlin/src/pins/stm32f1/pins_CREALITY_V4.h b/Marlin/src/pins/stm32f1/pins_CREALITY_V4.h
index b50be33079..2a7a212501 100644
--- a/Marlin/src/pins/stm32f1/pins_CREALITY_V4.h
+++ b/Marlin/src/pins/stm32f1/pins_CREALITY_V4.h
@@ -38,27 +38,31 @@
 //
 // EEPROM
 //
-
-/* I2C */
-#define IIC_BL24CXX_EEPROM                        // EEPROM on I2C-0
-//#define E2END 0x3FFF                            // 16Kb (24c16)
-#define IIC_EEPROM_SDA                      PA11
-#define IIC_EEPROM_SCL                      PA12
-
-// SD EEPROM was in your original build, so...
-#define SDCARD_EEPROM_EMULATION
-
-/* SPI */
-//#define SPI_EEPROM                              // EEPROM on SPI-0
-//#define SPI_CHAN_EEPROM1        ?
-//#define SPI_EEPROM1_CS          ?
-// 2K EEPROM
-//#define SPI_EEPROM2_CS          ?
-// 32Mb FLASH
-//#define SPI_FLASH_CS            ?
-
-/* FLASH */
-//#define FLASH_EEPROM_EMULATION
+#if NO_EEPROM_SELECTED
+  // FLASH
+  //#define FLASH_EEPROM_EMULATION
+
+  // I2C
+  //#define IIC_BL24CXX_EEPROM                    // EEPROM on I2C-0
+  #if ENABLED(IIC_BL24CXX_EEPROM)
+    #define IIC_EEPROM_SDA                  PA11
+    #define IIC_EEPROM_SCL                  PA12
+    #define MARLIN_EEPROM_SIZE 0x4000             // 16Kb (24c16)
+  #else
+    #define SDCARD_EEPROM_EMULATION               // SD EEPROM was in the original build, so...
+  #endif
+
+  // SPI
+  //#define SPI_EEPROM                            // EEPROM on SPI-0
+  //#define SPI_CHAN_EEPROM1  ?
+  //#define SPI_EEPROM1_CS    ?
+
+  // 2K EEPROM
+  //#define SPI_EEPROM2_CS    ?
+
+  // 32Mb FLASH
+  //#define SPI_FLASH_CS      ?
+#endif
 
 //
 // Servos

commit 819e48972d9cb321275a37fcfccaf2a990f4f222
Author: Jason Smith <jason.inet@gmail.com>
Date:   Mon Jun 22 13:27:01 2020 -0700

    Improve U8G+SPI delay override (#18386)
    
    Co-authored-by: Scott Lahteine <github@thinkyhead.com>

diff --git a/Marlin/src/pins/stm32f1/pins_CREALITY_V4.h b/Marlin/src/pins/stm32f1/pins_CREALITY_V4.h
index f2a45e652e..b50be33079 100644
--- a/Marlin/src/pins/stm32f1/pins_CREALITY_V4.h
+++ b/Marlin/src/pins/stm32f1/pins_CREALITY_V4.h
@@ -119,7 +119,7 @@
 #define SD_DETECT_PIN                       PC7
 #define SDCARD_CONNECTION                ONBOARD
 #define ON_BOARD_SPI_DEVICE 1
-#define ONBOARD_SD_CS_PIN                   PA4  // SDSS
+#define ONBOARD_SD_CS_PIN                   PA4   // SDSS
 #define SDIO_SUPPORT
 
 #if ENABLED(RET6_12864_LCD)

commit f4c258dc2355fee871bec6e11095c7c4777b160d
Author: Scott Lahteine <thinkyhead@users.noreply.github.com>
Date:   Tue Jun 16 01:45:27 2020 -0500

    Creality Ender 3 v2 (#17719)

diff --git a/Marlin/src/pins/stm32f1/pins_CREALITY_V4.h b/Marlin/src/pins/stm32f1/pins_CREALITY_V4.h
new file mode 100644
index 0000000000..f2a45e652e
--- /dev/null
+++ b/Marlin/src/pins/stm32f1/pins_CREALITY_V4.h
@@ -0,0 +1,167 @@
+/**
+ * Marlin 3D Printer Firmware
+ * Copyright (C) 2016 MarlinFirmware [https://github.com/MarlinFirmware/Marlin]
+ *
+ * Based on Sprinter and grbl.
+ * Copyright (C) 2011 Camiel Gubbels / Erik van der Zalm
+ *
+ * This program is free software: you can redistribute it and/or modify
+ * it under the terms of the GNU General Public License as published by
+ * the Free Software Foundation, either version 3 of the License, or
+ * (at your option) any later version.
+ *
+ * This program is distributed in the hope that it will be useful,
+ * but WITHOUT ANY WARRANTY; without even the implied warranty of
+ * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
+ * GNU General Public License for more details.
+ *
+ * You should have received a copy of the GNU General Public License
+ * along with this program.  If not, see <http://www.gnu.org/licenses/>.
+ *
+ */
+
+/**
+ * CREALITY (STM32F103) board pin assignments
+ */
+
+#ifndef __STM32F1__
+  #error "Oops! Select an STM32F1 board in 'Tools > Board.'"
+#endif
+
+#if HOTENDS > 1 || E_STEPPERS > 1
+  #error "CREALITY supports up to 1 hotends / E-steppers. Comment out this line to continue."
+#endif
+
+#define BOARD_INFO_NAME      "CREALITY V4"
+#define DEFAULT_MACHINE_NAME "Ender 3 V2"
+
+//
+// EEPROM
+//
+
+/* I2C */
+#define IIC_BL24CXX_EEPROM                        // EEPROM on I2C-0
+//#define E2END 0x3FFF                            // 16Kb (24c16)
+#define IIC_EEPROM_SDA                      PA11
+#define IIC_EEPROM_SCL                      PA12
+
+// SD EEPROM was in your original build, so...
+#define SDCARD_EEPROM_EMULATION
+
+/* SPI */
+//#define SPI_EEPROM                              // EEPROM on SPI-0
+//#define SPI_CHAN_EEPROM1        ?
+//#define SPI_EEPROM1_CS          ?
+// 2K EEPROM
+//#define SPI_EEPROM2_CS          ?
+// 32Mb FLASH
+//#define SPI_FLASH_CS            ?
+
+/* FLASH */
+//#define FLASH_EEPROM_EMULATION
+
+//
+// Servos
+//
+#define SERVO0_PIN                          PB0   // BLTouch OUT
+
+//
+// Limit Switches
+//
+#define X_STOP_PIN                          PA5
+#define Y_STOP_PIN                          PA6
+#define Z_STOP_PIN                          PA7
+
+#define Z_PROBE_PIN                         PB1   // BLTouch IN
+
+//
+// Steppers
+//
+#define X_ENABLE_PIN                        PC3
+#define X_STEP_PIN                          PC2
+#define X_DIR_PIN                           PB9
+
+#define Y_ENABLE_PIN                        PC3
+#define Y_STEP_PIN                          PB8
+#define Y_DIR_PIN                           PB7
+
+#define Z_ENABLE_PIN                        PC3
+#define Z_STEP_PIN                          PB6
+#define Z_DIR_PIN                           PB5
+
+#define E0_ENABLE_PIN                       PC3
+#define E0_STEP_PIN                         PB4
+#define E0_DIR_PIN                          PB3
+
+//
+// Release PB4 (Y_ENABLE_PIN) from JTAG NRST role
+//
+#define DISABLE_DEBUG
+
+//
+// Temperature Sensors
+//
+#define TEMP_0_PIN                          PC5   // TH1
+#define TEMP_BED_PIN                        PC4   // TB1
+
+//
+// Heaters / Fans
+//
+#define HEATER_0_PIN                        PA1   // HEATER1
+#define HEATER_BED_PIN                      PA2   // HOT BED
+
+#define FAN_PIN                             PA0   // FAN
+#define FAN_SOFT_PWM
+
+//
+// SD Card
+//
+#define SD_DETECT_PIN                       PC7
+#define SDCARD_CONNECTION                ONBOARD
+#define ON_BOARD_SPI_DEVICE 1
+#define ONBOARD_SD_CS_PIN                   PA4  // SDSS
+#define SDIO_SUPPORT
+
+#if ENABLED(RET6_12864_LCD)
+
+  /* RET6 12864 LCD */
+  #define LCD_PINS_RS                       PB12
+  #define LCD_PINS_ENABLE                   PB15
+  #define LCD_PINS_D4                       PB13
+
+  #define BTN_ENC                           PB2
+  #define BTN_EN1                           PB10
+  #define BTN_EN2                           PB14
+
+  #define BEEPER_PIN                        PC6
+#elif ENABLED(VET6_12864_LCD)
+
+  /* VET6 12864 LCD */
+  #define LCD_PINS_RS                       PA4
+  #define LCD_PINS_ENABLE                   PA7
+  #define LCD_PINS_D4                       PA5
+
+  #define BTN_ENC                           PC5
+  #define BTN_EN1                           PB10
+  #define BTN_EN2                           PA6
+
+#elif ENABLED(DWIN_CREALITY_LCD)
+
+  /* RET6 DWIN ENCODER LCD */
+  #define BTN_ENC                           PB14
+  #define BTN_EN1                           PB15
+  #define BTN_EN2                           PB12
+
+  //#define LCD_LED_PIN                     PB2
+  #define BEEPER_PIN                        PB13
+
+#elif ENABLED(DWIN_VET6_CREALITY_LCD)
+
+  /* VET6 DWIN ENCODER LCD */
+  #define BTN_ENC                           PA6
+  #define BTN_EN1                           PA7
+  #define BTN_EN2                           PA4
+
+  #define BEEPER_PIN                        PA5
+
+#endif
